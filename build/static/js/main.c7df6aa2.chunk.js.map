{"version":3,"sources":["context/NetworkContext.tsx","constants/boltzSwap.ts","context/UtilsContext.tsx","constants/boltzRates.ts","utils/boltzReverseSwap.ts","utils/boltzSwapStatus.ts","constants/boltzFetcherHook.ts","services/reverse/addressValidation.js","assets/images/Boltz.svg","assets/images/Camera.svg","assets/images/Cameraclock.svg","assets/images/close.svg","assets/images/comit-logo-black.svg","assets/images/comit-logo.svg","assets/images/Demo.svg","assets/images/external-link.svg","assets/images/fast.svg","assets/images/green-tick.svg","assets/images/hacked.svg","assets/images/hamburger.svg","assets/images/Homepage.svg","assets/images/left-arrow.svg","assets/images/media.svg","assets/images/medium.svg","assets/images/sawp.svg","assets/images/Oval.svg","assets/images/question-icon.svg","assets/images/right-arrow-white.svg","assets/images/right-arrow.svg","assets/images/safe.svg","assets/images/Shape.svg","assets/images/snap.svg","assets/images/success.svg","assets/images/swap.svg","assets/images/tdex-logo.svg","utils/svgIcons.js","assets/images/twitter.svg","assets/images/Homepage-min.png","store/boltz-slice.ts","store/hooks.ts","utils/web3modal.ts","components/Button/index.tsx","components/BoltzSwapFlow/components/BoltzEthereumAccount.tsx","components/ErrorMessage/index.tsx","components/BoltzSwapFlow/components/BoltzSwapStep/index.tsx","components/BoltzSwapFlow/components/BoltzReverseDestination/index.tsx","services/refund/timestamp.js","utils/ethereumTransactionWrapper.ts","utils/invoiceDecoder.ts","utils/tokenDecimalHelper.ts","components/DrawQrCode/index.js","components/BoltzSwapFlow/components/BoltzReverseSend/index.tsx","components/BoltzSwapFlow/components/BoltzSwapResult/index.tsx","components/BoltzSwapFlow/components/BoltzReverseSwapResult/index.tsx","components/BoltzSwapFlow/components/BoltzReverseSwap/index.tsx","components/BoltzSwapFlow/components/BoltzSubmarineSwapResult/index.tsx","components/BoltzSwapFlow/components/BoltzSubmarineStatus/index.tsx","components/BoltzSwapFlow/components/BoltzSubmarineSwapStatus/index.tsx","services/submarine/invoiceValidation.js","components/DownloadRefundFile/index.tsx","utils/createRefundQr.js","utils/detectTorBrowser.js","components/DialogBox/index.js","components/QrCodeReader/index.js","constants/swap.ts","components/BoltzSwapFlow/components/BoltzAmount/index.tsx","components/BoltzSwapFlow/components/BoltzSubmarineDestination/index.tsx","components/BoltzSwapFlow/components/BoltzSubmarineSend/BoltzSubmarineSendEthereum.tsx","components/BoltzSwapFlow/components/BoltzSubmarineSend/index.tsx","components/BoltzSwapFlow/components/BoltzSubmarineSwap/index.tsx","components/BoltzSwapFlow/index.tsx","components/Card/index.tsx","components/ComitSwapFlow/BitcoinAmount.ts","components/ComitSwapFlow/Asb.ts","components/ComitSwapFlow/MoneroAmount.ts","components/ComitSwapFlow/XmrBtcRateFetcher.ts","components/ComitSwapFlow/useComitRate.tsx","components/TdexSwapFlow/constants/index.ts","components/TdexSwapFlow/utils/format.ts","components/TdexSwapFlow/utils/tdexFetcher.ts","store/tdex-slice.ts","components/NumberField/NumberInput.tsx","components/NumberField/index.tsx","components/Select/index.js","components/AssetSelector/index.tsx","components/BoltzRefundLink/index.tsx","components/SwapButton/index.tsx","components/ComitSwapFlow/utils.ts","components/ChooseTradingPair/index.tsx","utils/swapProvider.ts","components/TdexSwapFlow/utils/tdexFetcherHook.ts","components/ComitSwapFlow/useComitFetcher.tsx","components/ComitSwapFlow/index.tsx","components/ComitSwapFlow/useDownloadUrl.tsx","components/NetworkSelection/index.tsx","components/App/theme.ts","components/PoweredBy/index.tsx","components/TdexSwapFlow/components/connect.tsx","components/TdexSwapFlow/index.tsx","components/TdexSwapFlow/utils/browserInject.ts","components/TdexSwapFlow/components/review.tsx","components/TdexSwapFlow/components/steps.tsx","components/TdexSwapFlow/components/summary.tsx","components/Title/index.tsx","components/Background/index.tsx","components/Divider/index.tsx","components/Footer/index.js","assets/images/swap.png","components/NavLink/index.tsx","components/Menu/index.tsx","components/NavBar/index.tsx","layout/main.tsx","components/BoltzSwapFlow/components/BoltzChooseSwap/index.tsx","components/BoltzSwapFlow/components/BoltzRefundResult/index.tsx","components/BoltzSwapFlow/components/BoltzRefundStatus/index.tsx","utils/error.ts","components/BoltzSwapFlow/components/BoltzRefundBitcoinLike/index.tsx","constants/blockTimes.js","views/refund/ethereumFetcher.js","components/BoltzSwapFlow/components/BoltzRefundEth/index.tsx","pages/BoltzRefund.tsx","pages/home.tsx","store/index.ts","components/App/index.tsx","serviceWorker.js","index.tsx","services/submarine/keys.js","constants/transport.ts","constants/currency.ts","assets/images/currencies/Bitcoin.svg","assets/images/currencies/Ether.svg","assets/images/currencies/LightningBitcoin.svg","assets/images/currencies/LightningLitecoin.svg","assets/images/currencies/LiquidCAD.png","assets/images/currencies/LiquidTether.svg","assets/images/currencies/Litecoin.svg","assets/images/currencies/Monero.svg","assets/images/currencies/index.js","assets/images/currencies/TetherLogo.svg","assets/images/currencies/LiquidBitcoin.png","utils/getCurrencyLabel.js","services/submarine/randomBytes.js","utils/boltzRefund.ts","api/boltzApiUrls.ts"],"names":["Network","SwapUpdateEvent","defaultNetwork","Testnet","NetworkContext","React","createContext","network","setNetwork","NetworkProvider","children","useState","Provider","value","useNetwork","useContext","useBlockExplorers","explorers","Map","Object","keys","CurrencyID","currency","blockExplorer","address","process","transaction","undefined","set","useBoltzConfiguration","capitalizeFirstLetter","input","charAt","toUpperCase","slice","apiEndpoint","infuraId","bitcoinConstants","Networks","toLowerCase","litecoinConstants","UtilsContext","UtilsProvider","isMobileView","is","mobile","boltzPairsMap","BTC","LIGHTNING_BTC","LTC","LIGHTNING_LTC","ETH","ETH_USDT","Error","isCurrencyOnChain","getAmountOut","pair","rates","fixedSendAmount","inputCurrency","inputAmount","amount","outputCurrency","filter","amountWithFees","BigNumber","outputAmountWithoutFees","minerFees","inputCurrencyIsBaseAsset","pairs","rate","fees","multipliedBy","quoteAsset","div","baseAsset","nominalPercentageFee","percentage","sendingOnChain","fixedMinerFee","SATOSHIS_PER_COIN","pow","normal","reverse","claim","plus","lockup","getFixedMinerFees","minus","BoltzFetcher","options","rates$","rates$subscription","formatPair","pipe","map","base","quote","isMirrorPair","pairId","orderSide","take","toPromise","getLimits","minimal","maximal","pairDetails","limits","dividedBy","this","interval","startWith","mergeMap","fromFetch","url","switchMap","response","ok","from","json","console","warn","of","catchError","err","shareReplay","bufferSize","refCount","subscribe","amountWithCurrency","unsubscribe","swapSteps","status","TransactionMempool","initialText","textComplete","TransactionConfirmed","InvoicePending","ChannelCreated","InvoicePaid","TransactionClaimed","getBoltzReverseSwapsFromLocalStorage","JSON","parse","localStorage","getItem","setBoltzReverseSwapsToLocalStorage","swaps","setItem","stringify","getClaimTransaction","onchainCurrency","claimDetails","statusResponse","swapResponse","feeEstimation","redeemScript","getHexBuffer","lockupTransaction","Transaction","fromHex","hex","constructClaimTransaction","detectSwap","txHash","getHash","preimage","preImage","ECPair","fromPrivateKey","privateKey","toOutputScript","startListening","swapId","onMessage","stream","EventSource","BOLTZ_STREAM_SWAP_STATUS_API_URL","onmessage","event","data","onerror","log","close","setTimeout","swapError","step","concat","InvoiceSet","some","includes","InvoiceFailedToPay","TransactionLockupFailed","SwapExpired","failureReason","isFinal","instant","TransactionRefunded","TransactionFailed","useBoltzFetcher","fetcher","setFetcher","BOLTZ_GET_PAIRS_API_URL","useEffect","boltzFetcher","clean","isAddressValid","swapAddress","trim","error","leftArrow","rightArrowPlain","rightArrow","camera","greenTick","swap","snap","clock","logo","boltz","opendex","fast","safe","hacked","medium","media","twitter","demo","homepage","homepagemin","oval","hamburger","questionIcon","externalLinkIcon","comitLogo","comitLogoBlack","tdexLogo","success","defaultUnitValues","fromEntries","entries","fundTransferTypes","find","val","initialState","unit","ethereumData","swapsSlice","createSlice","name","reducers","setUnit","state","action","payload","setEthereumData","actions","selectUnit","selectEthereumData","useAppDispatch","useDispatch","useAppSelector","useSelector","createWeb3Modal","ethereumNetworkName","a","providerOptions","walletconnect","package","WalletConnectProvider","Web3Modal","cacheProvider","theme","isDefaultColor","props","color","useStyles","makeStyles","button","borderRadius","backgroundColor","variant","palette","text","primary","buttonWrapper","position","buttonProgress","top","left","marginTop","marginLeft","Button","className","loading","muiButtonProps","classes","buttonClass","FormControl","fullWidth","disableElevation","CircularProgress","size","createStyles","buttonsContainer","Identicon","id","ref","parent","lastChild","removeChild","removeChildren","appendChild","jazzicon","parseInt","BoltzEthereumAccount","setError","setSigner","setWrongChain","dispatch","provider","setProvider","web3Modal","setWeb3Modal","signerAddress","setSignerAddress","axios","get","BOLTZ_GET_CONTRACTS_API_URL","ethereum","cachedProvider","connect","web3modalProvider","ethersProvider","providers","Web3Provider","signer","getSigner","getAddress","setNetworkError","useCallback","wantedNetwork","chainId","on","accounts","length","getChainId","removeAllListeners","showWeb3Modal","clearCachedProvider","onClick","Grid","item","container","justify","alignItems","direction","spacing","additionalButton","root","fontFamily","ErrorMessage","message","rootClass","Typography","align","content","padding","flex","justifyContent","title","marginBottom","fontSize","lineHeight","letterSpacing","width","errorMessage","BoltzSwapStep","mainButtonText","mainButtonVisible","mainButtonDisabled","mainButtonLoading","onMainButtonClick","component","disabled","display","instantHint","height","BoltzReverseDestination","sendAsset","receiveAsset","sendAmount","proceedToNext","boltzRates","setAddrerss","setInstant","wrongChain","setLoading","setKeys","useMemo","isUtxoChain","placeholder","generateKeys","createSwap","formattedPairs","randomBytes","publicKey","getHexString","crypto","sha256","toNumber","type","claimPublicKey","preimageHash","invoiceAmount","claimAddress","params","instantSwap","fetch","BOLTZ_CREATE_SWAP_API_URL","method","headers","body","addressInvalid","TextField","multiline","aria-label","rows","onChange","e","target","InputProps","helperText","FormControlLabel","control","Switch","checked","oldValue","label","Tooltip","src","svgIcons","alt","diffCalculator","diffInMilliSeconds","secondsFormat","originalDifference","days","Math","floor","hours","eta","minutes","seconds","difference","sendEthereumTransaction","populatedTransaction","estimateGas","gasEstimate","sendTransaction","gasLimit","add","decodeInvoice","invoice","payment_hash","routing_info","decoded","bolt11","decode","tags","tag","tagName","paymentHash","routingInfo","satoshis","timeUntilExpiry","invoiceExpiry","timestamp","timeExpireDate","round","Date","getTime","formatTokenAmount","decimals","amountBn","exponent","abs","mul","QrCode","drawQrCode","link","element","document","getElementById","qr","Qrious","level","background","foreground","backgroundAlpha","foregroundAlpha","substring","Component","qrCodeContainer","titleContainer","titleIcon","linkIcon","expireContainer","BoltzReverseSend","swapStatus","swapDetails","proceedToNextEthereum","etaTimeDiffLabel","setEtaTimeDiffLabel","setMainButtonDisabled","setOnMainButtonClick","etaLeft","setETALeft","explorer","blockExplorerLink","lockupAddress","claimFunction","etherSwap","Contract","swapContracts","EtherSwap","ContractABIs","populateTransaction","onchainAmount","refundAddress","timeoutBlockHeight","transactionId","hash","erc20Swap","ERC20Swap","tokenContract","tokens","ERC20","tokenDecimals","getETALabelWithSeconds","sub","clearTimeout","Link","href","rel","navigator","clipboard","writeText","DrawQrCode","imageContainer","refundButton","margin","BoltzSwapResult","showRefundButton","BoltzReverseSwapResult","history","useHistory","mapAssetToChain","replace","ROUTES","HOME","BoltzReverseSwap","activeStep","setActiveStep","claimTransactionId","setClaimTransactionId","setSwapDetails","setSwapStatus","setClaimDetails","destinationComplete","details","boltzSwaps","push","addReverseSwapDetailsToLocalStorage","receiveCurrency","onClaimTransaction","getFeeEstimation","resp","tap","claimTransaction","broadcastRefund","toHex","claimSwap","getId","next","complete","removeRefundDetailsFromLocalStorage","sendCompleteEthereum","BoltzSubmarineSwapResult","progressBar","BoltzSubmarineStatus","onActiveStepChange","statusIndex","findIndex","newActiveStep","Stepper","orientation","index","Step","StepLabel","StepContent","LinearProgress","BoltzSubmarineSwapStatus","swapInProgress","isInvoiceValid","DownloadRefundFile","createRef","current","click","jsonData","isTorBrowser","createElement","canvas","imagedata","getContext","getImageData","detectTorBrowser","refundFile","QRious","toDataURL","fileName","download","SimpleDialog","onClose","open","useTheme","fullScreen","useMediaQuery","breakpoints","down","handleClose","Dialog","aria-labelledby","DialogTitle","aria-controls","aria-haspopup","QrCodeReader","setOpen","mediaDevices","getUserMedia","video","then","catch","alert","closeDialogBox","DialogBox","delay","onError","onScan","style","SwapProvider","Direction","selectInput","paddingTop","paddingBottom","amountRow","amountContainer","unitContainer","BoltzAmount","amountInMainUnit","onDisplayedAmountChange","units","unitOptions","getUnit","displayedAmount","toString","xs","Select","inputProps","selected","opt","option","MenuItem","scanButton","hintIcon","endAdornment","downloadRefund","downloadRefundHint","BoltzSubmarineDestination","receiveAmount","setInvoice","downloadRefundFile","setDownloadRefundFile","browserScan","setBrowserScan","refundDetails","setRefundDetails","setDisplayedAmount","utilsContext","invoiceFieldText","invoiceValid","nextEnabled","refundPublicKey","channel","auto","private","inboundLiquidity","refundData","date","addRefundDetailsToLocalStorage","refundDownloadAvailable","startIcon","InputAdornment","BoltzSubmarineSendEthereum","sendCurrency","notEnoughTokens","setNotEnoughTokens","setTokenContract","needsApproval","setNeedsApproval","waitingForApproval","setWaitingForApproval","setTokenDecimals","signerAddress$","erc20SwapAddress","forkJoin","allowance","balanceOf","balance","formattedTokenAmount","expectedAmount","lt","lte","approve","constants","MaxUint256","lock","BoltzSubmarineSend","isWaitingForTransaction","bip21","BoltzSubmarineSwap","setPreimageHash","minHeight","BoltzSwapFlow","card","CardComponent","sm","md","lg","xl","Card","CardContent","SwapProviderPair","BOTH","swapProviders","BOLTZ","COMIT","MONERO","SINGLE","TDEX","LIQUID_BTC","LIQUID_USDT","LIQUID_CAD","BitcoinAmount","Decimal","satsInOneBtc","toDecimalPlaces","asBtc","btc","xmr","piconeros_to_sat_adjust","asPic","asSat","MAINNET","maxAccepted","fromBtc","minAccepted","multiaddr","peerId","spread","TESTNET","fromKrakenPriceToQuote","price","withSpreadDec","Mainnet","getSpread","withSpread","max_quantity","getMax","min_quantity","getMin","getPeerId","getMultiaddr","MoneroAmount","piconeros","picsInOneXmr","asXmr","pic","XmrBtcRateFetcher","latestQuote","ensureNoRefreshErrors","receive","receiveAmountForSendAmount","getQuote","Promise","resolve","receive_xmr","fromXmr","send_btc","fromBtcRateAndAmount","send","useComitRate","setQuote","xmrBtcRateFetcher","setXmrBtcRateFetcher","latestKrakenPrice","setLatestKrakenPrice","useWebSocket","sendMessage","lastJsonMessage","readyState","subscribeToXmrBtcTicker","ReadyState","OPEN","connectionID","Array","isArray","ask","CONNECTING","CLOSED","updateQuote","updateError","rateFetcher","ExplorerByChain","liquid","regtest","EsploraByChain","LIQUID_BTC_REGTEST","LBTC_USDT","USDT_LBTC","LBTC_LCAD","LCAD_LBTC","BaseQuoteByPair","LiquidAssetHashByCurrenyID","precision","RegtestAssetHashByCurrenyID","REACT_APP_LIQUID_USDT_REGTEST","REACT_APP_LIQUID_CAD_REGTEST","LiquidCurrencyIDByAssetHash","RegtestCurrencyIDByAssetHash","CurrencyToAssetByChain","AssetToCurrencyByChain","toSatoshi","fractional","exponentiatedBy","fromSatoshi","sats","baseQuoteFromCurrencyPair","key","toKey","x","currencyA","currencyB","TdexFetcher","supportedPairs","providersWithMarketByPair","isPairSupported","previewForPair","isSend","amountInSatoshis","baseCurrency","quoteCurrency","providersForPair","isBaseComingIn","tradeType","TradeType","SELL","BUY","providerWithMarket","client","TraderClient","endpoint","marketPrice","market","prices","firstPrice","bestPrice","baseAmount","bestProvider","quoteAmount","CustomEvent","detail","window","dispatchEvent","expectedCurrency","asset","markets","forEach","pairAsKey","hasOwnProperty","tdexSlice","setBestProvider","seletctBestProvider","tdex","NumberInput","inputRef","negativeEnabled","decimalScale","other","getInputRef","onValueChange","values","isNumericString","allowNegative","NumberField","inputComponent","SelectComponent","defaultValue","disableUnderline","setOption","Box","select","selectedOption","SelectProps","MenuProps","disableScrollLock","selectAsset","AssetSelector","onAmountChange","onAssetChange","selectedAsset","Skeleton","animation","autoFocus","CurrencyOptions","InputLabelProps","shrink","textDecoration","BoltzRefundLink","wrap","to","BOLTZ_REFUND","OS","wrapper","minWidth","icon","transform","upIcon","opacity","SwapButton","upIconClass","right","amountscontainer","errorMessageContainer","ChooseTradingPair","_props","ratesFetcher","Currency","setSendAsset","setReceiveAsset","setSendAmount","setReceiveAmount","sendAmountError","setSendAmountError","receiveAmountError","setReceiveAmountError","isPreviewing","setIsPreviewing","swapProvider","provider_pair","getSwapProvider","previewValueError","setPreviewValueError","nextDisabled","Number","tdexFetcher","stableDispatch","liquidNetwork","listOfProviders","result","WithTdexProviders","addEventListener","evt","useTdexFetcher","comitFetcher","amountIsPositive","isNaN","onSendAmountChange","previewGivenSend","receiveValue","convertAmountToString","validateReceiveLimits","onReceiveAmountChange","previewGivenReceive","sendValue","gt","toLocaleString","maximumFractionDigits","URLSearchParams","append","buildUrl","NEW_SWAP","getOs","os","UNSUPPORTED","appVersion","indexOf","WINDOWS","MAC","LINUX","ComitSwapFlow","downloadUrl","setDownloadUrl","res","gh","assets","startsWith","browser_download_url","useDownloadUrl","copyTooltipOpen","setCopyTooltipOpen","handleCopyTooltipClose","moneroAddress","setMoneroAddress","validMoneroAddress","setValidMoneroAddress","monero_address_regex_str","monero_address_regex","RegExp","monero_address_validator","swapExecCommand","youSend","youReceive","flexDirection","p","m","toBtcString","toXmrString","Avatar","step_number","step_text","mt","onSubmit","exec","validators","errorMessages","overflow","whiteSpace","flexBasis","ClickAwayListener","onClickAway","PopperProps","disablePortal","disableFocusListener","disableHoverListener","disableTouchListener","placement","IconButton","command","innerText","step_number_inactive","step_text_inactive","main","marginRight","borderColor","borderWidth","borderStyle","getContrastText","dark","fontWeight","NetworkSelection","typography","secondary","default","paper","contrastText","image","providerInfo","providerName","logos","source","PoweredBy","serviceInfo","Steps","instructions","Connect","onConnect","installed","connected","handleConnect","marina","enable","goAhead","newWindow","opener","BrowserInjectOpenDex","args","_provider","blindKeyByScript","windowProvider","script","getAddresses","addr","confidentialAddress","found","blindingPrivateKey","BrowserInject","terms","buttons","Review","onTrade","onReject","chain","isLoading","setIsLoading","identity","IdentityType","Inject","handleConfirm","addrs","fetchAndUnblindUtxos","utxos","trade","Trade","providerUrl","explorerUrl","coinSelector","greedyCoinSelector","assetToBeSent","amountToBeSentInSatoshis","amountToBeSent","buy","txid","sell","amountToReceive","assetToReceive","backButton","TdexStepper","steps","alternativeLabel","Summary","onNewTrade","openInNewTab","info","paddingLeft","paddingRight","infoText","wordWrap","wordBreak","TdexSwapFlow","setInstalled","setConnected","setChain","setTxid","isCheckingMarina","setInterval","getNetwork","net","isEnabled","clearInterval","handleTradeCompleted","handleNext","prevActiveStep","handleGoBack","goBack","getStepContent","fontStretch","fontStyle","textAlign","Title","outerCircle","zIndex","innerCircle","backgroundImage","Background","Divider","Footer","navLink","NavLink","linkProps","menuOpener","popper","withWidth","repoLink","isWidthUp","Popper","transition","anchorEl","TransitionProps","Grow","Paper","MenuList","autoFocusItem","toolbar","flexWrap","AppBar","elevation","Toolbar","Logo","box","DefaultLayout","list","maxHeight","overflowY","uploadButton","uploadedPlaceholder","uploadSuccess","subtitle","BoltzChooseSwap","setErrorMessage","uploadedFile","setUploadedFile","storedSwaps","setStoredSwaps","selectedSwap","setSelectedSwap","fileInput","getBoltzSwapsFromLocalStorage","List","ListItem","ListItemText","accept","convertRefundFile","files","iconContainer","BoltzRefundResult","successMessage","addressField","BoltzRefundStatus","setAddress","onSwapTransactionChange","swapTransaction","setSwapTransaction","queryTransaction","setQueryTransaction","addressFieldText","timer","BOLTZ_GET_SWAP_TRANSACTION_API_URL","retry","timeoutEta","transactionHex","getErrorMessage","BoltzRefundBitcoinLike","boltzConfig","reset","getEta","d1","d2","swapComplete","buttonText","onButtonClick","checkStatus","buttonDisabled","refundButtonText","startRefund","prev","BOLTZ_SWAP_STATUS_API_URL","sixHoursBlocks","abortQuerying","CurrencyTypes","handleFilterResults","appendToSwapIds","contract","filterResults","valueHashTypes","valueHash","utils","solidityKeccak256","getBlock","blockHash","blockOfSwap","swapDate","transactionHash","queryFilter","getBlockNumber","scanToBlock","BoltzRefundEth","refundableEthSwaps","setRefundableEthSwaps","timeoutDelta","setTimeoutDelta","contracts","abortQueryingEthereumSwaps","filters","Lockup","etherFilter","erc20Filter","queryEthereumSwaps","refundableSwap","existingSwaps","blockNumber","timelock","parseFloat","blockTimes","toFixed","refundEthereumSwap","refund","tx","wait","tokenAddress","assetOptions","BoltzRefund","setAsset","assetIsBitcoinLike","assetOption","HomePage","path","sensitive","strict","exact","render","match","matchedSwapProvider","matchedReceiveAsset","matchedSendAsset","location","search","SwapFlow","BOLTZ_REFUND_DETAIL","query","ret","store","configureStore","reducer","boltzReducer","tdexReducer","createBrowserHistory","App","ThemeProvider","createMuiTheme","CssBaseline","Boolean","hostname","ReactDOM","serviceWorker","ready","registration","unregister","makeRandom","TransportChain","TransportLayer","TransportExtraType","Ether","Tether","Bitcoin","Litecoin","LiquidBitcoin","LiquidTether","LiquidCAD","LightningBitcoin","LightningLitecoin","Monero","getCurrencyLabel","currencyIcons","CurrencyName","CurrencyType","CurrencyByID","symbol","transport","BITCOIN","layer","ONCHAIN","swapValues","BitcoinLike","LIGHTNING","Lightning","LIQUID","Liquid","USDT","CAD","ETHEREUM","extraType","LITECOIN","bytes","Buffer","allocUnsafe","global","getRandomValues","setBoltzSwapsToLocalStorage","swapIndex","splice","verifyRefundFile","fileJSON","every","prototype","call","file","reader","FileReader","readAsText","onload","fileJson","qrcodeParser","parsedQr","verifyFile","destinationAddress","createRefundTransaction","refundTransaction","BOLTZ_GET_FEE_ESTIMATION_API_URL","throwError","constructRefundTransaction","lockupTransactionId","BOLTZ_BROADCAST_TRANSACTION_API_URL","baseUrl"],"mappings":"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","file":"static/js/main.c7df6aa2.chunk.js","sourcesContent":["import { Network as NetworkConstants } from 'bitcoinjs-lib';\r\nimport { Networks } from 'boltz-core';\r\nimport React from 'react';\r\nimport CurrencyID from '../constants/currency';\r\n\r\nenum Network {\r\n  Mainnet = 'MAINNET',\r\n  Testnet = 'TESTNET',\r\n  Regtest = 'REGTEST',\r\n}\r\n\r\ntype BlockExplorerConfiguration = {\r\n  address: string;\r\n  transaction: string;\r\n};\r\n\r\nexport type BoltzConfiguration = {\r\n  infuraId: string;\r\n  apiEndpoint: string;\r\n\r\n  bitcoinConstants: NetworkConstants;\r\n  litecoinConstants: NetworkConstants;\r\n};\r\n\r\ntype NetworkContextData = {\r\n  network: Network;\r\n  setNetwork: (network: Network) => void;\r\n};\r\n\r\nconst defaultNetwork = Network.Testnet;\r\n/*\r\n  window.location.hostname === 'opendex.app'\r\n    ? Network.Mainnet\r\n    : window.location.hostname === 'staging.opendex.app'\r\n    ? Network.Testnet\r\n    : Network.Regtest;\r\n*/\r\n\r\nconst NetworkContext = React.createContext<NetworkContextData>({\r\n  network: defaultNetwork,\r\n  setNetwork: () => {},\r\n});\r\n\r\nconst NetworkProvider = ({ children }) => {\r\n  const [network, setNetwork] = React.useState<Network>(defaultNetwork);\r\n\r\n  return (\r\n    <NetworkContext.Provider\r\n      value={{\r\n        network,\r\n        setNetwork,\r\n      }}\r\n    >\r\n      <>{children}</>\r\n    </NetworkContext.Provider>\r\n  );\r\n};\r\n\r\nconst useNetwork = (): NetworkContextData => {\r\n  return React.useContext(NetworkContext);\r\n};\r\n\r\nconst useBlockExplorers = (): Map<string, BlockExplorerConfiguration> => {\r\n  const { network } = React.useContext(NetworkContext);\r\n\r\n  const explorers = new Map<string, BlockExplorerConfiguration>();\r\n\r\n  for (const currency of Object.keys(CurrencyID)) {\r\n    const blockExplorer: BlockExplorerConfiguration = {\r\n      address: process.env[`REACT_APP_${network}_EXPLORER_${currency}_ADDRESS`]!,\r\n      transaction: process.env[`REACT_APP_${network}_EXPLORER_${currency}_TRANSACTION`]!,\r\n    };\r\n\r\n    if (\r\n      blockExplorer.address !== undefined\r\n      && blockExplorer.transaction !== undefined\r\n    ) {\r\n      explorers.set(currency, blockExplorer);\r\n    }\r\n  }\r\n\r\n  return explorers;\r\n};\r\n\r\nconst useBoltzConfiguration = (): BoltzConfiguration => {\r\n  const { network } = React.useContext(NetworkContext);\r\n\r\n  const capitalizeFirstLetter = (input: string) => {\r\n    return input.charAt(0).toUpperCase() + input.slice(1);\r\n  };\r\n\r\n  return {\r\n    apiEndpoint: process.env[`REACT_APP_BOLTZ_${network}_API`]!,\r\n    infuraId: process.env[`REACT_APP_BOLTZ_${network}_INFURA_ID`]!,\r\n\r\n    bitcoinConstants: Networks[`bitcoin${capitalizeFirstLetter(network.toLowerCase())}`],\r\n    litecoinConstants: Networks[`litecoin${capitalizeFirstLetter(network.toLowerCase())}`],\r\n  };\r\n};\r\n\r\nexport { Network, NetworkProvider, useBlockExplorers, useBoltzConfiguration, useNetwork };\r\n","import { Transaction } from 'bitcoinjs-lib';\r\nimport CurrencyID from './currency';\r\n\r\nexport type BoltzSwapResponse = {\r\n  id: string;\r\n  timeoutBlockHeight: number;\r\n  address: string;\r\n  expectedAmount?: number;\r\n  bip21?: string;\r\n  redeemScript?: string;\r\n  invoice?: string;\r\n  lockupAddress?: string;\r\n  error?: string;\r\n  claimAddress?: string;\r\n  onchainAmount?: number;\r\n  refundAddress?: string;\r\n};\r\n\r\nexport type RefundDetails = {\r\n  swapId: string;\r\n  currency: CurrencyID;\r\n  timeoutBlockHeight: number;\r\n  redeemScript: string;\r\n  privateKey: string;\r\n  date: Date;\r\n};\r\n\r\nexport type StatusResponse = {\r\n  status: SwapUpdateEvent;\r\n  failureReason: string;\r\n  transaction?: LockupTransaction;\r\n};\r\n\r\nexport type StatusStep = {\r\n  status: SwapUpdateEvent[];\r\n  initialText?: string;\r\n  textComplete: string;\r\n};\r\n\r\nexport type SwapTransaction = {\r\n  transactionHex: string;\r\n  timeoutBlockHeight: number;\r\n  timeoutEta?: number;\r\n  error?: string;\r\n};\r\n\r\nexport type RefundTransaction = {\r\n  refundTransaction: Transaction;\r\n  lockupTransactionId: string;\r\n};\r\n\r\nexport type FeeResponse = { [key: string]: number };\r\n\r\nexport type ClaimDetails = {\r\n  preImage: Buffer;\r\n  address: string;\r\n  instantSwap: boolean;\r\n  privateKey?: string;\r\n};\r\n\r\nexport type ReverseSwapDetails = ClaimDetails & {\r\n  swapId: string;\r\n  redeemScript: string;\r\n};\r\n\r\nexport enum SwapUpdateEvent {\r\n  InvoicePaid = 'invoice.paid',\r\n  InvoiceSettled = 'invoice.settled',\r\n  InvoiceSet = 'invoice.set',\r\n  InvoiceFailedToPay = 'invoice.failedToPay',\r\n  InvoicePending = 'invoice.pending',\r\n\r\n  TransactionFailed = 'transaction.failed',\r\n  TransactionLockupFailed = 'transaction.lockupFailed',\r\n  TransactionMempool = 'transaction.mempool',\r\n  TransactionClaimed = 'transaction.claimed',\r\n  TransactionRefunded = 'transaction.refunded',\r\n  TransactionConfirmed = 'transaction.confirmed',\r\n\r\n  ChannelCreated = 'channel.created',\r\n\r\n  MinerFeePaid = 'minerfee.paid',\r\n\r\n  SwapExpired = 'swap.expired',\r\n}\r\n\r\nexport const swapSteps: StatusStep[] = [\r\n  {\r\n    status: [SwapUpdateEvent.TransactionMempool],\r\n    initialText: 'Waiting for transaction',\r\n    textComplete: 'Transaction detected in mempool',\r\n  },\r\n  {\r\n    status: [\r\n      SwapUpdateEvent.TransactionConfirmed,\r\n      SwapUpdateEvent.InvoicePending,\r\n      SwapUpdateEvent.ChannelCreated,\r\n    ],\r\n    initialText: 'Waiting for one confirmation',\r\n    textComplete: 'Transaction confirmed',\r\n  },\r\n  {\r\n    status: [SwapUpdateEvent.InvoicePaid],\r\n    initialText: 'Paying your invoice',\r\n    textComplete: 'Invoice paid',\r\n  },\r\n  {\r\n    status: [SwapUpdateEvent.TransactionClaimed],\r\n    initialText: 'Transaction complete',\r\n    textComplete: 'Transaction complete',\r\n  },\r\n];\r\n\r\ntype LockupTransaction = {\r\n  id: string;\r\n  hex: string;\r\n  eta: number;\r\n};\r\n","import is from 'is_js';\r\nimport React from 'react';\r\n\r\ntype Utils = {\r\n  isMobileView?: boolean;\r\n};\r\n\r\nexport const UtilsContext = React.createContext<Utils | null>(null);\r\n\r\nexport const UtilsProvider = ({ children }) => {\r\n  const isMobileView = is.mobile();\r\n\r\n  return (\r\n    <UtilsContext.Provider value={{ isMobileView }}>\r\n      <>{children}</>\r\n    </UtilsContext.Provider>\r\n  );\r\n};\r\n","import { fromFetch } from 'rxjs/fetch';\r\nimport { catchError, map, mergeMap, shareReplay, startWith, switchMap, take } from 'rxjs/operators';\r\nimport BigNumber from 'bignumber.js';\r\nimport { from, interval, Observable, of, Subscription } from 'rxjs';\r\n// import { GET_PAIRS } from '../api/apiUrls';\r\nimport CurrencyID from './currency';\r\nimport { AmountPreview, CurrencyAmount, CurrencyPair, Limits, RatesFetcher, RatesFetcherOpts } from './rates';\r\n\r\ninterface BoltzRatesFetcherOptions extends RatesFetcherOpts {\r\n  url: string;\r\n}\r\n\r\n// Map CurrencyID to the corresponding key from Boltz's API\r\nexport const boltzPairsMap = (currency: CurrencyID) => {\r\n  switch (currency) {\r\n    case CurrencyID.BTC:\r\n      return 'BTC';\r\n    case CurrencyID.LIGHTNING_BTC:\r\n      return 'BTC';\r\n    case CurrencyID.LTC:\r\n      return 'LTC';\r\n    case CurrencyID.LIGHTNING_LTC:\r\n      return 'LTC';\r\n    case CurrencyID.ETH:\r\n      return 'ETH';\r\n    case CurrencyID.ETH_USDT:\r\n      return 'USDT';\r\n    default:\r\n      throw new Error('currency not supported by Boltz API');\r\n  }\r\n};\r\n\r\n// Map CurrencyID to a boolean whether it's on on-chain or off-chain\r\nexport const isCurrencyOnChain = (currency: CurrencyID) => {\r\n  switch (currency) {\r\n    case CurrencyID.BTC:\r\n    case CurrencyID.LTC:\r\n      return true;\r\n    case CurrencyID.ETH:\r\n      return true;\r\n    case CurrencyID.ETH_USDT:\r\n      return true;\r\n    case CurrencyID.LIGHTNING_BTC:\r\n      return false;\r\n    case CurrencyID.LIGHTNING_LTC:\r\n      return false;\r\n    default:\r\n      throw new Error('unsupported CurrencyID - this should not happen');\r\n  }\r\n};\r\n\r\nexport const getAmountOut = (\r\n  { currency: inputCurrency, amount: inputAmount }: CurrencyAmount,\r\n  pair: CurrencyPair,\r\n  rates: BoltzGetRatesResponse,\r\n  fixedSendAmount: boolean,\r\n): AmountPreview => {\r\n  const outputCurrency = pair.filter(currency => currency !== inputCurrency)[0];\r\n  if (!rates) {\r\n    return {\r\n      amountWithFees: {\r\n        amount: new BigNumber('0'),\r\n        currency: outputCurrency,\r\n      },\r\n    };\r\n  }\r\n  const inputCurrencyIsBaseAsset = !!rates.pairs[\r\n    `${boltzPairsMap(inputCurrency)}/${boltzPairsMap(outputCurrency)}`\r\n  ];\r\n  const { rate, fees } = inputCurrencyIsBaseAsset\r\n    ? rates.pairs[\r\n      `${boltzPairsMap(inputCurrency)}/${boltzPairsMap(outputCurrency)}`\r\n    ]\r\n    : rates.pairs[\r\n      `${boltzPairsMap(outputCurrency)}/${boltzPairsMap(inputCurrency)}`\r\n    ];\r\n  // We have 4 paths here now\r\n  // 1. I want to send X quote asset and receive Y base asset\r\n  // 2. I want to send X base asset and receive Y quote asset\r\n  // 3. I want to receive X quote asset and send Y base asset\r\n  // 4. I want to receive X base asset and send ? quote asset\r\n  let outputAmountWithoutFees: BigNumber;\r\n  let minerFees;\r\n  if (\r\n    (fixedSendAmount && inputCurrencyIsBaseAsset)\r\n    || (!fixedSendAmount && inputCurrencyIsBaseAsset)\r\n  ) {\r\n    // send fixed base asset\r\n    // receive fixed base asset\r\n    outputAmountWithoutFees = new BigNumber(rate).multipliedBy(inputAmount);\r\n    // paying fees in quote asset\r\n    minerFees = fees.minerFees.quoteAsset;\r\n  } else {\r\n    // send fixed quote asset\r\n    // receive fixed quote asset\r\n    outputAmountWithoutFees = inputAmount.div(new BigNumber(rate));\r\n    // paying fees in base asset\r\n    minerFees = fees.minerFees.baseAsset;\r\n  }\r\n  const nominalPercentageFee = new BigNumber(fees.percentage)\r\n    .div(new BigNumber('100'))\r\n    .multipliedBy(outputAmountWithoutFees);\r\n  const sendingOnChain = fixedSendAmount\r\n    ? isCurrencyOnChain(inputCurrency)\r\n    : isCurrencyOnChain(outputCurrency);\r\n  const getFixedMinerFees = () => {\r\n    const SATOSHIS_PER_COIN = new BigNumber('10').pow('8');\r\n    if (sendingOnChain) {\r\n      // sending on-chain only includes 1 fee (for Boltz to claim the funds)\r\n      return new BigNumber(minerFees.normal).div(SATOSHIS_PER_COIN);\r\n    }\r\n    // sending off-chain includes 2 fees (claim and lockup)\r\n    return new BigNumber(minerFees.reverse.claim)\r\n      .div(SATOSHIS_PER_COIN)\r\n      .plus(new BigNumber(minerFees.reverse.lockup).div(SATOSHIS_PER_COIN));\r\n  };\r\n  const fixedMinerFee = getFixedMinerFees();\r\n  let outputAmount: BigNumber;\r\n  if (fixedSendAmount) {\r\n    // sending fixed input asset - subtracting fees from output asset\r\n    outputAmount = outputAmountWithoutFees\r\n      .minus(nominalPercentageFee)\r\n      .minus(fixedMinerFee);\r\n  } else {\r\n    // receiving fixed input asset - adding fees to output asset\r\n    outputAmount = outputAmountWithoutFees\r\n      .plus(nominalPercentageFee)\r\n      .plus(fixedMinerFee);\r\n  }\r\n  return {\r\n    amountWithFees: {\r\n      amount: outputAmount,\r\n      currency: outputCurrency,\r\n    },\r\n    // MVP: skipping fee details\r\n    // feesDetail: {},\r\n  };\r\n};\r\n\r\ntype BoltzPair = {\r\n  fees: {\r\n    percentage: number;\r\n    minerFees: {\r\n      baseAsset: {\r\n        normal: number;\r\n        reverse: {\r\n          claim: number;\r\n          lockup: number;\r\n        };\r\n      };\r\n      quoteAsset: {\r\n        normal: number;\r\n        reverse: {\r\n          claim: number;\r\n          lockup: number;\r\n        };\r\n      };\r\n    };\r\n  };\r\n  rate: number;\r\n  limits: {\r\n    maximal: number;\r\n    minimal: number;\r\n    /* TODO: implement later\r\n    maximalZeroConf: {\r\n      baseAsset: number; // number\r\n      quoteAsset: number; // number\r\n    };\r\n  */};\r\n};\r\n\r\nexport type BoltzGetRatesResponse = {\r\n  pairs: Record<string, BoltzPair>;\r\n};\r\n\r\nexport default class BoltzFetcher implements RatesFetcher {\r\n  private rates$: Observable<BoltzGetRatesResponse>;\r\n  private rates$subscription: Subscription;\r\n\r\n  constructor(options: BoltzRatesFetcherOptions) {\r\n    // update rates every 15000ms\r\n    this.rates$ = interval(15000).pipe(\r\n      // emit immediately\r\n      startWith(0),\r\n      mergeMap(() => {\r\n        return fromFetch(options.url).pipe(\r\n          // stop processing the old pairs response when a new one comes in\r\n          switchMap(response => {\r\n            if (response.ok) {\r\n              // OK return data\r\n              return from(response.json());\r\n            }\r\n            console.warn('Response code from Boltz API is not OK');\r\n            return of(null);\r\n          }),\r\n          catchError(err => {\r\n            console.warn('Network or other error from Boltz API', err);\r\n            return of(null);\r\n          }),\r\n          // share the subscription and replay 1 latest events to late subscribers\r\n          shareReplay({ bufferSize: 1, refCount: true }),\r\n        );\r\n      }),\r\n    );\r\n    this.rates$subscription = this.rates$.subscribe(() => {});\r\n  }\r\n\r\n  // PreviewGivenSend wants the sending amount and the currency entered by the user and will return the\r\n  // amount to be received of the opposite currency in the pair, included of fees.\r\n  public previewGivenSend(\r\n    amountWithCurrency: CurrencyAmount,\r\n    pair: CurrencyPair,\r\n  ): Promise<AmountPreview> {\r\n    // get the latest rates event stream\r\n    return this.rates$\r\n      .pipe(\r\n        map(rates => getAmountOut(amountWithCurrency, pair, rates, true)),\r\n        take(1), // take 1 event and unsubscribe so that the promise can complete\r\n      )\r\n      .toPromise();\r\n  }\r\n\r\n  // PreviewGivenReceive wants the receving amount and the currency entered by the user and will return the\r\n  // amount to be sent of the opposite currency in the pair, included of fees.\r\n  public previewGivenReceive(\r\n    amountWithCurrency: CurrencyAmount,\r\n    pair: CurrencyPair,\r\n  ): Promise<AmountPreview> {\r\n    // get the latest rates event stream\r\n    return this.rates$\r\n      .pipe(\r\n        map(rates => getAmountOut(amountWithCurrency, pair, rates, false)),\r\n        take(1), // take 1 event and unsubscribe so that the promise can complete\r\n      )\r\n      .toPromise();\r\n  }\r\n\r\n  // define which trading pair is supported by the fetcher implementation\r\n  public isPairSupported(pair: CurrencyPair): boolean {\r\n    return true;\r\n  }\r\n\r\n  public formatPair = (\r\n    pair: CurrencyPair,\r\n  ): Promise<{ pairId: string; orderSide: string }> => {\r\n    return this.rates$\r\n      .pipe(\r\n        map(rates => {\r\n          const base = boltzPairsMap(pair[0]);\r\n          const quote = boltzPairsMap(pair[1]);\r\n\r\n          const isMirrorPair = rates.pairs[`${base}/${quote}`] === undefined;\r\n\r\n          return {\r\n            pairId: isMirrorPair ? `${quote}/${base}` : `${base}/${quote}`,\r\n            orderSide: isMirrorPair ? 'buy' : 'sell',\r\n          };\r\n        }),\r\n        take(1),\r\n      )\r\n      .toPromise();\r\n  };\r\n\r\n  public getLimits = (pair: CurrencyPair): Promise<Limits> => {\r\n    return this.rates$\r\n      .pipe(\r\n        map(rates => {\r\n          const base = boltzPairsMap(pair[0]);\r\n          const quote = boltzPairsMap(pair[1]);\r\n\r\n          let minimal: BigNumber;\r\n          let maximal: BigNumber;\r\n\r\n          let pairDetails: BoltzPair = rates.pairs[`${base}/${quote}`];\r\n\r\n          if (pairDetails) {\r\n            maximal = new BigNumber(pairDetails.limits.maximal);\r\n            minimal = new BigNumber(pairDetails.limits.minimal);\r\n          } else {\r\n            pairDetails = rates.pairs[`${quote}/${base}`];\r\n\r\n            maximal = new BigNumber(pairDetails.limits.maximal).dividedBy(\r\n              pairDetails.rate,\r\n            );\r\n            minimal = new BigNumber(pairDetails.limits.minimal).dividedBy(\r\n              pairDetails.rate,\r\n            );\r\n          }\r\n\r\n          return {\r\n            minimal: minimal.dividedBy(10 ** 8),\r\n            maximal: maximal.dividedBy(10 ** 8),\r\n          };\r\n        }),\r\n        take(1),\r\n      )\r\n      .toPromise();\r\n  };\r\n\r\n  public clean(): void {\r\n    this.rates$subscription.unsubscribe();\r\n  }\r\n}\r\n","import { mergeMap, tap } from 'rxjs/operators';\r\nimport { address, ECPair, Network, Transaction } from 'bitcoinjs-lib';\r\nimport { constructClaimTransaction, detectSwap } from 'boltz-core';\r\nimport { Observable, of } from 'rxjs';\r\nimport { boltzPairsMap } from '../constants/boltzRates';\r\nimport {\r\n  BoltzSwapResponse,\r\n  ClaimDetails,\r\n  FeeResponse,\r\n  ReverseSwapDetails,\r\n  StatusResponse,\r\n} from '../constants/boltzSwap';\r\nimport CurrencyID from '../constants/currency';\r\nimport { broadcastRefund, getFeeEstimation, getHexBuffer } from './boltzRefund';\r\n\r\nexport const addReverseSwapDetailsToLocalStorage = (\r\n  details: ReverseSwapDetails,\r\n): void => {\r\n  const boltzSwaps = getBoltzReverseSwapsFromLocalStorage();\r\n  boltzSwaps.push(details);\r\n  setBoltzReverseSwapsToLocalStorage(boltzSwaps);\r\n};\r\n\r\nexport const getBoltzReverseSwapsFromLocalStorage = (): ReverseSwapDetails[] => {\r\n  return JSON.parse(localStorage.getItem('boltzReverseSwaps') || '[]');\r\n};\r\n\r\nexport const setBoltzReverseSwapsToLocalStorage = (\r\n  swaps: ReverseSwapDetails[],\r\n): void => {\r\n  localStorage.setItem('boltzReverseSwaps', JSON.stringify(swaps));\r\n};\r\n\r\nexport const claimSwap = (\r\n  claimDetails: ClaimDetails,\r\n  status: StatusResponse,\r\n  swapResponse: BoltzSwapResponse,\r\n  receiveCurrency: CurrencyID,\r\n  network: Network,\r\n  apiEndpoint: string,\r\n  onClaimTransaction: (transaction: Transaction) => void,\r\n): Observable<void> => {\r\n  return getFeeEstimation(apiEndpoint).pipe(\r\n    mergeMap(resp =>\r\n      of(\r\n        getClaimTransaction(\r\n          boltzPairsMap(receiveCurrency),\r\n          claimDetails,\r\n          status,\r\n          swapResponse,\r\n          network,\r\n          resp,\r\n        ),\r\n      )\r\n    ),\r\n    tap(onClaimTransaction),\r\n    mergeMap(claimTransaction => broadcastRefund(receiveCurrency, claimTransaction.toHex(), apiEndpoint)),\r\n  );\r\n};\r\n\r\nconst getClaimTransaction = (\r\n  onchainCurrency: string,\r\n  claimDetails: ClaimDetails,\r\n  statusResponse: StatusResponse,\r\n  swapResponse: BoltzSwapResponse,\r\n  network: Network,\r\n  feeEstimation: FeeResponse,\r\n): Transaction => {\r\n  const redeemScript = getHexBuffer(swapResponse.redeemScript!);\r\n  const lockupTransaction = Transaction.fromHex(\r\n    statusResponse.transaction!.hex,\r\n  );\r\n\r\n  return constructClaimTransaction(\r\n    [\r\n      {\r\n        ...detectSwap(redeemScript, lockupTransaction)!,\r\n        redeemScript,\r\n        txHash: lockupTransaction.getHash(),\r\n        preimage: claimDetails.preImage,\r\n        keys: ECPair.fromPrivateKey(getHexBuffer(claimDetails.privateKey!)),\r\n      },\r\n    ],\r\n    address.toOutputScript(claimDetails.address, network),\r\n    feeEstimation[onchainCurrency],\r\n    false,\r\n  );\r\n};\r\n","import { BOLTZ_STREAM_SWAP_STATUS_API_URL } from '../api/boltzApiUrls';\r\nimport { StatusResponse, swapSteps, SwapUpdateEvent } from '../constants/boltzSwap';\r\n\r\nexport const startListening = (\r\n  swapId: string,\r\n  apiEndpoint: string,\r\n  onMessage: (data: StatusResponse, stream: EventSource) => void,\r\n) => {\r\n  const stream = new EventSource(\r\n    `${BOLTZ_STREAM_SWAP_STATUS_API_URL(apiEndpoint)}?id=${swapId}`,\r\n  );\r\n  stream.onmessage = function(event) {\r\n    const data: StatusResponse = JSON.parse(event.data);\r\n    onMessage(data, stream);\r\n  };\r\n  stream.onerror = event => {\r\n    console.log('error:', event);\r\n    stream?.close();\r\n    setTimeout(() => startListening(swapId, apiEndpoint, onMessage), 2000);\r\n  };\r\n};\r\n\r\nexport const swapError = (status: StatusResponse): string => {\r\n  if (\r\n    swapSteps\r\n      .map(step => step.status)\r\n      .concat([SwapUpdateEvent.InvoiceSet])\r\n      .some(step => step.includes(status.status))\r\n  ) {\r\n    return '';\r\n  }\r\n  if (status.status === SwapUpdateEvent.InvoiceFailedToPay) {\r\n    return 'Failed to pay the invoice. Please refund your coins.';\r\n  }\r\n  if (status.status === SwapUpdateEvent.TransactionLockupFailed) {\r\n    return 'Deposited amount is insufficient. Please refund your coins.';\r\n  }\r\n  if (status.status === SwapUpdateEvent.SwapExpired) {\r\n    return 'Swap expired. Please refund your coins if you transferred any to the provided address.';\r\n  }\r\n  return status.failureReason || 'Error: Unknown status';\r\n};\r\n\r\nexport const isFinal = (\r\n  status: StatusResponse,\r\n  reverse: boolean = false,\r\n  instant: boolean = false,\r\n): boolean => {\r\n  if (!reverse) {\r\n    return (\r\n      SwapUpdateEvent.TransactionClaimed === status.status\r\n      || !!status.failureReason\r\n    );\r\n  }\r\n  return (\r\n    (instant && SwapUpdateEvent.TransactionMempool === status.status)\r\n    || [\r\n      SwapUpdateEvent.TransactionConfirmed,\r\n      SwapUpdateEvent.SwapExpired,\r\n      SwapUpdateEvent.TransactionRefunded,\r\n      SwapUpdateEvent.TransactionFailed,\r\n    ].includes(status.status)\r\n  );\r\n};\r\n","import { useEffect, useState } from 'react';\r\nimport { BOLTZ_GET_PAIRS_API_URL } from '../api/boltzApiUrls';\r\nimport { useBoltzConfiguration } from '../context/NetworkContext';\r\nimport BoltzFetcher from './boltzRates';\r\n\r\nexport default function useBoltzFetcher(): BoltzFetcher | null {\r\n  const [fetcher, setFetcher] = useState<BoltzFetcher | null>(null);\r\n  const { apiEndpoint } = useBoltzConfiguration();\r\n  const url = BOLTZ_GET_PAIRS_API_URL(apiEndpoint);\r\n\r\n  useEffect(() => {\r\n    const boltzFetcher = new BoltzFetcher({\r\n      url,\r\n    });\r\n    setFetcher(boltzFetcher);\r\n    return () => boltzFetcher.clean();\r\n  }, [url]);\r\n\r\n  return fetcher;\r\n}\r\n","import { address } from 'bitcoinjs-lib';\r\n\r\nexport const isAddressValid = (input, network) => {\r\n  const swapAddress = input.trim();\r\n\r\n  if (input !== '') {\r\n    try {\r\n      address.toOutputScript(swapAddress, network);\r\n      return true;\r\n    } catch (error) {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  return false;\r\n};\r\n","export default __webpack_public_path__ + \"static/media/Boltz.c61193c1.svg\";","export default __webpack_public_path__ + \"static/media/Camera.a36fd88a.svg\";","export default __webpack_public_path__ + \"static/media/Cameraclock.b6acfbba.svg\";","export default __webpack_public_path__ + \"static/media/close.12f855c1.svg\";","export default __webpack_public_path__ + \"static/media/comit-logo-black.4f652f36.svg\";","export default __webpack_public_path__ + \"static/media/comit-logo.0328cc4b.svg\";","export default __webpack_public_path__ + \"static/media/Demo.617fe157.svg\";","export default __webpack_public_path__ + \"static/media/external-link.776e16a6.svg\";","export default __webpack_public_path__ + \"static/media/fast.0264c1b6.svg\";","export default __webpack_public_path__ + \"static/media/green-tick.5b178778.svg\";","export default __webpack_public_path__ + \"static/media/hacked.ec2f1feb.svg\";","export default __webpack_public_path__ + \"static/media/hamburger.de80e93f.svg\";","export default __webpack_public_path__ + \"static/media/Homepage.b7ae0e06.svg\";","export default __webpack_public_path__ + \"static/media/left-arrow.2feea2ae.svg\";","export default __webpack_public_path__ + \"static/media/media.7ad4ed6d.svg\";","export default __webpack_public_path__ + \"static/media/medium.1161de90.svg\";","export default __webpack_public_path__ + \"static/media/sawp.4e320fa1.svg\";","export default __webpack_public_path__ + \"static/media/Oval.b493606f.svg\";","export default __webpack_public_path__ + \"static/media/question-icon.bb33ebf0.svg\";","export default __webpack_public_path__ + \"static/media/right-arrow-white.aba1fd29.svg\";","export default __webpack_public_path__ + \"static/media/right-arrow.3357235f.svg\";","export default __webpack_public_path__ + \"static/media/safe.13a9170e.svg\";","export default __webpack_public_path__ + \"static/media/Shape.2b8977ad.svg\";","export default __webpack_public_path__ + \"static/media/snap.cf3d71cc.svg\";","export default __webpack_public_path__ + \"static/media/success.d32dcc35.svg\";","export default __webpack_public_path__ + \"static/media/swap.0fc0cd4c.svg\";","export default __webpack_public_path__ + \"static/media/tdex-logo.38d34c6d.svg\";","import boltz from '../assets/images/Boltz.svg';\r\nimport camera from '../assets/images/Camera.svg';\r\nimport clock from '../assets/images/Cameraclock.svg';\r\nimport close from '../assets/images/close.svg';\r\nimport comitLogoBlack from '../assets/images/comit-logo-black.svg';\r\nimport comitLogo from '../assets/images/comit-logo.svg';\r\nimport demo from '../assets/images/Demo.svg';\r\nimport externalLinkIcon from '../assets/images/external-link.svg';\r\nimport fast from '../assets/images/fast.svg';\r\nimport greenTick from '../assets/images/green-tick.svg';\r\nimport hacked from '../assets/images/hacked.svg';\r\nimport hamburger from '../assets/images/hamburger.svg';\r\nimport homepagemin from '../assets/images/Homepage-min.png';\r\nimport homepage from '../assets/images/Homepage.svg';\r\nimport leftArrow from '../assets/images/left-arrow.svg';\r\nimport media from '../assets/images/media.svg';\r\nimport medium from '../assets/images/medium.svg';\r\nimport opendex from '../assets/images/sawp.svg';\r\nimport oval from '../assets/images/Oval.svg';\r\nimport questionIcon from '../assets/images/question-icon.svg';\r\nimport rightArrow from '../assets/images/right-arrow-white.svg';\r\nimport rightArrowPlain from '../assets/images/right-arrow.svg';\r\nimport safe from '../assets/images/safe.svg';\r\nimport logo from '../assets/images/Shape.svg';\r\nimport snap from '../assets/images/snap.svg';\r\nimport success from '../assets/images/success.svg';\r\nimport swap from '../assets/images/swap.svg';\r\nimport tdexLogo from '../assets/images/tdex-logo.svg';\r\nimport twitter from '../assets/images/twitter.svg';\r\n\r\nexport default {\r\n  leftArrow,\r\n  rightArrowPlain,\r\n  rightArrow,\r\n  camera,\r\n  greenTick,\r\n  swap,\r\n  snap,\r\n  clock,\r\n  logo,\r\n  boltz,\r\n  opendex,\r\n  fast,\r\n  safe,\r\n  hacked,\r\n  medium,\r\n  media,\r\n  twitter,\r\n  demo,\r\n  homepage,\r\n  homepagemin,\r\n  oval,\r\n  close,\r\n  hamburger,\r\n  questionIcon,\r\n  externalLinkIcon,\r\n  comitLogo,\r\n  comitLogoBlack,\r\n  tdexLogo,\r\n  success,\r\n};\r\n","export default __webpack_public_path__ + \"static/media/twitter.e7e7fedd.svg\";","export default \"data:image/png;base64,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\"","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\r\nimport { FundTransferType, fundTransferTypes } from '../constants/currency';\r\nimport { RootState } from './index';\r\n\r\ninterface BoltzState {\r\n  unit: SelectedFundTransferType;\r\n  ethereumData: any;\r\n}\r\n\r\ntype SelectedFundTransferType = {\r\n  [key: string]: FundTransferType;\r\n};\r\n\r\nconst defaultUnitValues = Object.fromEntries(\r\n  Object.entries(fundTransferTypes).map(([key, val]) => [\r\n    key,\r\n    val.find(val => val.value === '2'),\r\n  ]),\r\n);\r\n\r\nexport const initialState: BoltzState = {\r\n  unit: {\r\n    ...defaultUnitValues,\r\n    ...JSON.parse(localStorage.getItem('boltzUnits') || '{}'),\r\n  },\r\n  ethereumData: undefined,\r\n};\r\n\r\nexport const swapsSlice = createSlice({\r\n  name: 'boltz',\r\n  initialState,\r\n  reducers: {\r\n    setUnit: (state, action: PayloadAction<SelectedFundTransferType>) => {\r\n      state.unit = { ...state.unit, ...action.payload };\r\n      localStorage.setItem('boltzUnits', JSON.stringify(state.unit));\r\n    },\r\n    setEthereumData: (state, action: PayloadAction<any>) => {\r\n      state.ethereumData = action.payload;\r\n    },\r\n  },\r\n});\r\n\r\nexport const { setUnit, setEthereumData } = swapsSlice.actions;\r\n\r\nexport const selectUnit = (state: RootState) => state.boltz.unit;\r\nexport const selectEthereumData = (state: RootState) => state.boltz.ethereumData;\r\n\r\nexport default swapsSlice.reducer;\r\n","import { TypedUseSelectorHook, useDispatch, useSelector } from 'react-redux';\r\nimport { AppDispatch, RootState } from './index';\r\n\r\n// Use throughout your app instead of plain `useDispatch` and `useSelector`\r\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\r\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;\r\n","import WalletConnectProvider from '@walletconnect/web3-provider';\r\nimport Web3Modal, { IProviderOptions } from 'web3modal';\r\n\r\nexport const createWeb3Modal = async (\r\n  ethereumNetworkName: string,\r\n  infuraId: string,\r\n) => {\r\n  const providerOptions: IProviderOptions = {};\r\n\r\n  // If the backend sets a network name, it is a public one on which WalletConnect can be used\r\n  if (ethereumNetworkName !== undefined) {\r\n    providerOptions.walletconnect = {\r\n      package: WalletConnectProvider,\r\n      options: {\r\n        infuraId,\r\n      },\r\n    };\r\n  }\r\n\r\n  return new Web3Modal({\r\n    providerOptions,\r\n    cacheProvider: true,\r\n    theme: 'dark',\r\n    network: ethereumNetworkName,\r\n  });\r\n};\r\n","import {\r\n  Button as MuiButton,\r\n  ButtonProps as MuiButtonProps,\r\n  CircularProgress,\r\n  FormControl,\r\n  makeStyles,\r\n} from '@material-ui/core';\r\nimport React, { ReactElement } from 'react';\r\n\r\nexport type ButtonProps = MuiButtonProps & {\r\n  loading?: boolean;\r\n};\r\n\r\nconst isDefaultColor = (props: ButtonProps): boolean => !props.color || props.color === 'default';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  button: (props: ButtonProps) => ({\r\n    borderRadius: 0,\r\n    backgroundColor: isDefaultColor(props) && props.variant === 'contained'\r\n      ? 'rgb(0, 110, 255)'\r\n      : undefined,\r\n    '&:hover': {\r\n      backgroundColor: isDefaultColor(props)\r\n        ? 'rgb(98, 0, 255)'\r\n        : undefined,\r\n    },\r\n    color: isDefaultColor(props) ? theme.palette.text.primary : undefined,\r\n  }),\r\n  buttonWrapper: {\r\n    position: 'relative',\r\n  },\r\n  buttonProgress: {\r\n    position: 'absolute',\r\n    top: '50%',\r\n    left: '50%',\r\n    marginTop: -12,\r\n    marginLeft: -12,\r\n  },\r\n}));\r\n\r\nconst Button = (props: ButtonProps): ReactElement => {\r\n  const { className, loading, ...muiButtonProps } = props;\r\n  const classes = useStyles(props);\r\n  const buttonClass = `${classes.button} ${className}`;\r\n\r\n  return (\r\n    <FormControl fullWidth={muiButtonProps.fullWidth}>\r\n      <div className={classes.buttonWrapper}>\r\n        <MuiButton\r\n          disableElevation\r\n          className={buttonClass}\r\n          {...muiButtonProps}\r\n        />\r\n        {loading && (\r\n          <CircularProgress size={24} className={classes.buttonProgress} />\r\n        )}\r\n      </div>\r\n    </FormControl>\r\n  );\r\n};\r\n\r\nexport default Button;\r\n","import { createStyles, Grid, makeStyles } from '@material-ui/core';\r\nimport jazzicon from '@metamask/jazzicon';\r\nimport axios from 'axios';\r\nimport { providers, Signer } from 'ethers';\r\nimport React, { ReactElement, useEffect, useState } from 'react';\r\nimport { useCallback } from 'react';\r\nimport Web3Modal from 'web3modal';\r\nimport { BOLTZ_GET_CONTRACTS_API_URL } from '../../../api/boltzApiUrls';\r\nimport { useBoltzConfiguration } from '../../../context/NetworkContext';\r\nimport { selectEthereumData, setEthereumData } from '../../../store/boltz-slice';\r\nimport { useAppDispatch, useAppSelector } from '../../../store/hooks';\r\nimport { createWeb3Modal } from '../../../utils/web3modal';\r\nimport Button from '../../Button';\r\n\r\nconst useStyles = makeStyles(() =>\r\n  createStyles({\r\n    buttonsContainer: {\r\n      marginTop: '1rem',\r\n    },\r\n  })\r\n);\r\n\r\nconst removeChildren = (parent: HTMLElement) => {\r\n  while (parent.lastChild) {\r\n    parent.removeChild(parent.lastChild);\r\n  }\r\n};\r\n\r\nconst Identicon = (props: { address: string }) => {\r\n  return (\r\n    <div\r\n      id={'jazzicon'}\r\n      ref={ref => {\r\n        if (ref !== null) {\r\n          removeChildren(ref);\r\n          ref.appendChild(\r\n            jazzicon(40, parseInt(props.address.slice(2, 10), 16)),\r\n          );\r\n        }\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nconst BoltzEthereumAccount = (props: {\r\n  setError: React.Dispatch<React.SetStateAction<string>>;\r\n  setSigner: React.Dispatch<React.SetStateAction<Signer | undefined>>;\r\n  setWrongChain: (value: boolean) => void;\r\n  additionalButton?: ReactElement;\r\n}) => {\r\n  const { setError, setSigner, setWrongChain } = props;\r\n\r\n  const dispatch = useAppDispatch();\r\n  const ethereumData = useAppSelector(selectEthereumData);\r\n\r\n  const { apiEndpoint, infuraId } = useBoltzConfiguration();\r\n\r\n  const [provider, setProvider] = useState<any>(undefined);\r\n  const [web3Modal, setWeb3Modal] = useState<Web3Modal | undefined>(undefined);\r\n\r\n  const [signerAddress, setSignerAddress] = useState<string | undefined>(undefined);\r\n\r\n  const classes = useStyles();\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      const ethereumData = (\r\n        await axios.get(BOLTZ_GET_CONTRACTS_API_URL(apiEndpoint))\r\n      ).data.ethereum;\r\n      dispatch(setEthereumData(ethereumData));\r\n\r\n      const web3Modal = await createWeb3Modal(\r\n        ethereumData.network.name,\r\n        infuraId,\r\n      );\r\n\r\n      if (web3Modal.cachedProvider) {\r\n        const web3modalProvider = await web3Modal.connect();\r\n        setProvider(web3modalProvider);\r\n\r\n        const ethersProvider = new providers.Web3Provider(web3modalProvider);\r\n        const signer = ethersProvider.getSigner();\r\n\r\n        setSignerAddress(await signer.getAddress());\r\n        setSigner(signer);\r\n      }\r\n\r\n      setWeb3Modal(web3Modal);\r\n    })();\r\n  }, [infuraId, apiEndpoint, dispatch, setSigner]);\r\n\r\n  const setNetworkError = useCallback(() => {\r\n    const wantedNetwork = ethereumData.network.name\r\n      || `with id ${ethereumData.network.chainId}`;\r\n    setError(`Ethereum wallet is not on network ${wantedNetwork}`);\r\n    setWrongChain(true);\r\n  }, [ethereumData, setError, setWrongChain]);\r\n\r\n  useEffect(() => {\r\n    if (!provider) {\r\n      return;\r\n    }\r\n\r\n    provider.on('accountsChanged', async (accounts: string[]) => {\r\n      if (accounts.length > 0) {\r\n        const ethersProvider = new providers.Web3Provider(provider);\r\n        const signer = ethersProvider.getSigner();\r\n\r\n        setSignerAddress(await signer.getAddress());\r\n        setSigner(signer);\r\n      } else {\r\n        setSignerAddress(undefined);\r\n        setSigner(undefined);\r\n      }\r\n    });\r\n\r\n    provider.on('chainChanged', async () => {\r\n      const ethersProvider = new providers.Web3Provider(provider);\r\n      const signer = ethersProvider.getSigner();\r\n      const signerChainId = await signer.getChainId();\r\n      if (signerChainId === ethereumData.network.chainId) {\r\n        setError('');\r\n        setWrongChain(false);\r\n      } else {\r\n        setNetworkError();\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      provider.removeAllListeners();\r\n    };\r\n  }, [provider, ethereumData, setSigner, setError, setNetworkError, setWrongChain]);\r\n\r\n  const showWeb3Modal = async () => {\r\n    try {\r\n      setError('');\r\n      setWrongChain(false);\r\n      setSigner(undefined);\r\n      setSignerAddress(undefined);\r\n      web3Modal!.clearCachedProvider();\r\n\r\n      const web3modalProvider = await web3Modal!.connect();\r\n      const ethersProvider = new providers.Web3Provider(web3modalProvider);\r\n\r\n      setProvider(web3modalProvider);\r\n      const signer = ethersProvider.getSigner();\r\n\r\n      if ((await signer.getChainId()) === ethereumData.network.chainId) {\r\n        setSignerAddress(await signer.getAddress());\r\n        setSigner(signer);\r\n      } else {\r\n        setNetworkError();\r\n      }\r\n    } catch (e) {} // life is short, yolo\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {signerAddress === undefined\r\n        ? (\r\n          <div>\r\n            {!!web3Modal && (\r\n              <Button\r\n                variant='outlined'\r\n                color='primary'\r\n                onClick={showWeb3Modal}\r\n              >\r\n                Connect Ethereum wallet\r\n              </Button>\r\n            )}\r\n          </div>\r\n        )\r\n        : (\r\n          <Grid\r\n            item\r\n            container\r\n            justify='center'\r\n            alignItems='center'\r\n            direction='column'\r\n          >\r\n            {\r\n              // TODO: monospace signer address?\r\n              // TODO: only show first 6 and last 4 digits of signer? (easier to double check address?)\r\n            }\r\n            <Grid\r\n              item\r\n              container\r\n              justify='center'\r\n              alignItems='center'\r\n              spacing={1}\r\n            >\r\n              <Grid item>\r\n                <Identicon address={signerAddress!} />\r\n              </Grid>\r\n              <Grid item>Connected to {signerAddress}</Grid>\r\n            </Grid>\r\n\r\n            <Grid item container justify='center' spacing={1} className={classes.buttonsContainer}>\r\n              {!!props.additionalButton && <Grid item>{props.additionalButton}</Grid>}\r\n              <Grid item>\r\n                <Button\r\n                  color='primary'\r\n                  variant='outlined'\r\n                  onClick={showWeb3Modal}\r\n                >\r\n                  Change\r\n                </Button>\r\n              </Grid>\r\n            </Grid>\r\n          </Grid>\r\n        )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default BoltzEthereumAccount;\r\n","import { createStyles, makeStyles, Typography } from '@material-ui/core';\r\nimport React, { ReactElement } from 'react';\r\n\r\nexport type ErrorMessageProps = {\r\n  message: string;\r\n  className?: string;\r\n};\r\n\r\nconst useStyles = makeStyles(() =>\r\n  createStyles({\r\n    root: {\r\n      fontFamily: 'ApercuProRegular',\r\n    },\r\n  })\r\n);\r\n\r\nconst ErrorMessage = (props: ErrorMessageProps): ReactElement => {\r\n  const { message, className } = props;\r\n  const classes = useStyles();\r\n\r\n  const rootClass = `${classes.root} ${className}`;\r\n\r\n  return (\r\n    <Typography color='error' align='center' className={rootClass}>\r\n      {message}\r\n    </Typography>\r\n  );\r\n};\r\n\r\nexport default ErrorMessage;\r\n","import { createStyles, Grid, makeStyles, Typography } from '@material-ui/core';\r\nimport React, { ReactElement } from 'react';\r\nimport Button from '../../../Button';\r\nimport ErrorMessage from '../../../ErrorMessage';\r\n\r\ntype BoltzSwapStepProps = {\r\n  content: ReactElement;\r\n  title: string | ReactElement;\r\n  errorMessage?: string;\r\n  mainButtonText?: string;\r\n  mainButtonVisible?: boolean;\r\n  mainButtonDisabled?: boolean;\r\n  mainButtonLoading?: boolean;\r\n  onMainButtonClick?: (event?: any) => void;\r\n};\r\n\r\nconst useStyles = makeStyles(() =>\r\n  createStyles({\r\n    content: {\r\n      padding: '2rem',\r\n      flex: 1,\r\n      justifyContent: 'space-between',\r\n    },\r\n    title: {\r\n      marginBottom: '1rem',\r\n      fontSize: '1.5rem',\r\n      lineHeight: 'normal',\r\n      letterSpacing: '1px',\r\n      width: '100%',\r\n    },\r\n    errorMessage: {\r\n      marginBottom: '1rem',\r\n    },\r\n  })\r\n);\r\n\r\nconst BoltzSwapStep = (props: BoltzSwapStepProps): ReactElement => {\r\n  const classes = useStyles();\r\n  const {\r\n    content,\r\n    title,\r\n    errorMessage,\r\n    mainButtonText,\r\n    mainButtonVisible,\r\n    mainButtonDisabled,\r\n    mainButtonLoading,\r\n    onMainButtonClick,\r\n  } = props;\r\n\r\n  return (\r\n    <>\r\n      <Grid\r\n        container\r\n        className={classes.content}\r\n        justify='flex-start'\r\n        direction='column'\r\n        alignItems='center'\r\n      >\r\n        <Typography className={classes.title} component='h2' align='center'>\r\n          {title}\r\n        </Typography>\r\n        {content}\r\n        <span />\r\n      </Grid>\r\n      {!!errorMessage && (\r\n        <ErrorMessage message={errorMessage} className={classes.errorMessage} />\r\n      )}\r\n      {mainButtonVisible && (\r\n        <Button\r\n          fullWidth\r\n          variant='contained'\r\n          color='primary'\r\n          loading={mainButtonLoading}\r\n          disabled={mainButtonDisabled || mainButtonLoading}\r\n          onClick={onMainButtonClick}\r\n        >\r\n          {mainButtonText}\r\n        </Button>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default BoltzSwapStep;\r\n","import { createStyles, FormControlLabel, Grid, makeStyles, Switch, TextField, Tooltip } from '@material-ui/core';\r\nimport BigNumber from 'bignumber.js';\r\nimport { crypto } from 'bitcoinjs-lib';\r\nimport { Signer } from 'ethers';\r\nimport React, { ReactElement, useEffect, useMemo, useState } from 'react';\r\nimport { BOLTZ_CREATE_SWAP_API_URL } from '../../../../api/boltzApiUrls';\r\nimport useBoltzFetcher from '../../../../constants/boltzFetcherHook';\r\nimport { BoltzSwapResponse, ClaimDetails } from '../../../../constants/boltzSwap';\r\nimport CurrencyID from '../../../../constants/currency';\r\nimport { useBoltzConfiguration } from '../../../../context/NetworkContext';\r\nimport { SwapFlowProps } from '../../../../pages/home';\r\nimport { isAddressValid } from '../../../../services/reverse/addressValidation';\r\nimport { generateKeys, getHexString } from '../../../../services/submarine/keys';\r\nimport { randomBytes } from '../../../../services/submarine/randomBytes';\r\nimport svgIcons from '../../../../utils/svgIcons';\r\nimport BoltzEthereumAccount from '../BoltzEthereumAccount';\r\nimport BoltzSwapStep from '../BoltzSwapStep';\r\n\r\ntype BoltzReverseDestinationProps = SwapFlowProps & {\r\n  proceedToNext: (\r\n    swapDetails: BoltzSwapResponse,\r\n    claimDetails: ClaimDetails,\r\n    signer?: Signer,\r\n  ) => void;\r\n};\r\n\r\nconst useStyles = makeStyles(() =>\r\n  createStyles({\r\n    input: {\r\n      borderRadius: 0,\r\n      alignItems: 'start',\r\n    },\r\n    instant: {\r\n      marginTop: '1rem',\r\n      '& .MuiFormControlLabel-label': {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n      },\r\n    },\r\n    instantHint: {\r\n      height: '1.25rem',\r\n      marginLeft: '0.5rem',\r\n    },\r\n  })\r\n);\r\n\r\nconst BoltzReverseDestination = (\r\n  props: BoltzReverseDestinationProps,\r\n): ReactElement => {\r\n  const { sendAsset, receiveAsset, sendAmount, proceedToNext } = props;\r\n  const classes = useStyles();\r\n  const { apiEndpoint, bitcoinConstants, litecoinConstants } = useBoltzConfiguration();\r\n  const boltzRates = useBoltzFetcher();\r\n  const [address, setAddrerss] = useState('');\r\n  const [instant, setInstant] = useState(true);\r\n  const [wrongChain, setWrongChain] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [signer, setSigner] = useState<Signer | undefined>(undefined);\r\n  const [keys, setKeys] = useState<{ publicKey?: string; privateKey?: string }>(\r\n    {},\r\n  );\r\n  const network = useMemo(\r\n    () =>\r\n      receiveAsset === CurrencyID.BTC\r\n        ? bitcoinConstants\r\n        : litecoinConstants,\r\n    [bitcoinConstants, litecoinConstants, receiveAsset],\r\n  );\r\n\r\n  const isUtxoChain = receiveAsset === CurrencyID.BTC || receiveAsset === CurrencyID.LTC;\r\n\r\n  const placeholder = `${receiveAsset} receiving address`;\r\n\r\n  useEffect(() => {\r\n    if (isUtxoChain) {\r\n      setKeys(generateKeys(network));\r\n    }\r\n  }, [network, isUtxoChain]);\r\n\r\n  const createSwap = async () => {\r\n    const formattedPairs = await boltzRates!.formatPair([\r\n      sendAsset,\r\n      receiveAsset,\r\n    ]);\r\n    const preImage = randomBytes(32);\r\n    const params = {\r\n      ...formattedPairs,\r\n      type: 'reverseSubmarine',\r\n      claimPublicKey: keys.publicKey,\r\n      preimageHash: getHexString(crypto.sha256(preImage)),\r\n      invoiceAmount: new BigNumber(sendAmount).multipliedBy(10 ** 8).toNumber(),\r\n      claimAddress: signer !== undefined ? await signer.getAddress() : undefined,\r\n    };\r\n\r\n    const claimDetails: ClaimDetails = {\r\n      preImage: preImage,\r\n      address: address,\r\n      instantSwap: instant,\r\n      privateKey: keys.privateKey,\r\n    };\r\n\r\n    const errorMessage = 'Something went wrong. Please try again.';\r\n    setLoading(true);\r\n\r\n    try {\r\n      const response = await fetch(BOLTZ_CREATE_SWAP_API_URL(apiEndpoint), {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json;charset=utf-8',\r\n        },\r\n        body: JSON.stringify(params),\r\n      });\r\n\r\n      const data: BoltzSwapResponse = await response.json();\r\n      setLoading(false);\r\n\r\n      if (response.status === 201) {\r\n        setError('');\r\n        proceedToNext(data, claimDetails, signer);\r\n      } else {\r\n        const message = data.error || errorMessage;\r\n        setError(message);\r\n      }\r\n    } catch (_) {\r\n      setError(errorMessage);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const addressInvalid = !!address && !isAddressValid(address, network);\r\n\r\n  return receiveAsset === CurrencyID.BTC || receiveAsset === CurrencyID.LTC\r\n    ? (\r\n      <BoltzSwapStep\r\n        title={<>\r\n          Paste a {receiveAsset} address you'd like to receive the funds on\r\n        </>}\r\n        content={<Grid item container justify='center'>\r\n          <TextField\r\n            multiline\r\n            fullWidth\r\n            variant='outlined'\r\n            aria-label={'receive-address'}\r\n            rows={3}\r\n            placeholder={placeholder}\r\n            value={address}\r\n            onChange={e => {\r\n              setAddrerss(e.target.value);\r\n              setError('');\r\n            }}\r\n            InputProps={{\r\n              className: classes.input,\r\n            }}\r\n            error={addressInvalid}\r\n            helperText={addressInvalid && 'Invalid address'}\r\n          />\r\n          <FormControlLabel\r\n            control={<Switch\r\n              checked={instant}\r\n              onChange={() => setInstant(oldValue => !oldValue)}\r\n              name='instantSwap'\r\n              color='primary'\r\n            />}\r\n            className={classes.instant}\r\n            label={<>\r\n              Swap instantly\r\n              <Tooltip\r\n                title='Enabling swap instantly means you agree to accept a 0-conf transaction from Boltz, which results in an instant swap.'\r\n              >\r\n                <img\r\n                  className={classes.instantHint}\r\n                  src={svgIcons.questionIcon}\r\n                  alt='hint'\r\n                />\r\n              </Tooltip>\r\n            </>}\r\n          />\r\n        </Grid>}\r\n        errorMessage={error}\r\n        mainButtonText='Next'\r\n        mainButtonVisible\r\n        onMainButtonClick={createSwap}\r\n        mainButtonDisabled={!address || !isAddressValid(address, network)}\r\n        mainButtonLoading={loading}\r\n      />\r\n    )\r\n    : (\r\n      <BoltzSwapStep\r\n        title={<>\r\n          Connect an Ethereum wallet with which you'd like to swap {receiveAsset}\r\n        </>}\r\n        content={<BoltzEthereumAccount\r\n          setWrongChain={setWrongChain}\r\n          setError={setError}\r\n          setSigner={setSigner}\r\n        />}\r\n        errorMessage={error}\r\n        mainButtonText='Next'\r\n        mainButtonVisible\r\n        onMainButtonClick={createSwap}\r\n        mainButtonDisabled={signer === undefined || wrongChain}\r\n        mainButtonLoading={loading}\r\n      />\r\n    );\r\n};\r\n\r\nexport default BoltzReverseDestination;\r\n","const diffCalculator = (diffInMilliSeconds, secondsFormat = false) => {\r\n  const originalDifference = diffInMilliSeconds;\r\n  // calculate days\r\n  const days = Math.floor(diffInMilliSeconds / 86400);\r\n  diffInMilliSeconds -= days * 86400;\r\n\r\n  // calculate hours\r\n  const hours = Math.floor(diffInMilliSeconds / 3600) % 24;\r\n  diffInMilliSeconds -= hours * 3600;\r\n\r\n  // calculate minutes\r\n  const eta = Math.floor(originalDifference / 60);\r\n  const minutes = Math.floor(diffInMilliSeconds / 60) % 60;\r\n  diffInMilliSeconds -= minutes * 60;\r\n\r\n  const seconds = diffInMilliSeconds;\r\n\r\n  let difference = '';\r\n  if (days > 0) {\r\n    difference += days === 1 ? `${days} day, ` : `${days} days, `;\r\n  }\r\n\r\n  difference += hours === 0 ? '' : hours === 1 ? `${hours} hour, ` : `${hours} hours, `;\r\n\r\n  difference += minutes === 0 || hours === 1 ? `${minutes} minutes` : `${minutes} minutes`;\r\n\r\n  return {\r\n    value: eta,\r\n    label: secondsFormat\r\n      ? `${minutes}:${('0' + seconds).slice(-2)}`\r\n      : difference,\r\n  };\r\n};\r\n\r\nexport const getETALabelWithSeconds = eta => {\r\n  return diffCalculator(eta, true);\r\n};\r\n\r\nexport const getETALabel = eta => {\r\n  return diffCalculator(eta * 60);\r\n};\r\n\r\nexport function timeDiffCalc(dateFuture, dateNow) {\r\n  let diffInMilliSeconds = (dateFuture - dateNow) / 1000;\r\n\r\n  return diffCalculator(diffInMilliSeconds);\r\n}\r\n\r\n// console.log(timeDiffCalc(new Date('2019/10/4 04:10:00'), new Date('2019/10/2 18:20:00')));\r\n\r\n// the time difference is:\r\n// 1 day, 9 hours, 50 minutes\r\n","import { PopulatedTransaction, Signer } from 'ethers';\r\n\r\nexport const sendEthereumTransaction = async (\r\n  signer: Signer,\r\n  populatedTransaction: PopulatedTransaction,\r\n) => {\r\n  try {\r\n    const gasEstimate = await signer.provider!.estimateGas(\r\n      {\r\n        ...populatedTransaction,\r\n        from: await signer.getAddress(),\r\n      },\r\n    );\r\n\r\n    return await signer.sendTransaction({\r\n      ...populatedTransaction,\r\n      gasLimit: gasEstimate.add(gasEstimate.div(5)),\r\n    });\r\n  } catch (error) {\r\n    if (error.data && error.data.message) {\r\n      throw error.data.message;\r\n    } else if (error.message) {\r\n      throw error.message;\r\n    } else {\r\n      throw error;\r\n    }\r\n  }\r\n};\r\n","import bolt11, { RoutingInfo } from '@boltz/bolt11';\r\n\r\nexport const decodeInvoice = (invoice: string) => {\r\n  const decoded = bolt11.decode(invoice);\r\n\r\n  let payment_hash: string | undefined;\r\n  let routing_info: RoutingInfo | undefined;\r\n\r\n  for (const tag of decoded.tags) {\r\n    switch (tag.tagName) {\r\n      case 'payment_hash':\r\n        payment_hash = tag.data as string;\r\n        break;\r\n\r\n      case 'routing_info':\r\n        routing_info = tag.data as RoutingInfo;\r\n        break;\r\n\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  return {\r\n    ...decoded,\r\n    paymentHash: payment_hash,\r\n    routingInfo: routing_info,\r\n    satoshis: decoded.satoshis || 0,\r\n  };\r\n};\r\n\r\nconst getUnixTime = () => {\r\n  return Math.round(new Date().getTime() / 1000);\r\n};\r\n\r\nexport const timeUntilExpiry = (invoice?: string) => {\r\n  if (!invoice) {\r\n    return 0;\r\n  }\r\n  const decoded = bolt11.decode(invoice);\r\n\r\n  let invoiceExpiry = decoded.timestamp || 0;\r\n\r\n  if (decoded.timeExpireDate) {\r\n    invoiceExpiry = decoded.timeExpireDate;\r\n  } else {\r\n    // Default invoice timeout\r\n    // Reference: https://github.com/lightningnetwork/lightning-rfc/blob/master/11-payment-encoding.md#tagged-fields\r\n    invoiceExpiry += 3600;\r\n  }\r\n\r\n  return invoiceExpiry - getUnixTime();\r\n};\r\n","import { BigNumber } from 'ethers';\r\n\r\n/**\r\n * Formats the token amount to send from 10 ** -8 decimals\r\n */\r\nexport const formatTokenAmount = (\r\n  decimals: number,\r\n  amount: number,\r\n): BigNumber => {\r\n  const amountBn = BigNumber.from(amount);\r\n\r\n  if (decimals === 8) {\r\n    return amountBn;\r\n  } else {\r\n    const exponent = BigNumber.from(10).pow(\r\n      BigNumber.from(Math.abs(decimals - 8)),\r\n    );\r\n\r\n    if (decimals > 8) {\r\n      return amountBn.mul(exponent);\r\n    } else {\r\n      return amountBn.div(exponent);\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * Normalizes the token balance to 10 ** -8 decimals\r\n */\r\nexport const normalizeTokenAmount = (decimals: number, amount: BigNumber) => {\r\n  if (decimals === 8) {\r\n    return amount;\r\n  } else {\r\n    const exponent = BigNumber.from(10).pow(\r\n      BigNumber.from(Math.abs(decimals - 8)),\r\n    );\r\n\r\n    if (decimals > 8) {\r\n      return amount.div(exponent);\r\n    } else {\r\n      return amount.mul(exponent);\r\n    }\r\n  }\r\n};\r\n","import PropTypes from 'prop-types';\r\nimport Qrious from 'qrious';\r\nimport React from 'react';\r\n\r\nclass QrCode extends React.Component {\r\n  id = '';\r\n\r\n  drawQrCode = () => {\r\n    if (this.id !== '') {\r\n      const { size, link } = this.props;\r\n      const element = document.getElementById(this.id);\r\n\r\n      this.qr = new Qrious({\r\n        element,\r\n      });\r\n\r\n      this.qr.set({\r\n        size,\r\n        level: 'H',\r\n        value: link,\r\n        background: 'white',\r\n        foreground: 'black',\r\n        backgroundAlpha: 1,\r\n        foregroundAlpha: 1,\r\n      });\r\n    }\r\n  };\r\n\r\n  componentDidUpdate() {\r\n    this.drawQrCode();\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.drawQrCode();\r\n  }\r\n\r\n  render() {\r\n    const { link } = this.props;\r\n\r\n    if (link) {\r\n      this.id = `qr-${link.substring(0, 4)}`;\r\n\r\n      return <canvas id={this.id} />;\r\n    } else {\r\n      return <div />;\r\n    }\r\n  }\r\n}\r\n\r\nQrCode.propTypes = {\r\n  size: PropTypes.number.isRequired,\r\n  link: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default QrCode;\r\n","import { createStyles, Grid, Link, makeStyles, TextField, Tooltip, Typography } from '@material-ui/core';\r\nimport { ContractABIs } from 'boltz-core';\r\nimport { Contract, Signer } from 'ethers';\r\nimport { ReactElement, useEffect, useMemo, useState } from 'react';\r\nimport { boltzPairsMap } from '../../../../constants/boltzRates';\r\nimport { BoltzSwapResponse, ClaimDetails, StatusResponse, SwapUpdateEvent } from '../../../../constants/boltzSwap';\r\nimport CurrencyID from '../../../../constants/currency';\r\nimport { useBlockExplorers } from '../../../../context/NetworkContext';\r\nimport { SwapFlowProps } from '../../../../pages/home';\r\nimport { getETALabelWithSeconds } from '../../../../services/refund/timestamp';\r\nimport { getHexString } from '../../../../services/submarine/keys';\r\nimport { selectEthereumData } from '../../../../store/boltz-slice';\r\nimport { useAppSelector } from '../../../../store/hooks';\r\nimport { sendEthereumTransaction } from '../../../../utils/ethereumTransactionWrapper';\r\nimport { timeUntilExpiry } from '../../../../utils/invoiceDecoder';\r\nimport svgIcons from '../../../../utils/svgIcons';\r\nimport { formatTokenAmount } from '../../../../utils/tokenDecimalHelper';\r\nimport Button from '../../../Button';\r\nimport DrawQrCode from '../../../DrawQrCode';\r\nimport BoltzSwapStep from '../BoltzSwapStep';\r\n\r\ntype BoltzReverseSendProps = SwapFlowProps & {\r\n  swapDetails?: BoltzSwapResponse;\r\n  claimDetails?: ClaimDetails;\r\n  swapStatus?: StatusResponse;\r\n  signer?: Signer;\r\n  proceedToNextEthereum: (claimTransactionId: string) => void;\r\n};\r\n\r\nconst useStyles = makeStyles(() =>\r\n  createStyles({\r\n    qrCodeContainer: {\r\n      marginTop: '1rem',\r\n    },\r\n    input: {\r\n      borderRadius: 0,\r\n    },\r\n    titleContainer: {\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      justifyContent: 'center',\r\n    },\r\n    titleIcon: {\r\n      height: '1.5rem',\r\n      marginLeft: '0.5rem',\r\n    },\r\n    buttonsContainer: {\r\n      marginTop: '1rem',\r\n    },\r\n    link: {\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n    },\r\n    linkIcon: {\r\n      height: '1rem',\r\n      marginLeft: '0.25rem',\r\n    },\r\n    expireContainer: {\r\n      marginBottom: '1rem',\r\n    },\r\n  })\r\n);\r\n\r\nconst BoltzReverseSend = (props: BoltzReverseSendProps): ReactElement => {\r\n  const {\r\n    signer,\r\n    swapStatus,\r\n    swapDetails,\r\n    claimDetails,\r\n    sendAsset,\r\n    receiveAsset,\r\n    proceedToNextEthereum,\r\n  } = props;\r\n\r\n  const classes = useStyles();\r\n  const explorers = useBlockExplorers();\r\n\r\n  const ethereumData = useAppSelector(selectEthereumData);\r\n  const [etaTimeDiffLabel, setEtaTimeDiffLabel] = useState('');\r\n  const [mainButtonDisabled, setMainButtonDisabled] = useState(true);\r\n  const [onMainButtonClick, setOnMainButtonClick] = useState<(() => void) | undefined>(undefined);\r\n  const [etaLeft, setETALeft] = useState(timeUntilExpiry(swapDetails?.invoice));\r\n\r\n  const explorer = useMemo(\r\n    () => {\r\n      const explorer = explorers.get(boltzPairsMap(receiveAsset));\r\n\r\n      if (explorer) {\r\n        return explorer;\r\n      } else {\r\n        return explorers.get(boltzPairsMap(CurrencyID.ETH));\r\n      }\r\n    },\r\n    [receiveAsset, explorers],\r\n  );\r\n\r\n  const blockExplorerLink = `${explorer!.address}${swapDetails?.lockupAddress}`;\r\n\r\n  const mainButtonText = useMemo(() => {\r\n    if (receiveAsset !== CurrencyID.BTC && receiveAsset !== CurrencyID.LTC) {\r\n      if (swapStatus && swapStatus.status === SwapUpdateEvent.TransactionConfirmed) {\r\n        const claimFunction = async () => {\r\n          setMainButtonDisabled(true);\r\n          try {\r\n            let transactionId: string;\r\n            if (receiveAsset === CurrencyID.ETH) {\r\n              const etherSwap = new Contract(\r\n                ethereumData.swapContracts.EtherSwap,\r\n                ContractABIs.EtherSwap,\r\n              );\r\n\r\n              transactionId = (await sendEthereumTransaction(\r\n                signer!,\r\n                await etherSwap.populateTransaction.claim(\r\n                  `0x${getHexString(claimDetails!.preImage)}`,\r\n                  formatTokenAmount(18, swapDetails!.onchainAmount!),\r\n                  swapDetails!.refundAddress!,\r\n                  swapDetails!.timeoutBlockHeight,\r\n                ),\r\n              )).hash;\r\n            } else {\r\n              const erc20Swap = new Contract(\r\n                ethereumData.swapContracts.ERC20Swap,\r\n                ContractABIs.ERC20Swap,\r\n              );\r\n\r\n              const tokenContract = new Contract(\r\n                ethereumData.tokens[boltzPairsMap(receiveAsset)],\r\n                ContractABIs.ERC20,\r\n              ).connect(signer!);\r\n\r\n              const tokenDecimals = await tokenContract.decimals();\r\n\r\n              transactionId = (await sendEthereumTransaction(\r\n                signer!,\r\n                await erc20Swap.populateTransaction.claim(\r\n                  `0x${getHexString(claimDetails!.preImage)}`,\r\n                  formatTokenAmount(tokenDecimals, swapDetails!.onchainAmount!),\r\n                  tokenContract.address,\r\n                  swapDetails!.refundAddress!,\r\n                  swapDetails!.timeoutBlockHeight,\r\n                ),\r\n              )).hash;\r\n            }\r\n\r\n            proceedToNextEthereum(transactionId);\r\n          } catch {\r\n            setMainButtonDisabled(false);\r\n          }\r\n        };\r\n\r\n        setOnMainButtonClick(() => claimFunction);\r\n        setMainButtonDisabled(false);\r\n        return 'Claim';\r\n      }\r\n    }\r\n\r\n    return !!swapStatus && swapStatus.status === SwapUpdateEvent.TransactionMempool\r\n      ? 'Waiting for one confirmation'\r\n      : 'Waiting for transaction';\r\n  }, [swapDetails, ethereumData, swapStatus, claimDetails, receiveAsset, proceedToNextEthereum, signer]);\r\n\r\n  useEffect(() => {\r\n    setEtaTimeDiffLabel(getETALabelWithSeconds(etaLeft).label);\r\n\r\n    if (etaLeft) {\r\n      const sub = setTimeout(() => {\r\n        setETALeft(etaLeft - 1);\r\n      }, 1000);\r\n\r\n      return () => clearTimeout(sub);\r\n    }\r\n  }, [etaLeft]);\r\n\r\n  const eta = etaLeft ? `Expires in ${etaTimeDiffLabel}` : 'Expired!';\r\n\r\n  return (\r\n    <BoltzSwapStep\r\n      title={<span className={classes.titleContainer}>\r\n        Pay this {sendAsset} invoice\r\n        <Tooltip\r\n          title='A lightning invoice is how you receive payments on the lightning network. Please use a lightning wallet to pay the invoice.'\r\n        >\r\n          <img\r\n            className={classes.titleIcon}\r\n            src={svgIcons.questionIcon}\r\n            alt='hint'\r\n          />\r\n        </Tooltip>\r\n      </span>}\r\n      content={<>\r\n        <Typography variant='body1' className={classes.expireContainer}>\r\n          {eta}\r\n        </Typography>\r\n        <TextField\r\n          fullWidth\r\n          variant='outlined'\r\n          multiline\r\n          disabled\r\n          value={swapDetails!.invoice}\r\n          InputProps={{\r\n            className: classes.input,\r\n          }}\r\n        />\r\n        <Grid\r\n          item\r\n          container\r\n          justify='space-between'\r\n          className={classes.buttonsContainer}\r\n        >\r\n          <Link\r\n            href={blockExplorerLink}\r\n            target='_blank'\r\n            rel='noopener noreferrer'\r\n            className={classes.link}\r\n          >\r\n            Check the lockup\r\n            <Tooltip title='Check the address to which Boltz will lockup coins after the invoice is paid.'>\r\n              <img\r\n                className={classes.linkIcon}\r\n                src={svgIcons.questionIcon}\r\n                alt='hint'\r\n              />\r\n            </Tooltip>\r\n          </Link>\r\n          <Button\r\n            variant='contained'\r\n            onClick={() => navigator.clipboard?.writeText(swapDetails!.invoice!)}\r\n          >\r\n            Copy Invoice\r\n          </Button>\r\n        </Grid>\r\n        <Grid\r\n          item\r\n          container\r\n          justify='center'\r\n          className={classes.qrCodeContainer}\r\n        >\r\n          <DrawQrCode size={200} link={swapDetails!.invoice} />\r\n        </Grid>\r\n      </>}\r\n      mainButtonVisible\r\n      mainButtonDisabled={mainButtonDisabled}\r\n      onMainButtonClick={onMainButtonClick}\r\n      mainButtonText={mainButtonText}\r\n    />\r\n  );\r\n};\r\n\r\nexport default BoltzReverseSend;\r\n","import { createStyles, Grid, makeStyles, Typography } from '@material-ui/core';\r\nimport React, { ReactElement } from 'react';\r\nimport svgIcons from '../../../../utils/svgIcons';\r\nimport Button from '../../../Button';\r\n\r\ntype BoltzSwapResultProps = {\r\n  errorMessage?: string;\r\n  swapId?: string;\r\n  showRefundButton?: boolean;\r\n};\r\n\r\nconst useStyles = makeStyles(() =>\r\n  createStyles({\r\n    imageContainer: {\r\n      padding: '2rem',\r\n    },\r\n    refundButton: {\r\n      margin: '2rem 0',\r\n    },\r\n  })\r\n);\r\n\r\nconst BoltzSwapResult = (props: BoltzSwapResultProps): ReactElement => {\r\n  const classes = useStyles();\r\n  const { errorMessage, showRefundButton } = props;\r\n\r\n  return (\r\n    <Grid\r\n      item\r\n      container\r\n      justify='center'\r\n      alignItems='center'\r\n      direction='column'\r\n    >\r\n      <Grid item className={classes.imageContainer}>\r\n        {errorMessage\r\n          ? (\r\n            <img src={svgIcons.snap} alt='aw, snap!' />\r\n          )\r\n          : (\r\n            <img src={svgIcons.greenTick} alt='success!' />\r\n          )}\r\n      </Grid>\r\n      <Typography align='center'>\r\n        {errorMessage || 'Swap successfully completed!'}\r\n      </Typography>\r\n      {showRefundButton && !!errorMessage && (\r\n        <Button\r\n          variant='outlined'\r\n          size='large'\r\n          color='primary'\r\n          onClick={() => {\r\n            throw new Error('TODO: Handle refund using new routing scheme');\r\n          }}\r\n          className={classes.refundButton}\r\n        >\r\n          Refund\r\n        </Button>\r\n      )}\r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport default BoltzSwapResult;\r\n","import { Link } from '@material-ui/core';\r\nimport { ReactElement, useMemo } from 'react';\r\nimport { useHistory } from 'react-router';\r\nimport { boltzPairsMap } from '../../../../constants/boltzRates';\r\nimport CurrencyID from '../../../../constants/currency';\r\nimport { useBlockExplorers } from '../../../../context/NetworkContext';\r\nimport { ROUTES } from '../../../../pages/home';\r\nimport BoltzSwapResult from '../BoltzSwapResult';\r\nimport BoltzSwapStep from '../BoltzSwapStep';\r\n\r\ntype BoltzReverseSwapResultProps = {\r\n  errorMessage?: string;\r\n  transactionId?: string;\r\n  receiveAsset: CurrencyID;\r\n};\r\n\r\nconst BoltzReverseSwapResult = (\r\n  props: BoltzReverseSwapResultProps,\r\n): ReactElement => {\r\n  const { errorMessage, transactionId, receiveAsset } = props;\r\n  let history = useHistory();\r\n  const explorers = useBlockExplorers();\r\n  const mapAssetToChain = (receiveAsset: CurrencyID) => {\r\n    switch (receiveAsset) {\r\n      case CurrencyID.BTC:\r\n      case CurrencyID.LTC:\r\n      case CurrencyID.ETH:\r\n        return receiveAsset;\r\n      case CurrencyID.ETH_USDT:\r\n        return CurrencyID.ETH;\r\n      default:\r\n        throw new Error(`unable to map ${receiveAsset} to chain`);\r\n    }\r\n  };\r\n\r\n  const explorer = useMemo(\r\n    () => explorers.get(boltzPairsMap(mapAssetToChain(receiveAsset))),\r\n    [receiveAsset, explorers],\r\n  );\r\n\r\n  const blockExplorerLink = `${explorer!.transaction}${transactionId}`;\r\n\r\n  return (\r\n    <BoltzSwapStep\r\n      title=''\r\n      content={<>\r\n        <BoltzSwapResult errorMessage={errorMessage} />\r\n        {!errorMessage && (\r\n          <Link\r\n            href={blockExplorerLink}\r\n            target='_blank'\r\n            rel='noopener noreferrer'\r\n          >\r\n            See on block explorer\r\n          </Link>\r\n        )}\r\n      </>}\r\n      mainButtonVisible={!errorMessage}\r\n      mainButtonText={'Swap again'}\r\n      onMainButtonClick={() => {\r\n        history.replace(ROUTES.HOME);\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nexport default BoltzReverseSwapResult;\r\n","import { Signer } from 'ethers';\r\nimport React, { ReactElement, useCallback, useMemo, useState } from 'react';\r\nimport { boltzPairsMap } from '../../../../constants/boltzRates';\r\nimport { BoltzSwapResponse, ClaimDetails, StatusResponse, SwapUpdateEvent } from '../../../../constants/boltzSwap';\r\nimport CurrencyID from '../../../../constants/currency';\r\nimport { useBoltzConfiguration } from '../../../../context/NetworkContext';\r\nimport { SwapFlowProps } from '../../../../pages/home';\r\nimport { removeRefundDetailsFromLocalStorage } from '../../../../utils/boltzRefund';\r\nimport { addReverseSwapDetailsToLocalStorage, claimSwap } from '../../../../utils/boltzReverseSwap';\r\nimport { startListening } from '../../../../utils/boltzSwapStatus';\r\nimport BoltzReverseDestination from './../../components/BoltzReverseDestination';\r\nimport BoltzReverseSend from './../../components/BoltzReverseSend';\r\nimport BoltzReverseSwapResult from './../../components/BoltzReverseSwapResult';\r\n\r\n// TODO: fetch latest status on reload\r\nconst BoltzReverseSwap = (props: SwapFlowProps): ReactElement => {\r\n  const { receiveAsset } = props;\r\n  const [activeStep, setActiveStep] = useState(0);\r\n  const [claimTransactionId, setClaimTransactionId] = useState('');\r\n  const [swapDetails, setSwapDetails] = useState<BoltzSwapResponse | undefined>(\r\n    undefined,\r\n  );\r\n  const [swapStatus, setSwapStatus] = useState<StatusResponse | undefined>(\r\n    undefined,\r\n  );\r\n  const [claimDetails, setClaimDetails] = useState<ClaimDetails | undefined>(undefined);\r\n  const [signer, setSigner] = useState<Signer | undefined>(undefined);\r\n  const [error, setError] = useState('');\r\n  const { apiEndpoint, bitcoinConstants, litecoinConstants } = useBoltzConfiguration();\r\n\r\n  const network = useMemo(\r\n    () =>\r\n      boltzPairsMap(receiveAsset) === 'BTC'\r\n        ? bitcoinConstants\r\n        : litecoinConstants,\r\n    [bitcoinConstants, litecoinConstants, receiveAsset],\r\n  );\r\n\r\n  const proceedToNext = useCallback(\r\n    () => setActiveStep(oldValue => oldValue + 1),\r\n    [setActiveStep],\r\n  );\r\n\r\n  const destinationComplete = useMemo(\r\n    () =>\r\n      (swapDetails: BoltzSwapResponse, claimDetails: ClaimDetails, signer?: Signer) => {\r\n        addReverseSwapDetailsToLocalStorage({\r\n          ...claimDetails,\r\n          swapId: swapDetails.id,\r\n          redeemScript: swapDetails.redeemScript!,\r\n        });\r\n        setSwapDetails(swapDetails);\r\n        setClaimDetails(claimDetails);\r\n        setSigner(signer);\r\n        proceedToNext();\r\n        startListening(swapDetails.id, apiEndpoint, (data, stream) => {\r\n          setSwapStatus(data);\r\n\r\n          // TODO: remove\r\n          // @ts-ignore\r\n          if (receiveAsset === CurrencyID.BTC || receiveAsset === CurrencyID.LTC) {\r\n            if (\r\n              (claimDetails.instantSwap\r\n                && SwapUpdateEvent.TransactionMempool === data.status)\r\n              || SwapUpdateEvent.TransactionConfirmed === data.status\r\n            ) {\r\n              // Ethereum Reverse Swap claims are triggered in the UI\r\n              claimSwap(\r\n                claimDetails,\r\n                data,\r\n                swapDetails,\r\n                receiveAsset,\r\n                network,\r\n                apiEndpoint,\r\n                transaction => setClaimTransactionId(transaction.getId()),\r\n              ).subscribe({\r\n                next: () => {},\r\n                error: err => {\r\n                  console.error(err);\r\n                  stream.close();\r\n                  setError('Failed to claim the funds.');\r\n                  proceedToNext();\r\n                },\r\n                complete: () => {\r\n                  stream.close();\r\n                  proceedToNext();\r\n                  removeRefundDetailsFromLocalStorage(swapDetails.id);\r\n                },\r\n              });\r\n            } else {\r\n              if (SwapUpdateEvent.TransactionClaimed) {\r\n                stream.close();\r\n                removeRefundDetailsFromLocalStorage(swapDetails.id);\r\n              }\r\n            }\r\n          } else if (data.failureReason) {\r\n            stream.close();\r\n          }\r\n        });\r\n      },\r\n    [proceedToNext, apiEndpoint, network, receiveAsset],\r\n  );\r\n\r\n  const sendCompleteEthereum = useMemo(() =>\r\n    (claimTransactionId: string) => {\r\n      setClaimTransactionId(claimTransactionId);\r\n      proceedToNext();\r\n    }, [proceedToNext]);\r\n\r\n  const steps = [\r\n    <BoltzReverseDestination {...props} proceedToNext={destinationComplete} />,\r\n    <BoltzReverseSend\r\n      {...props}\r\n      swapDetails={swapDetails}\r\n      claimDetails={claimDetails}\r\n      swapStatus={swapStatus}\r\n      signer={signer}\r\n      proceedToNextEthereum={sendCompleteEthereum}\r\n    />,\r\n    <BoltzReverseSwapResult\r\n      receiveAsset={props.receiveAsset}\r\n      errorMessage={error || swapStatus?.failureReason}\r\n      transactionId={claimTransactionId}\r\n    />,\r\n  ];\r\n\r\n  return steps[activeStep];\r\n};\r\n\r\nexport default BoltzReverseSwap;\r\n","import React, { ReactElement } from 'react';\r\nimport { StatusResponse } from '../../../../constants/boltzSwap';\r\nimport { swapError } from '../../../../utils/boltzSwapStatus';\r\nimport BoltzSwapResult from './../BoltzSwapResult';\r\n\r\ntype BoltzSubmarineSwapResultProps = {\r\n  swapStatus: StatusResponse;\r\n  swapId?: string;\r\n  showRefundButton?: boolean;\r\n};\r\n\r\nconst BoltzSubmarineSwapResult = (\r\n  props: BoltzSubmarineSwapResultProps,\r\n): ReactElement => {\r\n  const { swapStatus, swapId, showRefundButton } = props;\r\n\r\n  return (\r\n    <BoltzSwapResult\r\n      errorMessage={swapError(swapStatus)}\r\n      swapId={swapId}\r\n      showRefundButton={showRefundButton}\r\n    />\r\n  );\r\n};\r\n\r\nexport default BoltzSubmarineSwapResult;\r\n","import { createStyles, LinearProgress, makeStyles, Step, StepContent, StepLabel, Stepper } from '@material-ui/core';\r\nimport React, { ReactElement, useEffect, useState } from 'react';\r\nimport { StatusResponse, swapSteps, SwapUpdateEvent } from '../../../../constants/boltzSwap';\r\nimport { swapError } from '../../../../utils/boltzSwapStatus';\r\nimport BoltzSubmarineSwapResult from '../BoltzSubmarineSwapResult';\r\n\r\ntype BoltzSubmarineStatusProps = {\r\n  swapStatus: StatusResponse;\r\n  showRefundButton?: boolean;\r\n  swapId?: string;\r\n  onActiveStepChange?: (step: number) => void;\r\n};\r\n\r\nconst useStyles = makeStyles(() =>\r\n  createStyles({\r\n    progressBar: {\r\n      height: '2px',\r\n    },\r\n    imageContainer: {\r\n      padding: '2rem',\r\n    },\r\n    refundButton: {\r\n      margin: '2rem 0',\r\n    },\r\n  })\r\n);\r\n\r\nconst BoltzSubmarineStatus = (\r\n  props: BoltzSubmarineStatusProps,\r\n): ReactElement => {\r\n  const classes = useStyles();\r\n  const { swapId, swapStatus, showRefundButton, onActiveStepChange } = props;\r\n  const [activeStep, setActiveStep] = useState(0);\r\n\r\n  useEffect(() => {\r\n    const statuses = swapSteps.map(step => step.status);\r\n    const statusIndex = statuses.findIndex(status => status.includes(swapStatus.status));\r\n    if (statusIndex !== -1) {\r\n      const newActiveStep = statusIndex + 1;\r\n      setActiveStep(newActiveStep);\r\n      !!onActiveStepChange && onActiveStepChange(newActiveStep);\r\n    }\r\n  }, [swapStatus, setActiveStep, onActiveStepChange]);\r\n\r\n  return (\r\n    <>\r\n      {swapError(swapStatus)\r\n          || swapStatus.status === SwapUpdateEvent.TransactionClaimed\r\n        ? (\r\n          <BoltzSubmarineSwapResult\r\n            swapStatus={swapStatus}\r\n            swapId={swapId}\r\n            showRefundButton={showRefundButton}\r\n          />\r\n        )\r\n        : (\r\n          <>\r\n            <Stepper activeStep={activeStep} orientation='vertical'>\r\n              {swapSteps.map((step, index) => (\r\n                <Step key={step.status[0]}>\r\n                  <StepLabel>\r\n                    {activeStep > index ? step.textComplete : step.initialText}\r\n                  </StepLabel>\r\n                  <StepContent>\r\n                    <LinearProgress className={classes.progressBar} />\r\n                  </StepContent>\r\n                </Step>\r\n              ))}\r\n            </Stepper>\r\n          </>\r\n        )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default BoltzSubmarineStatus;\r\n","import React, { ReactElement, useState } from 'react';\r\nimport { useHistory } from 'react-router';\r\nimport { StatusResponse, swapSteps } from '../../../../constants/boltzSwap';\r\nimport { ROUTES } from '../../../../pages/home';\r\nimport { swapError } from '../../../../utils/boltzSwapStatus';\r\nimport BoltzSubmarineStatus from '../BoltzSubmarineStatus';\r\nimport BoltzSwapStep from '../BoltzSwapStep';\r\n\r\ntype BoltzSubmarineSwapStatusProps = {\r\n  swapStatus: StatusResponse;\r\n  swapId?: string;\r\n};\r\n\r\nconst BoltzSubmarineSwapStatus = (\r\n  props: BoltzSubmarineSwapStatusProps,\r\n): ReactElement => {\r\n  const { swapStatus, swapId } = props;\r\n  const [activeStep, setActiveStep] = useState<number | undefined>(undefined);\r\n  const history = useHistory();\r\n\r\n  const swapInProgress = !swapError(swapStatus) && !!activeStep && activeStep < swapSteps.length;\r\n\r\n  return (\r\n    <BoltzSwapStep\r\n      title='Swap status'\r\n      content={<BoltzSubmarineStatus\r\n        swapStatus={swapStatus}\r\n        swapId={swapId}\r\n        showRefundButton\r\n        onActiveStepChange={setActiveStep}\r\n      />}\r\n      mainButtonDisabled={swapInProgress}\r\n      mainButtonText={swapInProgress ? 'Swap in progress' : 'Start a new swap'}\r\n      onMainButtonClick={() => {\r\n        history.replace(ROUTES.HOME);\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nexport default BoltzSubmarineSwapStatus;\r\n","import bolt11 from '@boltz/bolt11';\r\n\r\nexport const isInvoiceValid = invoice => {\r\n  try {\r\n    bolt11.decode(invoice);\r\n    return true;\r\n  } catch (error) {\r\n    return false;\r\n  }\r\n};\r\n","import React, { useEffect, useMemo } from 'react';\r\nimport { RefundDetails } from '../../constants/boltzSwap';\r\nimport createRefundQr from '../../utils/createRefundQr';\r\nimport detectTorBrowser from '../../utils/detectTorBrowser';\r\n\r\ntype DownloadRefundFileProps = {\r\n  details: RefundDetails;\r\n};\r\n\r\nconst DownloadRefundFile = (props: DownloadRefundFileProps) => {\r\n  const ref: React.RefObject<HTMLAnchorElement> = useMemo(\r\n    () => React.createRef(),\r\n    [],\r\n  );\r\n\r\n  const { swapId, currency, privateKey, redeemScript, timeoutBlockHeight } = props.details;\r\n\r\n  useEffect(() => {\r\n    ref?.current?.click();\r\n  }, [ref]);\r\n\r\n  const isTorBrowser = detectTorBrowser();\r\n\r\n  let refundFile = JSON.stringify({\r\n    swapId,\r\n    currency,\r\n    privateKey,\r\n    redeemScript,\r\n    timeoutBlockHeight,\r\n  });\r\n\r\n  // The Tor browser can't create PNG QR codes so we need to download the information as JSON\r\n  if (isTorBrowser) {\r\n    refundFile = 'data:application/json;charset=utf-8,' + refundFile;\r\n  } else {\r\n    refundFile = createRefundQr(refundFile);\r\n  }\r\n\r\n  const fileName = `refund-${swapId}`;\r\n\r\n  return (\r\n    // eslint-disable-next-line jsx-a11y/anchor-has-content\r\n    <a\r\n      target='_blank'\r\n      rel='noopener noreferrer'\r\n      ref={ref}\r\n      href={refundFile}\r\n      download={isTorBrowser ? `${fileName}.json` : `${fileName}.png`}\r\n    />\r\n  );\r\n};\r\n\r\nexport default DownloadRefundFile;\r\n","import QRious from 'qrious';\r\n\r\nexport default jsonData => {\r\n  const qr = new QRious({\r\n    size: 500,\r\n    level: 'L',\r\n    value: jsonData,\r\n    background: 'white',\r\n    foreground: 'black',\r\n    backgroundAlpha: 1,\r\n    foregroundAlpha: 1,\r\n  });\r\n\r\n  return qr.toDataURL();\r\n};\r\n","// Reference: https://stackoverflow.com/a/44461975\r\nexport default () => {\r\n  var img = document.createElement('img');\r\n  // Creates a black 1x1 px image\r\n  img.src =\r\n    'data:image/png;base64,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';\r\n\r\n  var canvas = document.createElement('canvas');\r\n  canvas.width = 1;\r\n  canvas.height = 1;\r\n  var ctx = canvas.getContext('2d');\r\n  var imagedata = ctx.getImageData(0, 0, canvas.width, canvas.height);\r\n\r\n  return (\r\n    imagedata.data[0] === 255\r\n    && imagedata.data[1] === 255\r\n    && imagedata.data[2] === 255\r\n    && imagedata.data[3] === 255\r\n  );\r\n};\r\n","import Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport { useTheme } from '@material-ui/core/styles';\r\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\r\nimport PropTypes from 'prop-types';\r\nimport React from 'react';\r\nimport svgIcons from '../../utils/svgIcons';\r\n\r\nfunction SimpleDialog(props) {\r\n  const { onClose, open, title } = props;\r\n  const theme = useTheme();\r\n  const fullScreen = useMediaQuery(theme.breakpoints.down('sm'));\r\n\r\n  const handleClose = () => {\r\n    onClose();\r\n  };\r\n\r\n  return (\r\n    <Dialog\r\n      fullScreen={fullScreen}\r\n      onClose={handleClose}\r\n      aria-labelledby='simple-dialog-title'\r\n      open={open}\r\n    >\r\n      <DialogTitle id='simple-dialog-title'>\r\n        {title}\r\n        <Button\r\n          aria-controls={'menu-list-grow'}\r\n          aria-haspopup='true'\r\n          className='drawer-close-btn'\r\n          onClick={handleClose}\r\n        >\r\n          <img src={svgIcons.close} alt='' />\r\n        </Button>\r\n      </DialogTitle>\r\n      {props.children}\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nSimpleDialog.propTypes = {\r\n  onClose: PropTypes.func.isRequired,\r\n  open: PropTypes.bool.isRequired,\r\n  title: PropTypes.string,\r\n};\r\n\r\nexport default SimpleDialog;\r\n","import React from 'react';\r\nimport QrReader from 'react-qr-reader';\r\nimport DialogBox from '../DialogBox';\r\n\r\nexport default function QrCodeReader(props) {\r\n  const { onClose, open, setOpen } = props;\r\n\r\n  if (open) {\r\n    if (navigator?.mediaDevices?.getUserMedia) {\r\n      navigator.mediaDevices\r\n        .getUserMedia({\r\n          video: true,\r\n        })\r\n        .then(() => {})\r\n        .catch(err =>\r\n          alert(\r\n            'The following error occurred when trying to access the camera: '\r\n              + err,\r\n          )\r\n        );\r\n    } else {\r\n      alert('Sorry, browser does not support camera access');\r\n    }\r\n  }\r\n\r\n  const closeDialogBox = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const onScan = value => {\r\n    if (value && value.trim()) {\r\n      onClose(value);\r\n      closeDialogBox();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <DialogBox open={open} onClose={closeDialogBox} title='Scan QR Code'>\r\n      <QrReader\r\n        delay={300}\r\n        onError={console.error}\r\n        onScan={onScan}\r\n        style={{ width: '100%' }}\r\n      />\r\n    </DialogBox>\r\n  );\r\n}\r\n","import { CurrencyID } from './currency';\r\nimport { CurrencyPair } from './rates';\r\n\r\nexport enum SwapProvider {\r\n  BOLTZ = 'boltz',\r\n  COMIT = 'comit',\r\n  TDEX = 'tdex',\r\n}\r\n\r\nexport enum Direction {\r\n  SINGLE,\r\n  BOTH,\r\n}\r\n\r\nexport class SwapProviderPair {\r\n  public constructor(\r\n    public pair: CurrencyPair,\r\n    public direction: Direction = Direction.BOTH,\r\n  ) {}\r\n}\r\n\r\nexport const swapProviders = {\r\n  [SwapProvider.BOLTZ]: [\r\n    new SwapProviderPair([CurrencyID.BTC, CurrencyID.LIGHTNING_BTC]),\r\n    new SwapProviderPair([CurrencyID.BTC, CurrencyID.LIGHTNING_LTC]),\r\n    new SwapProviderPair([CurrencyID.ETH, CurrencyID.LIGHTNING_BTC]),\r\n    new SwapProviderPair([CurrencyID.ETH_USDT, CurrencyID.LIGHTNING_BTC]),\r\n    new SwapProviderPair([CurrencyID.LTC, CurrencyID.LIGHTNING_BTC]),\r\n    new SwapProviderPair([CurrencyID.LTC, CurrencyID.LIGHTNING_LTC]),\r\n  ],\r\n  [SwapProvider.COMIT]: [\r\n    new SwapProviderPair([CurrencyID.BTC, CurrencyID.MONERO], Direction.SINGLE),\r\n  ],\r\n  [SwapProvider.TDEX]: [\r\n    new SwapProviderPair([CurrencyID.LIQUID_BTC, CurrencyID.LIQUID_USDT]),\r\n    new SwapProviderPair([CurrencyID.LIQUID_BTC, CurrencyID.LIQUID_CAD]),\r\n  ],\r\n};\r\n","import { createStyles, Grid, makeStyles, MenuItem, Select } from '@material-ui/core';\r\nimport BigNumber from 'bignumber.js';\r\nimport React, { ReactElement, useEffect } from 'react';\r\nimport { boltzPairsMap } from '../../../../constants/boltzRates';\r\nimport CurrencyID, { fundTransferTypes } from '../../../../constants/currency';\r\nimport { selectUnit, setUnit } from '../../../../store/boltz-slice';\r\nimport { useAppDispatch, useAppSelector } from '../../../../store/hooks';\r\n\r\ntype BoltzAmountProps = {\r\n  amountInMainUnit: string;\r\n  currency: CurrencyID;\r\n  onDisplayedAmountChange?: (amount: string) => void;\r\n};\r\n\r\nconst useStyles = makeStyles(() =>\r\n  createStyles({\r\n    input: {\r\n      borderRadius: 0,\r\n    },\r\n    selectInput: {\r\n      borderRadius: 0,\r\n      paddingTop: '0.5rem',\r\n      paddingBottom: '0.5rem',\r\n    },\r\n    amountRow: {\r\n      marginTop: '0.5rem',\r\n    },\r\n    amountContainer: {\r\n      display: 'flex',\r\n      justifyContent: 'flex-end',\r\n    },\r\n    unitContainer: {\r\n      display: 'flex',\r\n      justifyContent: 'flex-start',\r\n    },\r\n  })\r\n);\r\n\r\nconst BoltzAmount = (props: BoltzAmountProps): ReactElement => {\r\n  const { amountInMainUnit, currency, onDisplayedAmountChange } = props;\r\n  const classes = useStyles();\r\n  const dispatch = useAppDispatch();\r\n  const units = useAppSelector(selectUnit);\r\n\r\n  const unitOptions = fundTransferTypes[boltzPairsMap(currency)];\r\n\r\n  const getUnit = () => {\r\n    return units[boltzPairsMap(currency)] || unitOptions[0];\r\n  };\r\n\r\n  const displayedAmount = getUnit().value === '2'\r\n    ? amountInMainUnit\r\n    : new BigNumber(amountInMainUnit).multipliedBy(10 ** 8).toString();\r\n\r\n  useEffect(() => {\r\n    if (onDisplayedAmountChange) {\r\n      onDisplayedAmountChange(displayedAmount);\r\n    }\r\n  }, [displayedAmount, onDisplayedAmountChange]);\r\n\r\n  return (\r\n    <Grid\r\n      item\r\n      container\r\n      spacing={1}\r\n      alignItems='center'\r\n      justify='center'\r\n      className={classes.amountRow}\r\n    >\r\n      {unitOptions.length > 1\r\n        ? (\r\n          <>\r\n            <Grid item xs={6} className={classes.amountContainer}>\r\n              {displayedAmount}\r\n            </Grid>\r\n            <Grid item xs={6} className={classes.unitContainer}>\r\n              <Select\r\n                variant='outlined'\r\n                className={classes.input}\r\n                inputProps={{ className: classes.selectInput }}\r\n                value={getUnit().id}\r\n                onChange={e => {\r\n                  const selected = unitOptions.find(\r\n                    opt => opt.id === e.target.value,\r\n                  )!;\r\n                  dispatch(setUnit({ [boltzPairsMap(currency)]: selected }));\r\n                }}\r\n              >\r\n                {unitOptions.map(option => (\r\n                  <MenuItem key={option.value} value={option.id}>\r\n                    {option.id}\r\n                  </MenuItem>\r\n                ))}\r\n              </Select>\r\n            </Grid>\r\n          </>\r\n        )\r\n        : (\r\n          <>\r\n            {displayedAmount} {getUnit().id}\r\n          </>\r\n        )}\r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport default BoltzAmount;\r\n","import {\r\n  createStyles,\r\n  FormControlLabel,\r\n  Grid,\r\n  InputAdornment,\r\n  makeStyles,\r\n  Switch,\r\n  TextField,\r\n  Tooltip,\r\n} from '@material-ui/core';\r\nimport React, { ReactElement, useContext, useEffect, useState } from 'react';\r\nimport { BOLTZ_CREATE_SWAP_API_URL } from '../../../../api/boltzApiUrls';\r\nimport useBoltzFetcher from '../../../../constants/boltzFetcherHook';\r\nimport { boltzPairsMap } from '../../../../constants/boltzRates';\r\nimport { BoltzSwapResponse, RefundDetails } from '../../../../constants/boltzSwap';\r\nimport CurrencyID from '../../../../constants/currency';\r\nimport { useBoltzConfiguration } from '../../../../context/NetworkContext';\r\nimport { UtilsContext } from '../../../../context/UtilsContext';\r\nimport { SwapFlowProps } from '../../../../pages/home';\r\nimport { isInvoiceValid } from '../../../../services/submarine/invoiceValidation';\r\nimport { generateKeys } from '../../../../services/submarine/keys';\r\nimport { selectUnit } from '../../../../store/boltz-slice';\r\nimport { useAppSelector } from '../../../../store/hooks';\r\nimport { addRefundDetailsToLocalStorage } from '../../../../utils/boltzRefund';\r\nimport { decodeInvoice } from '../../../../utils/invoiceDecoder';\r\nimport svgIcons from '../../../../utils/svgIcons';\r\nimport Button from '../../../Button';\r\nimport DownloadRefundFile from '../../../DownloadRefundFile';\r\nimport QrCodeReader from '../../../QrCodeReader';\r\nimport BoltzAmount from '../BoltzAmount';\r\nimport BoltzSwapStep from '../BoltzSwapStep';\r\n\r\ntype BoltzSubmarineDestinationProps = SwapFlowProps & {\r\n  proceedToNext: (preimageHash: string, swapDetails: BoltzSwapResponse) => void;\r\n};\r\n\r\nconst useStyles = makeStyles(() =>\r\n  createStyles({\r\n    input: {\r\n      borderRadius: 0,\r\n      alignItems: 'start',\r\n    },\r\n    scanButton: {\r\n      marginBottom: '1rem',\r\n    },\r\n    hintIcon: {\r\n      height: '1.5rem',\r\n    },\r\n    endAdornment: {\r\n      display: 'block',\r\n    },\r\n    downloadRefund: {\r\n      marginTop: '1rem',\r\n      '& .MuiFormControlLabel-label': {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n      },\r\n    },\r\n    downloadRefundHint: {\r\n      height: '1.25rem',\r\n      marginLeft: '0.5rem',\r\n    },\r\n  })\r\n);\r\n\r\nconst BoltzSubmarineDestination = (\r\n  props: BoltzSubmarineDestinationProps,\r\n): ReactElement => {\r\n  const { proceedToNext, receiveAmount, sendAsset, receiveAsset } = props;\r\n  const classes = useStyles();\r\n  const units = useAppSelector(selectUnit);\r\n  const [invoice, setInvoice] = useState('');\r\n  const [error, setError] = useState('');\r\n  const [downloadRefundFile, setDownloadRefundFile] = useState(true);\r\n  const [loading, setLoading] = useState(false);\r\n  const [browserScan, setBrowserScan] = useState(false);\r\n  const boltzRates = useBoltzFetcher();\r\n  const { apiEndpoint, bitcoinConstants, litecoinConstants } = useBoltzConfiguration();\r\n  const [keys, setKeys] = useState<{ publicKey?: string; privateKey?: string }>(\r\n    {},\r\n  );\r\n  const [refundDetails, setRefundDetails] = useState<RefundDetails | undefined>(\r\n    undefined,\r\n  );\r\n  const [displayedAmount, setDisplayedAmount] = useState('');\r\n  const utilsContext = useContext(UtilsContext);\r\n  const isMobileView = !!utilsContext?.isMobileView;\r\n\r\n  const invoiceFieldText = `Invoice for ${displayedAmount} ${units[boltzPairsMap(receiveAsset)].id}`;\r\n\r\n  const invoiceValid = (invoice: string) => !invoice || isInvoiceValid(invoice);\r\n\r\n  const nextEnabled = !!invoice && isInvoiceValid(invoice);\r\n\r\n  useEffect(() => {\r\n    const network = boltzPairsMap(receiveAsset) === 'BTC'\r\n      ? bitcoinConstants\r\n      : litecoinConstants;\r\n    setKeys(generateKeys(network));\r\n  }, [sendAsset, receiveAsset, bitcoinConstants, litecoinConstants]);\r\n\r\n  const createSwap = async () => {\r\n    const formattedPairs = await boltzRates!.formatPair([\r\n      sendAsset,\r\n      receiveAsset,\r\n    ]);\r\n\r\n    const params = {\r\n      ...formattedPairs,\r\n      type: 'submarine',\r\n      invoice: invoice,\r\n      // TODO: no refund public key needed for Ethereum\r\n      refundPublicKey: keys.publicKey,\r\n      channel: {\r\n        auto: true,\r\n        private: false,\r\n        inboundLiquidity: 25,\r\n      },\r\n    };\r\n\r\n    const errorMessage = 'Something went wrong. Please try again.';\r\n    setLoading(true);\r\n\r\n    try {\r\n      const response = await fetch(BOLTZ_CREATE_SWAP_API_URL(apiEndpoint), {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json;charset=utf-8',\r\n        },\r\n        body: JSON.stringify(params),\r\n      });\r\n\r\n      const data: BoltzSwapResponse = await response.json();\r\n\r\n      if (response.status === 201) {\r\n        setError('');\r\n        const refundData: RefundDetails = {\r\n          swapId: data.id,\r\n          currency: sendAsset,\r\n          timeoutBlockHeight: data.timeoutBlockHeight,\r\n          redeemScript: data.redeemScript!,\r\n          privateKey: keys.privateKey!,\r\n          date: new Date(),\r\n        };\r\n        setRefundDetails(refundData);\r\n        addRefundDetailsToLocalStorage(refundData);\r\n        proceedToNext(decodeInvoice(invoice).paymentHash!, data);\r\n\r\n        return;\r\n      } else {\r\n        const message = data.error || errorMessage;\r\n        setError(message);\r\n        setLoading(false);\r\n      }\r\n      // TODO: show actual error\r\n    } catch (_) {\r\n      setError(errorMessage);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const refundDownloadAvailable = ![\r\n    CurrencyID.ETH,\r\n    CurrencyID.ETH_USDT,\r\n  ].includes(sendAsset);\r\n\r\n  return (\r\n    <BoltzSwapStep\r\n      title={<>\r\n        Paste invoice to receive\r\n        <br />\r\n        <BoltzAmount\r\n          amountInMainUnit={receiveAmount}\r\n          currency={receiveAsset}\r\n          onDisplayedAmountChange={setDisplayedAmount}\r\n        />\r\n      </>}\r\n      content={<Grid item container justify='center'>\r\n        {isMobileView && (\r\n          <Button\r\n            onClick={() => setBrowserScan(true)}\r\n            startIcon={<img src={svgIcons.camera} alt='scan' />}\r\n            className={classes.scanButton}\r\n          >\r\n            Scan invoice\r\n          </Button>\r\n        )}\r\n        <TextField\r\n          multiline\r\n          fullWidth\r\n          variant='outlined'\r\n          aria-label={invoiceFieldText}\r\n          rows={6}\r\n          placeholder={invoiceFieldText}\r\n          value={invoice}\r\n          onChange={e => {\r\n            setInvoice(e.target.value);\r\n            setError('');\r\n          }}\r\n          error={!invoiceValid(invoice)}\r\n          helperText={!invoiceValid(invoice) && 'Invalid invoice'}\r\n          InputProps={{\r\n            className: classes.input,\r\n            endAdornment: (\r\n              <InputAdornment position='end' className={classes.endAdornment}>\r\n                <Tooltip\r\n                  title='A lightning invoice is how you receive payments on the lightning network. Please use a Lightning wallet to create an invoice.'\r\n                >\r\n                  <img\r\n                    className={classes.hintIcon}\r\n                    src={svgIcons.questionIcon}\r\n                    alt='hint'\r\n                  />\r\n                </Tooltip>\r\n              </InputAdornment>\r\n            ),\r\n          }}\r\n        />\r\n        {refundDownloadAvailable && (\r\n          <FormControlLabel\r\n            control={<Switch\r\n              checked={downloadRefundFile}\r\n              onChange={() => setDownloadRefundFile(oldValue => !oldValue)}\r\n              name='downloadRefundFile'\r\n              color='primary'\r\n            />}\r\n            className={classes.downloadRefund}\r\n            label={<>\r\n              Download refund file\r\n              <Tooltip\r\n                title='The refund details are stored in your browser. You can also save the file on your device.'\r\n              >\r\n                <img\r\n                  className={classes.downloadRefundHint}\r\n                  src={svgIcons.questionIcon}\r\n                  alt='hint'\r\n                />\r\n              </Tooltip>\r\n            </>}\r\n          />\r\n        )}\r\n        {refundDownloadAvailable && downloadRefundFile && !!refundDetails && (\r\n          <DownloadRefundFile details={refundDetails} />\r\n        )}\r\n        <QrCodeReader\r\n          onClose={(invoice: string) => setInvoice(invoice.toLowerCase())}\r\n          open={browserScan}\r\n          setOpen={setBrowserScan}\r\n        />\r\n      </Grid>}\r\n      errorMessage={error}\r\n      mainButtonText='Next'\r\n      mainButtonVisible\r\n      onMainButtonClick={createSwap}\r\n      mainButtonDisabled={!nextEnabled}\r\n      mainButtonLoading={loading}\r\n    />\r\n  );\r\n};\r\n\r\nexport default BoltzSubmarineDestination;\r\n","import { mergeMap } from 'rxjs/operators';\r\nimport { ContractABIs } from 'boltz-core';\r\nimport { constants, Contract, Signer } from 'ethers';\r\nimport React, { ReactElement, useEffect, useState } from 'react';\r\nimport { forkJoin, from } from 'rxjs';\r\nimport { boltzPairsMap } from '../../../../constants/boltzRates';\r\nimport { BoltzSwapResponse, StatusResponse, SwapUpdateEvent } from '../../../../constants/boltzSwap';\r\nimport CurrencyID from '../../../../constants/currency';\r\nimport { selectEthereumData } from '../../../../store/boltz-slice';\r\nimport { useAppSelector } from '../../../../store/hooks';\r\nimport { sendEthereumTransaction } from '../../../../utils/ethereumTransactionWrapper';\r\nimport { formatTokenAmount } from '../../../../utils/tokenDecimalHelper';\r\nimport Button from '../../../Button';\r\nimport BoltzEthereumAccount from '../BoltzEthereumAccount';\r\nimport BoltzSwapStep from '../BoltzSwapStep';\r\n\r\n// TODO: no refund files for ethereum swaps\r\n\r\n// TODO: (plus disconnect / connect other provider)\r\nconst BoltzSubmarineSendEthereum = (props: {\r\n  swapStatus?: StatusResponse;\r\n  swapDetails: BoltzSwapResponse;\r\n  preimageHash: string;\r\n  title: ReactElement;\r\n  sendCurrency: CurrencyID;\r\n  proceedToNext: () => void;\r\n}): ReactElement => {\r\n  const { title, proceedToNext, swapStatus, sendCurrency } = props;\r\n\r\n  const ethereumData = useAppSelector(selectEthereumData);\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [wrongChain, setWrongChain] = useState(false);\r\n\r\n  const [signer, setSigner] = useState<Signer | undefined>(undefined);\r\n\r\n  const [error, setError] = useState('');\r\n  const [notEnoughTokens, setNotEnoughTokens] = useState(false);\r\n\r\n  const [tokenContract, setTokenContract] = useState<Contract | undefined>(\r\n    undefined,\r\n  );\r\n  const [needsApproval, setNeedsApproval] = useState(false);\r\n  const [waitingForApproval, setWaitingForApproval] = useState(false);\r\n\r\n  // 18 by default because Ether has 18\r\n  const [tokenDecimals, setTokenDecimals] = useState(18);\r\n\r\n  useEffect(() => {\r\n    if (sendCurrency === CurrencyID.ETH) {\r\n      return;\r\n    }\r\n\r\n    // TODO: fetch ethereumData at some earlier point in time\r\n    if (ethereumData === undefined || signer === undefined) {\r\n      return;\r\n    }\r\n\r\n    // TODO: indicate that stuff is loading in here\r\n    const tokenContract = new Contract(\r\n      ethereumData.tokens[boltzPairsMap(sendCurrency)],\r\n      ContractABIs.ERC20,\r\n    ).connect(signer!);\r\n    setTokenContract(tokenContract);\r\n\r\n    const signerAddress$ = from(signer!.getAddress());\r\n    const erc20SwapAddress = ethereumData.swapContracts.ERC20Swap;\r\n\r\n    // TODO: for may: check balance every 15 seconds or so?\r\n    const sub = signerAddress$\r\n      .pipe(\r\n        mergeMap(signerAddress =>\r\n          forkJoin([\r\n            from(tokenContract.decimals()),\r\n            from(tokenContract.allowance(signerAddress, erc20SwapAddress)),\r\n            from(tokenContract.balanceOf(signerAddress)),\r\n          ])\r\n        ),\r\n      )\r\n      .subscribe({\r\n        next: ([decimals, allowance, balance]) => {\r\n          setTokenDecimals(decimals as number);\r\n\r\n          const formattedTokenAmount = formatTokenAmount(\r\n            decimals as number,\r\n            props.swapDetails.expectedAmount!,\r\n          );\r\n\r\n          if ((balance as any).lt(formattedTokenAmount)) {\r\n            // TODO: show what we are missing\r\n            setNotEnoughTokens(true);\r\n            setError(`Not enough ${sendCurrency} tokens in Ethereum wallet`);\r\n          }\r\n\r\n          if ((allowance as any).lte(formattedTokenAmount)) {\r\n            setNeedsApproval(true);\r\n          }\r\n        },\r\n        error: err => {},\r\n      });\r\n\r\n    return () => sub?.unsubscribe();\r\n  }, [sendCurrency, ethereumData, signer, props]);\r\n\r\n  useEffect(() => {\r\n    if (\r\n      swapStatus\r\n      && swapStatus.status === SwapUpdateEvent.TransactionConfirmed\r\n    ) {\r\n      proceedToNext();\r\n    }\r\n  }, [swapStatus, proceedToNext]);\r\n\r\n  return (\r\n    <BoltzSwapStep\r\n      title={title}\r\n      content={<>\r\n        <BoltzEthereumAccount\r\n          setWrongChain={setWrongChain}\r\n          setError={setError}\r\n          setSigner={setSigner}\r\n          additionalButton={signer && sendCurrency !== CurrencyID.ETH\r\n            ? (\r\n              <Button\r\n                variant='contained'\r\n                color='primary'\r\n                disabled={!needsApproval || !!error || waitingForApproval}\r\n                loading={waitingForApproval}\r\n                onClick={() => {\r\n                  setWaitingForApproval(true);\r\n                  tokenContract!\r\n                    .approve(\r\n                      ethereumData.swapContracts.ERC20Swap,\r\n                      constants.MaxUint256,\r\n                    )\r\n                    .then(() => {\r\n                      setWaitingForApproval(false);\r\n                      setNeedsApproval(false);\r\n                    })\r\n                    .catch(() => setWaitingForApproval(false));\r\n                }}\r\n              >\r\n                Approve\r\n              </Button>\r\n            )\r\n            : undefined}\r\n        />\r\n      </>}\r\n      errorMessage={error}\r\n      mainButtonVisible\r\n      mainButtonText='Send'\r\n      mainButtonDisabled={needsApproval || notEnoughTokens || !signer || wrongChain}\r\n      mainButtonLoading={loading}\r\n      onMainButtonClick={async () => {\r\n        setError('');\r\n        setLoading(true);\r\n        try {\r\n          if (sendCurrency === CurrencyID.ETH) {\r\n            const etherSwap = new Contract(\r\n              ethereumData.swapContracts.EtherSwap,\r\n              ContractABIs.EtherSwap,\r\n            ).connect(signer!);\r\n\r\n            await sendEthereumTransaction(\r\n              signer!,\r\n              await etherSwap.populateTransaction.lock(\r\n                `0x${props.preimageHash}`,\r\n                props.swapDetails.claimAddress,\r\n                props.swapDetails.timeoutBlockHeight,\r\n                {\r\n                  value: formatTokenAmount(\r\n                    tokenDecimals,\r\n                    props.swapDetails.expectedAmount!,\r\n                  ),\r\n                },\r\n              ),\r\n            );\r\n          } else {\r\n            const erc20Swap = new Contract(\r\n              ethereumData.swapContracts.ERC20Swap,\r\n              ContractABIs.ERC20Swap,\r\n            ).connect(signer!);\r\n\r\n            await sendEthereumTransaction(\r\n              signer!,\r\n              await erc20Swap.populateTransaction.lock(\r\n                `0x${props.preimageHash}`,\r\n                formatTokenAmount(\r\n                  tokenDecimals,\r\n                  props.swapDetails.expectedAmount!,\r\n                ),\r\n                tokenContract!.address,\r\n                props.swapDetails.claimAddress,\r\n                props.swapDetails.timeoutBlockHeight,\r\n              ),\r\n            );\r\n          }\r\n        } catch (error) {\r\n          setLoading(false);\r\n          if (typeof error === 'string') {\r\n            setError(error);\r\n          } else {\r\n            setError('Could not send Ethereum transaction');\r\n          }\r\n        }\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nexport default BoltzSubmarineSendEthereum;\r\n","import { createStyles, Grid, InputAdornment, makeStyles, TextField } from '@material-ui/core';\r\nimport BigNumber from 'bignumber.js';\r\nimport React, { ReactElement, useEffect } from 'react';\r\nimport { BoltzSwapResponse, StatusResponse, SwapUpdateEvent } from '../../../../constants/boltzSwap';\r\nimport CurrencyID from '../../../../constants/currency';\r\nimport { swapError } from '../../../../utils/boltzSwapStatus';\r\nimport Button from '../../../Button';\r\nimport DrawQrCode from '../../../DrawQrCode';\r\nimport BoltzAmount from '../BoltzAmount';\r\nimport BoltzSwapStep from '../BoltzSwapStep';\r\nimport BoltzSubmarineSendEthereum from './BoltzSubmarineSendEthereum';\r\n\r\ntype BoltzSubmarineSendProps = {\r\n  swapDetails: BoltzSwapResponse;\r\n  swapStatus?: StatusResponse;\r\n  preimageHash: string;\r\n  sendAsset: CurrencyID;\r\n  proceedToNext: () => void;\r\n};\r\n\r\nconst useStyles = makeStyles(() =>\r\n  createStyles({\r\n    qrCodeContainer: {\r\n      marginTop: '1rem',\r\n    },\r\n    input: {\r\n      borderRadius: 0,\r\n    },\r\n  })\r\n);\r\n\r\nconst BoltzSubmarineSend = (props: BoltzSubmarineSendProps): ReactElement => {\r\n  const classes = useStyles();\r\n  const { swapDetails, swapStatus, sendAsset, proceedToNext } = props;\r\n\r\n  const isWaitingForTransaction = !swapStatus || swapStatus.status === SwapUpdateEvent.InvoiceSet;\r\n\r\n  useEffect(() => {\r\n    if (swapStatus && swapError(swapStatus)) {\r\n      proceedToNext();\r\n    }\r\n  }, [swapStatus, proceedToNext]);\r\n\r\n  const title = (\r\n    <>\r\n      Send\r\n      <br />\r\n      <BoltzAmount\r\n        amountInMainUnit={new BigNumber(swapDetails.expectedAmount!)\r\n          .dividedBy(10 ** 8)\r\n          .toString()}\r\n        currency={sendAsset}\r\n      />\r\n    </>\r\n  );\r\n\r\n  return sendAsset === CurrencyID.BTC || sendAsset === CurrencyID.LTC\r\n    ? (\r\n      <BoltzSwapStep\r\n        title={title}\r\n        content={<>\r\n          <TextField\r\n            fullWidth\r\n            variant='outlined'\r\n            multiline\r\n            disabled\r\n            value={swapDetails.address}\r\n            InputProps={{\r\n              className: classes.input,\r\n              endAdornment: (\r\n                <InputAdornment position='end'>\r\n                  <Button\r\n                    onClick={() => navigator.clipboard?.writeText(swapDetails.address)}\r\n                  >\r\n                    Copy\r\n                  </Button>\r\n                </InputAdornment>\r\n              ),\r\n            }}\r\n          />\r\n          <Grid\r\n            item\r\n            container\r\n            justify='center'\r\n            className={classes.qrCodeContainer}\r\n          >\r\n            <DrawQrCode size={150} link={swapDetails.bip21!} />\r\n          </Grid>\r\n        </>}\r\n        mainButtonVisible\r\n        mainButtonText={isWaitingForTransaction ? 'Waiting for transaction' : 'Next'}\r\n        mainButtonDisabled={isWaitingForTransaction}\r\n        onMainButtonClick={proceedToNext}\r\n      />\r\n    )\r\n    : (\r\n      <BoltzSubmarineSendEthereum\r\n        sendCurrency={sendAsset}\r\n        title={title}\r\n        swapDetails={swapDetails}\r\n        preimageHash={props.preimageHash}\r\n        proceedToNext={proceedToNext}\r\n        swapStatus={swapStatus}\r\n      />\r\n    );\r\n};\r\n\r\nexport default BoltzSubmarineSend;\r\n","import React, { ReactElement, useCallback, useMemo, useState } from 'react';\r\nimport { BoltzSwapResponse, StatusResponse, SwapUpdateEvent } from '../../../../constants/boltzSwap';\r\nimport { useBoltzConfiguration } from '../../../../context/NetworkContext';\r\nimport { SwapFlowProps } from '../../../../pages/home';\r\nimport { removeRefundDetailsFromLocalStorage } from '../../../../utils/boltzRefund';\r\nimport { isFinal, startListening } from '../../../../utils/boltzSwapStatus';\r\nimport BoltzSubmarineSwapStatus from './../../components/BoltzSubmarineSwapStatus';\r\nimport BoltzSubmarineDestination from '../BoltzSubmarineDestination';\r\nimport BoltzSubmarineSend from '../BoltzSubmarineSend';\r\n\r\nconst BoltzSubmarineSwap = (props: SwapFlowProps): ReactElement => {\r\n  const [preimageHash, setPreimageHash] = useState<string | undefined>();\r\n  const [activeStep, setActiveStep] = useState(0);\r\n  const [swapDetails, setSwapDetails] = useState<BoltzSwapResponse | undefined>(\r\n    undefined,\r\n  );\r\n  const [swapStatus, setSwapStatus] = useState<StatusResponse | undefined>(\r\n    undefined,\r\n  );\r\n  const { apiEndpoint } = useBoltzConfiguration();\r\n\r\n  const proceedToNext = useCallback(\r\n    () => setActiveStep(oldValue => oldValue + 1),\r\n    [setActiveStep],\r\n  );\r\n\r\n  const destinationComplete = useMemo(\r\n    () =>\r\n      (preimageHash: string, swapDetails: BoltzSwapResponse) => {\r\n        setPreimageHash(preimageHash);\r\n        setSwapDetails(swapDetails);\r\n        proceedToNext();\r\n        startListening(swapDetails.id, apiEndpoint, (data, stream) => {\r\n          setSwapStatus(data);\r\n          if (isFinal(data)) {\r\n            stream.close();\r\n            if (SwapUpdateEvent.TransactionClaimed === data.status) {\r\n              removeRefundDetailsFromLocalStorage(swapDetails.id);\r\n            }\r\n          }\r\n        });\r\n      },\r\n    [proceedToNext, apiEndpoint],\r\n  );\r\n\r\n  const steps = [\r\n    <BoltzSubmarineDestination {...props} proceedToNext={destinationComplete} />,\r\n    <BoltzSubmarineSend\r\n      sendAsset={props.sendAsset}\r\n      swapDetails={swapDetails!}\r\n      swapStatus={swapStatus}\r\n      preimageHash={preimageHash!}\r\n      proceedToNext={proceedToNext}\r\n    />,\r\n    <BoltzSubmarineSwapStatus\r\n      swapStatus={swapStatus!}\r\n      swapId={swapDetails?.id}\r\n    />,\r\n  ];\r\n\r\n  return steps[activeStep];\r\n};\r\n\r\nexport default BoltzSubmarineSwap;\r\n","import { createStyles, makeStyles } from '@material-ui/core';\r\nimport React, { ReactElement } from 'react';\r\nimport { isCurrencyOnChain } from '../../constants/boltzRates';\r\nimport { SwapFlowProps } from '../../pages/home';\r\nimport BoltzReverseSwap from './components/BoltzReverseSwap';\r\nimport BoltzSubmarineSwap from './components/BoltzSubmarineSwap';\r\n\r\nconst useStyles = makeStyles(() =>\r\n  createStyles({\r\n    root: {\r\n      display: 'flex',\r\n      'flex-direction': 'column',\r\n      'justify-content': 'space-between',\r\n      flex: 1,\r\n      minHeight: 440,\r\n    },\r\n  })\r\n);\r\n\r\nconst BoltzSwapFlow = (props: SwapFlowProps): ReactElement => {\r\n  const classes = useStyles();\r\n  const { sendAsset, receiveAsset } = props;\r\n\r\n  const component = () => {\r\n    if (\r\n      isCurrencyOnChain(sendAsset)\r\n      && !isCurrencyOnChain(receiveAsset)\r\n    ) {\r\n      return <BoltzSubmarineSwap {...props} />;\r\n    }\r\n    if (\r\n      !isCurrencyOnChain(sendAsset)\r\n      && isCurrencyOnChain(receiveAsset)\r\n    ) {\r\n      return <BoltzReverseSwap {...props} />;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      {component() || <div>Not implemented</div>}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BoltzSwapFlow;\r\n","import Card from '@material-ui/core/Card';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Grid } from '@material-ui/core';\r\nimport React from 'react';\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    // height: 600,\r\n    borderRadius: '0.1rem',\r\n  },\r\n  content: {\r\n    padding: 0,\r\n    height: '100%',\r\n    '&:last-child': {\r\n      'padding-bottom': 0,\r\n    },\r\n  },\r\n  card: {\r\n    flex: 1,\r\n    margin: '2rem 0',\r\n  },\r\n});\r\n\r\nconst CardComponent = ({ children }) => {\r\n  const classes = useStyles();\r\n  return (\r\n    <Grid\r\n      container\r\n      direction='column'\r\n      alignItems='center'\r\n      className={classes.card}\r\n    >\r\n      <Grid item container justify='center'>\r\n        <Grid item xs={11} sm={9} md={6} lg={4} xl={3}>\r\n          <Card className={classes.root}>\r\n            <CardContent className={classes.content}>{children}</CardContent>\r\n          </Card>\r\n        </Grid>\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport default CardComponent;\r\n","import Decimal from 'decimal.js';\r\nimport { MoneroAmount } from './MoneroAmount';\r\n\r\nexport class BitcoinAmount {\r\n  static readonly decimals: number = 8;\r\n  static readonly satsInOneBtc: Decimal = new Decimal(10).pow(\r\n    new Decimal(BitcoinAmount.decimals),\r\n  );\r\n\r\n  private readonly satoshis: Decimal;\r\n\r\n  private constructor(satoshis: number | string | Decimal) {\r\n    this.satoshis = new Decimal(satoshis);\r\n  }\r\n\r\n  public static fromSat(satoshis: number | string): BitcoinAmount {\r\n    return new BitcoinAmount(satoshis);\r\n  }\r\n\r\n  public static fromBtc(btc: number | string): BitcoinAmount {\r\n    return new BitcoinAmount(new Decimal(btc).mul(BitcoinAmount.satsInOneBtc));\r\n  }\r\n\r\n  public static fromBtcRateAndAmount(\r\n    rate: BitcoinAmount,\r\n    xmr: MoneroAmount,\r\n  ): BitcoinAmount {\r\n    let piconeros_to_sat_adjust = new Decimal(10).pow(new Decimal(4));\r\n    let xmr_as_sat = xmr.asPic().div(piconeros_to_sat_adjust);\r\n    let sats = xmr_as_sat.mul(rate.asSat()).div(this.satsInOneBtc);\r\n\r\n    return new BitcoinAmount(sats);\r\n  }\r\n\r\n  public asSat(): Decimal {\r\n    return this.satoshis;\r\n  }\r\n\r\n  public asBtc(): Decimal {\r\n    return this.satoshis.div(BitcoinAmount.satsInOneBtc);\r\n  }\r\n\r\n  // Returns satoshis to precision (i.e. no decimal places)\r\n  // This is to be used when actually using the amounts against a blockchain client.\r\n  public toPrecision(): Decimal {\r\n    return this.satoshis.toDecimalPlaces(0);\r\n  }\r\n\r\n  public toBtcString(): string {\r\n    return this.asBtc().toDecimalPlaces(BitcoinAmount.decimals).toString();\r\n  }\r\n}\r\n","import Decimal from 'decimal.js';\r\nimport { Network } from '../../context/NetworkContext';\r\nimport { BitcoinAmount } from './BitcoinAmount';\r\n\r\n// TODO: Community member to provide mainnet params\r\nconst MAINNET: AsbParams = {\r\n  maxAccepted: BitcoinAmount.fromBtc(0),\r\n  minAccepted: BitcoinAmount.fromBtc(0),\r\n  multiaddr: '',\r\n  peerId: '',\r\n  spread: new Decimal(0),\r\n};\r\n\r\nconst TESTNET: AsbParams = {\r\n  maxAccepted: BitcoinAmount.fromBtc(0.02),\r\n  minAccepted: BitcoinAmount.fromBtc(0.002),\r\n  multiaddr: '/onion3/pzbmpqsyi2j2za2fwmiognupwozjlcoajbd3cgboetql7ooah63zywqd:9939',\r\n  peerId: '12D3KooWCdMKjesXMJz1SiZ7HgotrxuqhQJbP5sgBm2BwP1cqThi',\r\n  spread: new Decimal(0.02),\r\n};\r\n\r\nexport function fromKrakenPriceToQuote(\r\n  price: BitcoinAmount,\r\n  network: Network,\r\n): Quote {\r\n  let withSpreadDec = new Decimal(1).add(getSpread(network)).mul(price.asBtc());\r\n  let withSpread = BitcoinAmount.fromBtc(withSpreadDec.toString());\r\n\r\n  return {\r\n    max_quantity: getMax(network),\r\n    min_quantity: getMin(network),\r\n    price: withSpread,\r\n    timestamp: new Date(),\r\n  };\r\n}\r\n\r\nexport function getPeerId(network: Network): string {\r\n  return network === Network.Mainnet ? MAINNET.peerId : TESTNET.peerId;\r\n}\r\n\r\nexport function getMultiaddr(network: Network): string {\r\n  return network === Network.Mainnet ? MAINNET.multiaddr : TESTNET.multiaddr;\r\n}\r\n\r\nfunction getSpread(network: Network): Decimal {\r\n  return network === Network.Mainnet ? MAINNET.spread : TESTNET.spread;\r\n}\r\n\r\nfunction getMin(network: Network): BitcoinAmount {\r\n  return network === Network.Mainnet\r\n    ? MAINNET.minAccepted\r\n    : TESTNET.minAccepted;\r\n}\r\n\r\nfunction getMax(network: Network): BitcoinAmount {\r\n  return network === Network.Mainnet\r\n    ? MAINNET.maxAccepted\r\n    : TESTNET.maxAccepted;\r\n}\r\n\r\nexport interface Quote {\r\n  price: BitcoinAmount;\r\n  min_quantity: BitcoinAmount;\r\n  max_quantity: BitcoinAmount;\r\n  timestamp: Date;\r\n}\r\n\r\ninterface AsbParams {\r\n  multiaddr: string;\r\n  peerId: string;\r\n  minAccepted: BitcoinAmount;\r\n  maxAccepted: BitcoinAmount;\r\n  spread: Decimal;\r\n}\r\n","import Decimal from 'decimal.js';\r\nimport { BitcoinAmount } from './BitcoinAmount';\r\n\r\nexport class MoneroAmount {\r\n  static readonly decimals: number = 12;\r\n  static readonly picsInOneXmr: Decimal = new Decimal(10).pow(\r\n    new Decimal(MoneroAmount.decimals),\r\n  );\r\n\r\n  private constructor(private readonly piconeros: Decimal) {\r\n    this.piconeros = new Decimal(piconeros);\r\n  }\r\n\r\n  public static fromXmr(xmr: number | string) {\r\n    return new MoneroAmount(new Decimal(xmr).mul(MoneroAmount.picsInOneXmr));\r\n  }\r\n\r\n  public static fromPic(pic: number | string) {\r\n    return new MoneroAmount(new Decimal(pic));\r\n  }\r\n\r\n  public static fromBtcRateAndAmount(\r\n    rate: BitcoinAmount,\r\n    btc: BitcoinAmount,\r\n  ): MoneroAmount {\r\n    let xmr = new Decimal(btc.asSat()).div(rate.asSat());\r\n    return new MoneroAmount(xmr.mul(MoneroAmount.picsInOneXmr));\r\n  }\r\n\r\n  public asPic(): Decimal {\r\n    return this.piconeros;\r\n  }\r\n\r\n  public asXmr(): Decimal {\r\n    return this.piconeros.div(MoneroAmount.picsInOneXmr);\r\n  }\r\n\r\n  // Returns piconeros to precision (i.e. no decimal places)\r\n  // This is to be used when actually using the amounts against a blockchain client.\r\n  public toPrecision(): Decimal {\r\n    return this.piconeros.toDecimalPlaces(0);\r\n  }\r\n\r\n  public toXmrString(): string {\r\n    return this.asXmr().toDecimalPlaces(MoneroAmount.decimals).toString();\r\n  }\r\n}\r\n","import BigNumber from 'bignumber.js';\r\nimport CurrencyID from '../../constants/currency';\r\nimport { AmountPreview, CurrencyAmount, CurrencyPair, RatesFetcher } from '../../constants/rates';\r\nimport { Quote } from './Asb';\r\nimport { BitcoinAmount } from './BitcoinAmount';\r\nimport { MoneroAmount } from './MoneroAmount';\r\n\r\nexport class XmrBtcRateFetcher implements RatesFetcher {\r\n  constructor(private latestQuote: Quote | null, private error: Error | null) {}\r\n\r\n  previewGivenSend(\r\n    amountWithCurrency: CurrencyAmount,\r\n    pair: CurrencyPair,\r\n  ): Promise<AmountPreview> {\r\n    this.ensureNoRefreshErrors();\r\n    let send = BitcoinAmount.fromBtc(amountWithCurrency.amount.toString());\r\n    let price = this.getQuote().price;\r\n    let receive = receiveAmountForSendAmount(send, price);\r\n\r\n    let amount = new BigNumber(receive.asXmr().toString());\r\n\r\n    return Promise.resolve({\r\n      amountWithFees: {\r\n        amount: amount,\r\n        currency: CurrencyID.MONERO,\r\n      },\r\n    });\r\n  }\r\n\r\n  previewGivenReceive(\r\n    amountWithCurrency: CurrencyAmount,\r\n    pair: CurrencyPair,\r\n  ): Promise<AmountPreview> {\r\n    this.ensureNoRefreshErrors();\r\n    let receive_xmr = MoneroAmount.fromXmr(\r\n      amountWithCurrency.amount.toString(),\r\n    );\r\n\r\n    let send_btc = BitcoinAmount.fromBtcRateAndAmount(\r\n      this.getQuote().price,\r\n      receive_xmr,\r\n    );\r\n\r\n    let amount = new BigNumber(send_btc.asBtc().toString());\r\n\r\n    return Promise.resolve({\r\n      amountWithFees: {\r\n        amount: amount,\r\n        currency: CurrencyID.BTC,\r\n      },\r\n    });\r\n  }\r\n\r\n  isPairSupported(pair: CurrencyPair): boolean {\r\n    return pair[0] === CurrencyID.BTC && pair[1] === CurrencyID.MONERO;\r\n  }\r\n\r\n  maxQuantity(): BitcoinAmount {\r\n    return this.getQuote().max_quantity;\r\n  }\r\n\r\n  updateError(error: Error | null) {\r\n    this.error = error;\r\n    this.latestQuote = null;\r\n  }\r\n\r\n  updateQuote(quote: Quote) {\r\n    this.latestQuote = quote;\r\n    this.error = null;\r\n  }\r\n\r\n  private ensureNoRefreshErrors() {\r\n    if (this.error) {\r\n      throw this.error;\r\n    }\r\n  }\r\n\r\n  private getQuote(): Quote {\r\n    if (!this.latestQuote) {\r\n      throw new Error('Quote not available');\r\n    }\r\n\r\n    return this.latestQuote;\r\n  }\r\n}\r\n\r\nexport function receiveAmountForSendAmount(\r\n  send: BitcoinAmount,\r\n  price: BitcoinAmount,\r\n): MoneroAmount {\r\n  let receive = MoneroAmount.fromBtcRateAndAmount(price, send);\r\n\r\n  return receive;\r\n}\r\n","import { useCallback, useEffect, useState } from 'react';\r\nimport useWebSocket, { ReadyState } from 'react-use-websocket';\r\nimport { useNetwork } from '../../context/NetworkContext';\r\nimport { fromKrakenPriceToQuote, Quote } from './Asb';\r\nimport { BitcoinAmount } from './BitcoinAmount';\r\nimport { XmrBtcRateFetcher } from './XmrBtcRateFetcher';\r\n\r\nconst KRAKEN_WS = 'wss://ws.kraken.com';\r\n\r\nexport default function useComitRate(): {\r\n  rateFetcher: XmrBtcRateFetcher | null;\r\n  latestQuote: Quote | null;\r\n  error: Error | null;\r\n} {\r\n  let [quote, setQuote] = useState<{\r\n    quote: Quote | null;\r\n    error: Error | null;\r\n  }>({ quote: null, error: null });\r\n\r\n  let [xmrBtcRateFetcher, setXmrBtcRateFetcher] = useState<XmrBtcRateFetcher | null>(null);\r\n\r\n  let [latestKrakenPrice, setLatestKrakenPrice] = useState<{\r\n    price: BitcoinAmount | null;\r\n    error: Error | null;\r\n  }>({ price: null, error: null });\r\n\r\n  const { network } = useNetwork();\r\n\r\n  const { sendMessage, lastJsonMessage, readyState } = useWebSocket(KRAKEN_WS);\r\n\r\n  if (!xmrBtcRateFetcher) {\r\n    setXmrBtcRateFetcher(new XmrBtcRateFetcher(null, null));\r\n  }\r\n\r\n  let subscribeToXmrBtcTicker = useCallback(\r\n    () =>\r\n      sendMessage(\r\n        '{\"event\": \"subscribe\", \"pair\": [ \"XMR/XBT\" ], \"subscription\": { \"name\": \"ticker\"}}',\r\n      ),\r\n    [sendMessage],\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (readyState === ReadyState.OPEN && lastJsonMessage) {\r\n      if (lastJsonMessage.connectionID) {\r\n        subscribeToXmrBtcTicker();\r\n      }\r\n\r\n      if (\r\n        Array.isArray(lastJsonMessage)\r\n        && lastJsonMessage[2] === 'ticker'\r\n        && lastJsonMessage[1].a\r\n        && Array.isArray(lastJsonMessage[1].a)\r\n      ) {\r\n        let ask = lastJsonMessage[1].a[0];\r\n        let price = BitcoinAmount.fromBtc(ask);\r\n        setLatestKrakenPrice({ price, error: null });\r\n      }\r\n    } else if (readyState === ReadyState.CONNECTING) {\r\n      let error = new Error('Waiting for latest price...');\r\n      setLatestKrakenPrice({ price: null, error });\r\n    } else if (readyState === ReadyState.CLOSED) {\r\n      let error = new Error('Failed to fetch latest price');\r\n      setLatestKrakenPrice({ price: null, error });\r\n    }\r\n  }, [readyState, lastJsonMessage, subscribeToXmrBtcTicker]);\r\n\r\n  useEffect(() => {\r\n    if (latestKrakenPrice.price) {\r\n      let quote = fromKrakenPriceToQuote(latestKrakenPrice.price, network);\r\n      setQuote({\r\n        quote: quote,\r\n        error: null,\r\n      });\r\n      if (xmrBtcRateFetcher) {\r\n        xmrBtcRateFetcher.updateQuote(quote);\r\n      }\r\n    } else if (latestKrakenPrice.error) {\r\n      setQuote({\r\n        quote: null,\r\n        error: latestKrakenPrice.error,\r\n      });\r\n      if (xmrBtcRateFetcher) {\r\n        xmrBtcRateFetcher.updateError(latestKrakenPrice.error);\r\n      }\r\n    }\r\n  }, [latestKrakenPrice, network, xmrBtcRateFetcher]);\r\n\r\n  return {\r\n    rateFetcher: xmrBtcRateFetcher,\r\n    latestQuote: quote.quote ? quote.quote : null,\r\n    error: quote.error ? quote.error : null,\r\n  };\r\n}\r\n","import { MarketInterface } from 'tdex-sdk';\r\nimport CurrencyID from '../../../constants/currency';\r\nimport { CurrencyPair } from '../../../constants/rates';\r\n\r\nexport const ExplorerByChain: Record<'liquid' | 'regtest', string> = {\r\n  liquid: 'https://blockstream.info/liquid/api',\r\n  regtest: 'http://localhost:3001',\r\n};\r\n\r\nexport const EsploraByChain: Record<'liquid' | 'regtest', string> = {\r\n  liquid: 'https://blockstream.info/liquid',\r\n  regtest: 'http://localhost:5001',\r\n};\r\n\r\nexport interface Provider {\r\n  name: string;\r\n  endpoint: string;\r\n}\r\n\r\nexport interface ProviderWithMarket {\r\n  provider: Provider;\r\n  market: MarketInterface;\r\n}\r\n\r\nexport interface PriceWithFee {\r\n  amount: number;\r\n  asset: string;\r\n  balance: any;\r\n  fee: any;\r\n  price: any;\r\n}\r\n\r\ninterface AssetInfo {\r\n  hash: string;\r\n  precision: number;\r\n}\r\n\r\ntype AssetByCurrency = Record<\r\n  CurrencyID.LIQUID_BTC | CurrencyID.LIQUID_USDT | CurrencyID.LIQUID_CAD,\r\n  AssetInfo\r\n>;\r\n\r\ntype CurrencyByAsset = Record<\r\n  string,\r\n  CurrencyID.LIQUID_BTC | CurrencyID.LIQUID_USDT | CurrencyID.LIQUID_CAD\r\n>;\r\n\r\nconst LIQUID_BTC_REGTEST = '5ac9f65c0efcc4775e0baec4ec03abdde22473cd3cf33c0419ca290e0751b225';\r\nconst LIQUID_BTC = '6f0279e9ed041c3d710a9f57d0c02928416460c4b722ae3457a11eec381c526d';\r\nconst LIQUID_USDT = 'ce091c998b83c78bb71a632313ba3760f1763d9cfcffae02258ffa9865a37bd2';\r\nconst LIQUID_CAD = '0e99c1a6da379d1f4151fb9df90449d40d0608f6cb33a5bcbfc8c265f42bab0a';\r\n\r\nexport type CurrencyPairKey = string;\r\n\r\nexport const LBTC_USDT = `${CurrencyID.LIQUID_BTC}#${CurrencyID.LIQUID_USDT}`;\r\nexport const USDT_LBTC = `${CurrencyID.LIQUID_USDT}#${CurrencyID.LIQUID_BTC}`;\r\nexport const LBTC_LCAD = `${CurrencyID.LIQUID_BTC}#${CurrencyID.LIQUID_CAD}`;\r\nexport const LCAD_LBTC = `${CurrencyID.LIQUID_CAD}#${CurrencyID.LIQUID_BTC}`;\r\n\r\nexport const BaseQuoteByPair: Record<CurrencyPairKey, CurrencyPair> = {\r\n  [LBTC_USDT]: [CurrencyID.LIQUID_BTC, CurrencyID.LIQUID_USDT],\r\n  [USDT_LBTC]: [CurrencyID.LIQUID_BTC, CurrencyID.LIQUID_USDT],\r\n  [LBTC_LCAD]: [CurrencyID.LIQUID_BTC, CurrencyID.LIQUID_CAD],\r\n  [LCAD_LBTC]: [CurrencyID.LIQUID_BTC, CurrencyID.LIQUID_CAD],\r\n};\r\n\r\nconst LiquidAssetHashByCurrenyID: AssetByCurrency = {\r\n  [CurrencyID.LIQUID_BTC]: {\r\n    hash: LIQUID_BTC,\r\n    precision: 8,\r\n  },\r\n  [CurrencyID.LIQUID_USDT]: {\r\n    hash: LIQUID_USDT,\r\n    precision: 8,\r\n  },\r\n  [CurrencyID.LIQUID_CAD]: {\r\n    hash: LIQUID_CAD,\r\n    precision: 8,\r\n  },\r\n};\r\n\r\nconst RegtestAssetHashByCurrenyID: AssetByCurrency = {\r\n  [CurrencyID.LIQUID_BTC]: {\r\n    hash: LIQUID_BTC_REGTEST,\r\n    precision: 8,\r\n  },\r\n  [CurrencyID.LIQUID_USDT]: {\r\n    hash: process.env.REACT_APP_LIQUID_USDT_REGTEST!,\r\n    precision: 8,\r\n  },\r\n  [CurrencyID.LIQUID_CAD]: {\r\n    hash: process.env.REACT_APP_LIQUID_CAD_REGTEST!,\r\n    precision: 8,\r\n  },\r\n};\r\n\r\nconst LiquidCurrencyIDByAssetHash: CurrencyByAsset = {\r\n  [LIQUID_BTC]: CurrencyID.LIQUID_BTC,\r\n  [LIQUID_USDT]: CurrencyID.LIQUID_USDT,\r\n  [LIQUID_CAD]: CurrencyID.LIQUID_CAD,\r\n};\r\n\r\nconst RegtestCurrencyIDByAssetHash: CurrencyByAsset = {\r\n  [LIQUID_BTC_REGTEST]: CurrencyID.LIQUID_BTC,\r\n  [process.env.REACT_APP_LIQUID_USDT_REGTEST!]: CurrencyID.LIQUID_USDT,\r\n  [process.env.REACT_APP_LIQUID_CAD_REGTEST!]: CurrencyID.LIQUID_CAD,\r\n};\r\n\r\nexport const CurrencyToAssetByChain: Record<\r\n  'liquid' | 'regtest',\r\n  AssetByCurrency\r\n> = {\r\n  liquid: LiquidAssetHashByCurrenyID,\r\n  regtest: RegtestAssetHashByCurrenyID,\r\n};\r\n\r\nexport const AssetToCurrencyByChain: Record<\r\n  'liquid' | 'regtest',\r\n  CurrencyByAsset\r\n> = {\r\n  liquid: LiquidCurrencyIDByAssetHash,\r\n  regtest: RegtestCurrencyIDByAssetHash,\r\n};\r\n","import BigNumber from 'bignumber.js';\r\nimport CurrencyID from '../../../constants/currency';\r\nimport { CurrencyPair } from '../../../constants/rates';\r\nimport { BaseQuoteByPair, CurrencyPairKey } from '../constants';\r\n\r\nconst defaultPrecision = 8;\r\n\r\nexport function toSatoshi(\r\n  fractional: number,\r\n  precision: number = defaultPrecision,\r\n): number {\r\n  return new BigNumber(fractional)\r\n    .multipliedBy(new BigNumber(10).exponentiatedBy(precision))\r\n    .toNumber();\r\n}\r\n\r\nexport function fromSatoshi(\r\n  sats: number,\r\n  precision: number = defaultPrecision,\r\n): number {\r\n  return new BigNumber(sats)\r\n    .dividedBy(new BigNumber(10).exponentiatedBy(precision))\r\n    .toNumber();\r\n}\r\n\r\nexport function fromKey(x: CurrencyPairKey): CurrencyPair {\r\n  const [currencyA, currencyB] = x.split('#');\r\n  return [currencyA as CurrencyID, currencyB as CurrencyID];\r\n}\r\n\r\nexport function baseQuoteFromCurrencyPair(pair: CurrencyPair): CurrencyPair {\r\n  const key = toKey(pair);\r\n  return BaseQuoteByPair[key];\r\n}\r\n\r\nexport function toKey(x: CurrencyPair): CurrencyPairKey {\r\n  const [currencyA, currencyB] = x;\r\n  return `${currencyA}#${currencyB}`;\r\n}\r\n","import BigNumber from 'bignumber.js';\r\nimport { AmountPreview, CurrencyAmount, CurrencyPair, RatesFetcher, RatesFetcherOpts } from '../../../constants/rates';\r\nimport {\r\n  AssetToCurrencyByChain,\r\n  BaseQuoteByPair,\r\n  CurrencyPairKey,\r\n  CurrencyToAssetByChain,\r\n  Provider,\r\n  ProviderWithMarket,\r\n} from '../constants';\r\n\r\nimport { MarketInterface, TraderClient, TradeType } from 'tdex-sdk';\r\nimport { baseQuoteFromCurrencyPair, fromSatoshi, toKey, toSatoshi } from './format';\r\n\r\ninterface TdexFetcherOptions extends RatesFetcherOpts {\r\n  network: 'liquid' | 'regtest';\r\n  providersWithMarketByPair: Record<CurrencyPairKey, ProviderWithMarket[]>;\r\n}\r\n\r\nexport default class TdexFetcher implements RatesFetcher {\r\n  private network: 'liquid' | 'regtest';\r\n  private supportedPairs: CurrencyPairKey[];\r\n  private providersWithMarketByPair: Record<\r\n    CurrencyPairKey,\r\n    ProviderWithMarket[]\r\n  >;\r\n\r\n  constructor(options: TdexFetcherOptions) {\r\n    const { providersWithMarketByPair, network } = options;\r\n\r\n    this.network = network;\r\n    this.providersWithMarketByPair = providersWithMarketByPair;\r\n\r\n    this.supportedPairs = Object.keys(BaseQuoteByPair) as CurrencyPairKey[];\r\n  }\r\n\r\n  isPairSupported(pair: CurrencyPair): boolean {\r\n    return this.supportedPairs.includes(toKey(pair));\r\n  }\r\n\r\n  // PreviewGivenSend does the same thing as Preview with isSend = true\r\n  previewGivenSend(\r\n    amountWithCurrency: CurrencyAmount,\r\n    pair: CurrencyPair,\r\n  ): Promise<AmountPreview> {\r\n    if (!this.isPairSupported(pair)) throw new Error('pair is not supported');\r\n\r\n    return this.previewForPair(amountWithCurrency, pair, true);\r\n  }\r\n\r\n  // PreviewGivenReceive does the same thing as Preview with isSend = false\r\n  previewGivenReceive(\r\n    amountWithCurrency: CurrencyAmount,\r\n    pair: CurrencyPair,\r\n  ): Promise<AmountPreview> {\r\n    if (!this.isPairSupported(pair)) throw new Error('pair is not supported');\r\n\r\n    return this.previewForPair(amountWithCurrency, pair, false);\r\n  }\r\n\r\n  private async previewForPair(\r\n    amountWithCurrency: CurrencyAmount,\r\n    pair: CurrencyPair,\r\n    isSend: boolean = true,\r\n  ): Promise<AmountPreview> {\r\n    const amountInSatoshis = toSatoshi(\r\n      amountWithCurrency.amount.toNumber(),\r\n      CurrencyToAssetByChain[this.network][amountWithCurrency.currency]\r\n        .precision,\r\n    );\r\n\r\n    if (amountInSatoshis < 1) throw new Error('amount too low');\r\n\r\n    const [baseCurrency, quoteCurrency] = baseQuoteFromCurrencyPair(pair);\r\n\r\n    const providersForPair = this.providersWithMarketByPair[toKey([baseCurrency, quoteCurrency])];\r\n\r\n    if (!providersForPair) {\r\n      throw new Error('TDEX providers for the chosen pair are not reachable');\r\n    }\r\n\r\n    const isBaseComingIn = (isSend && amountWithCurrency.currency === baseCurrency)\r\n      || (!isSend && amountWithCurrency.currency !== quoteCurrency);\r\n\r\n    const tradeType = isBaseComingIn ? TradeType.SELL : TradeType.BUY;\r\n\r\n    let bestPrice;\r\n    let bestProvider;\r\n    for (const providerWithMarket of providersForPair) {\r\n      try {\r\n        const client = new TraderClient(providerWithMarket.provider.endpoint);\r\n        const prices = await client.marketPrice(\r\n          providerWithMarket.market,\r\n          tradeType,\r\n          amountInSatoshis,\r\n          CurrencyToAssetByChain[this.network][amountWithCurrency.currency].hash,\r\n        );\r\n\r\n        if (!prices || prices.length === 0) {\r\n          throw new Error('price fetching failed');\r\n        }\r\n\r\n        const [firstPrice] = prices;\r\n\r\n        if (tradeType === TradeType.BUY) {\r\n          if (\r\n            firstPrice.balance\r\n            && (!bestPrice\r\n              || firstPrice.balance.baseAmount > bestPrice.balance.baseAmount)\r\n          ) {\r\n            bestPrice = { ...firstPrice };\r\n            bestProvider = providerWithMarket;\r\n          }\r\n        } else {\r\n          if (\r\n            firstPrice.balance\r\n            && (!bestPrice\r\n              || firstPrice.balance.quoteAmount > bestPrice.balance.quoteAmount)\r\n          ) {\r\n            bestPrice = { ...firstPrice };\r\n            bestProvider = providerWithMarket;\r\n          }\r\n        }\r\n      } catch (e) {\r\n        console.error(e);\r\n        console.warn(\r\n          `TDEX provider ${providerWithMarket.provider.name} is not reachable`,\r\n        );\r\n        continue;\r\n      }\r\n    }\r\n\r\n    const event = new CustomEvent('bestProvider', { detail: bestProvider });\r\n    window.dispatchEvent(event);\r\n\r\n    const expectedCurrency = amountWithCurrency.currency === baseCurrency\r\n      ? quoteCurrency\r\n      : baseCurrency;\r\n\r\n    return {\r\n      amountWithFees: {\r\n        amount: new BigNumber(\r\n          fromSatoshi(\r\n            bestPrice.amount,\r\n            CurrencyToAssetByChain[this.network][expectedCurrency].precision,\r\n          ),\r\n        ),\r\n        currency: AssetToCurrencyByChain[this.network][bestPrice.asset],\r\n      },\r\n    };\r\n  }\r\n\r\n  public static async WithTdexProviders(\r\n    providers: Provider[],\r\n    network: 'liquid' | 'regtest',\r\n  ): Promise<TdexFetcherOptions> {\r\n    let providersWithMarketByPair = {};\r\n    for (const provider of providers) {\r\n      const client = new TraderClient(provider.endpoint);\r\n      let markets: MarketInterface[];\r\n\r\n      try {\r\n        markets = await client.markets();\r\n      } catch (e) {\r\n        throw new Error(`TDEX provider ${provider.name} is not reachable`);\r\n      }\r\n\r\n      markets.forEach((market: MarketInterface) => {\r\n        const { baseAsset, quoteAsset } = market;\r\n        const baseCurrency = AssetToCurrencyByChain[network][baseAsset];\r\n        const quoteCurrency = AssetToCurrencyByChain[network][quoteAsset];\r\n        const pairAsKey = toKey([baseCurrency, quoteCurrency]);\r\n\r\n        if (providersWithMarketByPair.hasOwnProperty(pairAsKey)) {\r\n          providersWithMarketByPair[pairAsKey].push({ provider, market });\r\n        } else {\r\n          providersWithMarketByPair[pairAsKey] = [{ provider, market }];\r\n        }\r\n      });\r\n    }\r\n\r\n    return { network, providersWithMarketByPair };\r\n  }\r\n}\r\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\r\nimport { ProviderWithMarket } from '../components/TdexSwapFlow/constants';\r\nimport { RootState } from './index';\r\n\r\n// Define a type for the slice state\r\ninterface TdexState {\r\n  bestProvider?: ProviderWithMarket;\r\n}\r\n\r\n// Define the initial state using that type\r\nexport const initialState: TdexState = {\r\n  bestProvider: undefined,\r\n};\r\n\r\nexport const tdexSlice = createSlice({\r\n  name: 'tdex',\r\n  // `createSlice` will infer the state type from the `initialState` argument\r\n  initialState,\r\n  reducers: {\r\n    // Use the PayloadAction type to declare the contents of `action.payload`\r\n    setBestProvider: (state, action: PayloadAction<ProviderWithMarket>) => {\r\n      state.bestProvider = action.payload;\r\n    },\r\n  },\r\n});\r\n\r\nexport const { setBestProvider } = tdexSlice.actions;\r\n\r\n// Other code such as selectors can use the imported `RootState` type\r\nexport const seletctBestProvider = (state: RootState) => state.tdex.bestProvider;\r\n\r\nexport default tdexSlice.reducer;\r\n","import React, { ReactElement } from 'react';\r\nimport NumberFormat from 'react-number-format';\r\n\r\ntype NumberInputProps = {\r\n  inputRef: (instance: NumberFormat | null) => void;\r\n  onChange: (event: { target: { name: string; value: string } }) => void;\r\n  name: string;\r\n  decimalScale: number;\r\n  negativeEnabled?: boolean;\r\n};\r\n\r\nconst NumberInput = (props: NumberInputProps): ReactElement => {\r\n  const { inputRef, onChange, negativeEnabled, decimalScale, ...other } = props;\r\n\r\n  return (\r\n    <NumberFormat\r\n      {...other}\r\n      getInputRef={inputRef}\r\n      onValueChange={values => {\r\n        onChange({\r\n          target: {\r\n            name: props.name,\r\n            value: values.value,\r\n          },\r\n        });\r\n      }}\r\n      isNumericString\r\n      decimalScale={decimalScale}\r\n      allowNegative={!!negativeEnabled}\r\n    />\r\n  );\r\n};\r\n\r\nexport default NumberInput;\r\n","import { TextField, TextFieldProps } from '@material-ui/core';\r\nimport React, { ReactElement } from 'react';\r\nimport NumberInput from './NumberInput';\r\n\r\ntype NumberFieldProps = TextFieldProps & {\r\n  decimalScale?: number;\r\n};\r\n\r\nconst NumberField = (props: NumberFieldProps): ReactElement => {\r\n  const { decimalScale, InputProps, inputProps, ...other } = props;\r\n\r\n  return (\r\n    <TextField\r\n      InputProps={{\r\n        inputComponent: NumberInput as any,\r\n        inputProps: { decimalScale: decimalScale, ...inputProps },\r\n        ...InputProps,\r\n      }}\r\n      {...other}\r\n    />\r\n  );\r\n};\r\n\r\nexport default NumberField;\r\n","import { Box, MenuItem, TextField } from '@material-ui/core';\r\nimport React from 'react';\r\n\r\nconst SelectComponent = props => {\r\n  const {\r\n    options,\r\n    variant,\r\n    defaultValue,\r\n    onChange,\r\n    value,\r\n    disabled,\r\n    disableUnderline,\r\n    className,\r\n  } = props;\r\n  const [option, setOption] = React.useState(\r\n    value.id || defaultValue.id || options[0].id,\r\n  );\r\n\r\n  React.useEffect(() => {\r\n    if (value.id !== option) {\r\n      setOption(value.id);\r\n    }\r\n  }, [option, value]);\r\n\r\n  const handleChange = event => {\r\n    const value = event.target.value;\r\n    const selectedOption = options.filter(option => option.id === value)[0];\r\n    setOption(value);\r\n    onChange(selectedOption);\r\n  };\r\n\r\n  return (\r\n    <Box>\r\n      <TextField\r\n        select\r\n        InputProps={{\r\n          disableUnderline,\r\n        }}\r\n        className={className}\r\n        value={option}\r\n        onChange={handleChange}\r\n        variant={variant}\r\n        disabled={disabled}\r\n        SelectProps={{ MenuProps: { disableScrollLock: true } }}\r\n      >\r\n        {options.map(option => (\r\n          <MenuItem key={option.id} value={option.id}>\r\n            {option.label || option.id}\r\n          </MenuItem>\r\n        ))}\r\n      </TextField>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default SelectComponent;\r\n","import { createStyles, makeStyles } from '@material-ui/core/styles';\r\nimport Skeleton from '@material-ui/lab/Skeleton';\r\nimport React from 'react';\r\nimport { CurrencyOptions } from '../../constants/currency';\r\nimport NumberField from '../NumberField';\r\nimport SelectComponent from '../Select';\r\n\r\nconst useStyles = makeStyles(() =>\r\n  createStyles({\r\n    selectAsset: {\r\n      width: '8rem',\r\n      '& .MuiSelect-select:focus': {\r\n        'background-color': 'inherit',\r\n      },\r\n      '& .MuiSelect-root': {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n      },\r\n    },\r\n  })\r\n);\r\n\r\nconst AssetSelector = props => {\r\n  const classes = useStyles();\r\n  const {\r\n    label,\r\n    value,\r\n    onAmountChange,\r\n    onAssetChange,\r\n    selectedAsset,\r\n    placeholder,\r\n    loading,\r\n    error,\r\n  } = props;\r\n\r\n  return loading\r\n    ? (\r\n      <Skeleton variant='text' height={58} animation={'wave'} />\r\n    )\r\n    : (\r\n      <NumberField\r\n        label={label}\r\n        value={value}\r\n        onChange={onAmountChange}\r\n        autoFocus\r\n        fullWidth\r\n        placeholder={placeholder}\r\n        error={!!error}\r\n        helperText={error}\r\n        InputProps={{\r\n          endAdornment: (\r\n            <SelectComponent\r\n              disableUnderline\r\n              className={classes.selectAsset}\r\n              options={CurrencyOptions}\r\n              onChange={onAssetChange}\r\n              value={selectedAsset}\r\n            />\r\n          ),\r\n        }}\r\n        InputLabelProps={{\r\n          shrink: true,\r\n        }}\r\n      />\r\n    );\r\n};\r\n\r\nexport default AssetSelector;\r\n","import { createStyles, Grid, makeStyles } from '@material-ui/core';\r\nimport React, { ReactElement } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { ROUTES } from '../../pages/home';\r\n\r\nconst useStyles = makeStyles(theme =>\r\n  createStyles({\r\n    root: {\r\n      marginBottom: '2rem',\r\n    },\r\n    link: {\r\n      color: theme.palette.text.primary,\r\n      fontSize: '1rem',\r\n      letterSpacing: '0.67px',\r\n      textDecoration: 'none',\r\n    },\r\n  })\r\n);\r\n\r\nexport default function BoltzRefundLink(): ReactElement {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Grid\r\n      item\r\n      container\r\n      justify='center'\r\n      alignItems='center'\r\n      wrap='nowrap'\r\n      spacing={1}\r\n      xs={12}\r\n      className={classes.root}\r\n    >\r\n      <Grid item>\r\n        <Link\r\n          to={ROUTES.BOLTZ_REFUND}\r\n          className={classes.link}\r\n        >\r\n          Check swap status or refund\r\n        </Link>\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n}\r\n","import { createStyles, makeStyles } from '@material-ui/core/styles';\r\nimport React, { ReactElement } from 'react';\r\nimport svgIcons from '../../utils/svgIcons';\r\nimport Button from '../Button';\r\n\r\nexport type SwapButtonProps = {\r\n  onClick: () => void;\r\n  disabled?: boolean;\r\n};\r\n\r\nconst useStyles = makeStyles(() =>\r\n  createStyles({\r\n    wrapper: {\r\n      display: 'flex',\r\n      justifyContent: 'center',\r\n      marginTop: '1rem',\r\n      marginBottom: '1rem',\r\n    },\r\n    button: {\r\n      width: 48,\r\n      minWidth: 48,\r\n      height: 48,\r\n      padding: 16,\r\n    },\r\n    icon: {\r\n      transform: 'rotate(270deg)',\r\n      margin: -3,\r\n    },\r\n    upIcon: {\r\n      opacity: 0.4,\r\n    },\r\n  })\r\n);\r\n\r\nconst SwapButton = ({ onClick, disabled }: SwapButtonProps): ReactElement => {\r\n  const classes = useStyles();\r\n\r\n  const upIconClass = `${classes.icon} ${classes.upIcon}`;\r\n\r\n  return (\r\n    <div className={classes.wrapper} onClick={onClick}>\r\n      <Button\r\n        variant='contained'\r\n        className={classes.button}\r\n        disabled={disabled}\r\n      >\r\n        <img\r\n          src={svgIcons.rightArrowPlain}\r\n          alt='Icon Up'\r\n          className={upIconClass}\r\n        />\r\n        <img\r\n          src={svgIcons.leftArrow}\r\n          alt='Icon Down'\r\n          className={classes.icon}\r\n        />\r\n      </Button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SwapButton;\r\n","export enum OS {\r\n  WINDOWS = 'Windows',\r\n  MAC = 'Darwin',\r\n  LINUX = 'Linux',\r\n  UNSUPPORTED = 'Unsupported',\r\n}\r\n\r\nexport const getOs = () => {\r\n  let os = OS.UNSUPPORTED;\r\n  if (navigator.appVersion.indexOf('Win') !== -1) {\r\n    os = OS.WINDOWS;\r\n  } else if (navigator.appVersion.indexOf('Mac') !== -1) {\r\n    os = OS.MAC;\r\n  } else if (navigator.appVersion.indexOf('Linux') !== -1) {\r\n    os = OS.LINUX;\r\n  }\r\n\r\n  return os;\r\n};\r\n","import { createStyles, makeStyles } from '@material-ui/core/styles';\r\nimport { Grid, Typography } from '@material-ui/core';\r\nimport BigNumber from 'bignumber.js';\r\nimport React, { useState } from 'react';\r\nimport { useHistory } from 'react-router';\r\nimport useBoltzFetcher from '../../constants/boltzFetcherHook';\r\nimport Currency, { CurrencyOption, CurrencyOptions } from '../../constants/currency';\r\nimport { AmountPreview, RatesFetcher } from '../../constants/rates';\r\nimport { SwapProvider } from '../../constants/swap';\r\nimport { buildUrl, ROUTES } from '../../pages/home';\r\nimport { getSwapProvider } from '../../utils/swapProvider';\r\nimport useComitFetcher from '../ComitSwapFlow/useComitFetcher';\r\nimport useTdexFetcher from '../TdexSwapFlow/utils/tdexFetcherHook';\r\nimport AssetSelector from '../AssetSelector';\r\nimport BoltzRefundLink from '../BoltzRefundLink';\r\nimport Button from '../Button';\r\nimport CardComponent from '../Card';\r\nimport ErrorMessage from '../ErrorMessage';\r\nimport SwapButton from '../SwapButton';\r\n\r\nconst useStyles = makeStyles(() =>\r\n  createStyles({\r\n    root: {\r\n      display: 'flex',\r\n      'flex-direction': 'column',\r\n      'justify-content': 'space-between',\r\n      flex: 1,\r\n    },\r\n    content: {\r\n      padding: '2rem',\r\n    },\r\n    text: {\r\n      marginBottom: '1rem',\r\n      fontSize: '1.5rem',\r\n      lineHeight: 'normal',\r\n      letterSpacing: '1px',\r\n    },\r\n    amount: {\r\n      display: 'flex',\r\n      justifyContent: 'center',\r\n      marginBottom: '1rem',\r\n    },\r\n    right: {\r\n      display: 'flex',\r\n      justifyContent: 'flex-end',\r\n    },\r\n    amountscontainer: {\r\n      marginTop: '1rem',\r\n    },\r\n    errorMessageContainer: {\r\n      minHeight: '1.5rem',\r\n      marginTop: '1rem',\r\n    },\r\n  })\r\n);\r\n\r\nexport type ChooseTradingPairProps = {};\r\n\r\nconst ChooseTradingPair = (_props: ChooseTradingPairProps) => {\r\n  const classes = useStyles();\r\n\r\n  const [sendAsset, setSendAsset] = useState(Currency.BTC);\r\n  const [receiveAsset, setReceiveAsset] = useState(Currency.LIGHTNING_BTC);\r\n  const [sendAmount, setSendAmount] = useState('');\r\n  const [receiveAmount, setReceiveAmount] = useState('');\r\n  const [sendAmountError, setSendAmountError] = useState('');\r\n  const [receiveAmountError, setReceiveAmountError] = useState('');\r\n  const [isPreviewing, setIsPreviewing] = useState(false);\r\n\r\n  const history = useHistory();\r\n\r\n  const swapProvider = getSwapProvider(sendAsset, receiveAsset);\r\n\r\n  // TODO: Should be handled in a reducer\r\n  const [previewValueError, setPreviewValueError] = useState<Error | null>(\r\n    null,\r\n  );\r\n\r\n  const sendCurrency = CurrencyOptions.find(\r\n    currency => currency.id === sendAsset,\r\n  )!;\r\n  const receiveCurrency = CurrencyOptions.find(\r\n    currency => currency.id === receiveAsset,\r\n  )!;\r\n\r\n  const nextDisabled = isPreviewing\r\n    || Number(sendAmount) === 0\r\n    || Number(receiveAmount) === 0\r\n    || !swapProvider\r\n    || !!receiveAmountError;\r\n\r\n  const tdexFetcher = useTdexFetcher();\r\n  const boltzFetcher = useBoltzFetcher();\r\n  const comitFetcher = useComitFetcher();\r\n\r\n  let ratesFetcher: RatesFetcher | null;\r\n  switch (swapProvider) {\r\n    case SwapProvider.TDEX:\r\n      ratesFetcher = tdexFetcher;\r\n      break;\r\n    case SwapProvider.COMIT:\r\n      ratesFetcher = comitFetcher;\r\n      break;\r\n    case SwapProvider.BOLTZ:\r\n      ratesFetcher = boltzFetcher;\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n\r\n  const amountIsPositive = (x: any): boolean => {\r\n    if (!Number.isNaN(x) && Number(x) > 0) {\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  };\r\n\r\n  const onSendAmountChange = async (\r\n    e: React.ChangeEvent<HTMLTextAreaElement | HTMLInputElement>,\r\n  ) => {\r\n    setSendAmountError('');\r\n    if (isPreviewing) return;\r\n\r\n    const value = e.target.value;\r\n    setSendAmount(value);\r\n\r\n    // preview other amount\r\n    if (ratesFetcher && amountIsPositive(value)) {\r\n      setIsPreviewing(true);\r\n\r\n      const amount = new BigNumber(value);\r\n\r\n      try {\r\n        setPreviewValueError(null);\r\n        const receiveValue: AmountPreview = await ratesFetcher.previewGivenSend(\r\n          {\r\n            amount,\r\n            currency: sendCurrency.id,\r\n          },\r\n          [sendCurrency.id, receiveCurrency.id],\r\n        );\r\n\r\n        setReceiveAmount(\r\n          convertAmountToString(receiveValue.amountWithFees.amount),\r\n        );\r\n        await validateReceiveLimits(receiveValue.amountWithFees.amount);\r\n        setIsPreviewing(false);\r\n      } catch (e) {\r\n        if (!previewValueError) {\r\n          setPreviewValueError(e);\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  const onReceiveAmountChange = async (\r\n    e: React.ChangeEvent<HTMLTextAreaElement | HTMLInputElement>,\r\n  ) => {\r\n    setReceiveAmountError('');\r\n    if (isPreviewing) return;\r\n\r\n    const value = e.target.value;\r\n    setReceiveAmount(value);\r\n\r\n    // preview other amount\r\n    if (ratesFetcher && amountIsPositive(value)) {\r\n      setIsPreviewing(true);\r\n\r\n      const amount = new BigNumber(value);\r\n      try {\r\n        validateReceiveLimits(amount);\r\n\r\n        setPreviewValueError(null);\r\n        const sendValue: AmountPreview = await ratesFetcher.previewGivenReceive(\r\n          {\r\n            amount,\r\n            currency: receiveCurrency.id,\r\n          },\r\n          [sendCurrency.id, receiveCurrency.id],\r\n        );\r\n\r\n        setSendAmount(convertAmountToString(sendValue.amountWithFees.amount));\r\n        setIsPreviewing(false);\r\n      } catch (e) {\r\n        if (!previewValueError) {\r\n          setPreviewValueError(e);\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  const validateReceiveLimits = async (receiveAmount: BigNumber) => {\r\n    if (ratesFetcher?.getLimits) {\r\n      const limits = await ratesFetcher.getLimits([\r\n        sendCurrency.id,\r\n        receiveCurrency.id,\r\n      ]);\r\n      if (receiveAmount.gt(limits.maximal)) {\r\n        setReceiveAmountError(\r\n          `Max amount is ${convertAmountToString(limits.maximal)}`,\r\n        );\r\n      } else if (receiveAmount.lt(limits.minimal)) {\r\n        setReceiveAmountError(\r\n          `Min amount is ${convertAmountToString(limits.minimal)}`,\r\n        );\r\n      }\r\n    }\r\n  };\r\n\r\n  const convertAmountToString = (amount: BigNumber): string =>\r\n    amount.toNumber().toLocaleString('en-US', {\r\n      maximumFractionDigits: 8,\r\n    });\r\n\r\n  const renderCryptoOptions = () => {\r\n    return (\r\n      <Grid container justify='center' direction='row' alignItems='center'>\r\n        <Grid item xs={12}>\r\n          <AssetSelector\r\n            label={'You send'}\r\n            value={sendAmount}\r\n            placeholder={'0.00'}\r\n            onAmountChange={onSendAmountChange}\r\n            onAssetChange={(currency: CurrencyOption) => setSendAsset(currency.id)}\r\n            selectedAsset={sendCurrency}\r\n            error={sendAmountError}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12}>\r\n          <SwapButton\r\n            onClick={() => {\r\n              setSendAsset(receiveCurrency.id);\r\n              setReceiveAsset(sendCurrency.id);\r\n            }}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12}>\r\n          <AssetSelector\r\n            label={'You receive'}\r\n            value={receiveAmount}\r\n            placeholder={'0.00'}\r\n            onAmountChange={onReceiveAmountChange}\r\n            onAssetChange={(currency: CurrencyOption) => setReceiveAsset(currency.id)}\r\n            selectedAsset={receiveCurrency}\r\n            error={receiveAmountError}\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <CardComponent>\r\n        <div className={classes.root}>\r\n          <Grid container justify='flex-start' className={classes.content}>\r\n            <Typography className={classes.text} component='h2' align='left'>\r\n              Swap\r\n            </Typography>\r\n            {renderCryptoOptions()}\r\n            <Grid\r\n              item\r\n              container\r\n              justify='center'\r\n              className={classes.errorMessageContainer}\r\n            >\r\n              {!swapProvider && (\r\n                <ErrorMessage message='Trading pair not supported' />\r\n              )}\r\n              {previewValueError\r\n                ? (\r\n                  <ErrorMessage message={previewValueError.message} />\r\n                )\r\n                : (\r\n                  <></>\r\n                )}\r\n            </Grid>\r\n          </Grid>\r\n          <Button\r\n            fullWidth\r\n            variant='contained'\r\n            color='primary'\r\n            disabled={nextDisabled}\r\n            onClick={() => {\r\n              let params = new URLSearchParams();\r\n              params.append('sendAmount', sendAmount);\r\n              params.append('receiveAmount', receiveAmount);\r\n\r\n              history.push(buildUrl(ROUTES.NEW_SWAP, {\r\n                swapProvider,\r\n                sendAsset,\r\n                receiveAsset,\r\n              }, params));\r\n            }}\r\n          >\r\n            Next\r\n          </Button>\r\n        </div>\r\n      </CardComponent>\r\n      {swapProvider === SwapProvider.BOLTZ\r\n        && <BoltzRefundLink />}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ChooseTradingPair;\r\n","import Currency from '../constants/currency';\r\nimport { Direction, SwapProvider, swapProviders } from '../constants/swap';\r\n\r\nexport const getSwapProvider = (\r\n  sendAsset: Currency,\r\n  receiveAsset: Currency,\r\n): SwapProvider | undefined => {\r\n  for (const [key, value] of Object.entries(swapProviders)) {\r\n    if (\r\n      value.some(\r\n        provider_pair =>\r\n          ((provider_pair.direction === Direction.BOTH\r\n            && provider_pair.pair.includes(sendAsset)\r\n            && provider_pair.pair.includes(receiveAsset))\r\n            || (provider_pair.direction === Direction.SINGLE\r\n              && provider_pair.pair[0] === sendAsset\r\n              && provider_pair.pair[1] === receiveAsset))\r\n          && (sendAsset !== receiveAsset\r\n            || provider_pair.pair[0] === provider_pair.pair[1]),\r\n      )\r\n    ) {\r\n      return key as SwapProvider;\r\n    }\r\n  }\r\n};\r\n","import { useCallback, useEffect, useState } from 'react';\r\nimport { RatesFetcher } from '../../../constants/rates';\r\nimport TdexFetcher from './tdexFetcher';\r\n\r\nimport { useAppDispatch } from '../../../store/hooks';\r\nimport { setBestProvider } from '../../../store/tdex-slice';\r\n\r\nexport default function useTdexFetcher(): RatesFetcher | null {\r\n  const dispatch = useAppDispatch();\r\n  const stableDispatch = useCallback(dispatch, [dispatch]);\r\n  let [fetcher, setFetcher] = useState<RatesFetcher | null>(null);\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      let liquidNetwork: 'liquid' | 'regtest' = 'regtest';\r\n      let listOfProviders = [\r\n        {\r\n          name: 'development daemon',\r\n          endpoint: 'http://localhost:9945',\r\n        },\r\n      ];\r\n\r\n      if (process.env.NODE_ENV === 'production') {\r\n        const result = await fetch(\r\n          `https://raw.githubusercontent.com/TDex-network/tdex-registry/master/registry.json`,\r\n        );\r\n        listOfProviders = await result.json();\r\n        liquidNetwork = 'liquid';\r\n      }\r\n\r\n      // async instantiation using the The Functional Options Pattern\r\n      // https://betterprogramming.pub/how-to-write-an-async-class-constructor-in-typescript-javascript-7d7e8325c35e\r\n\r\n      try {\r\n        // start tdex fetcher  with the providers from tdex registry\r\n        const tdexFetcher = new TdexFetcher(\r\n          await TdexFetcher.WithTdexProviders(listOfProviders, liquidNetwork),\r\n        );\r\n        setFetcher(tdexFetcher);\r\n\r\n        // we use browser events to dispatch redux action just before the previewGien* of the RatesFetcher returns\r\n        window.addEventListener(\r\n          'bestProvider',\r\n          (evt: any) => {\r\n            stableDispatch(setBestProvider((evt as CustomEvent).detail));\r\n          },\r\n          false,\r\n        );\r\n      } catch (e) {\r\n        console.error(e);\r\n        return;\r\n      }\r\n    })();\r\n  }, [stableDispatch]);\r\n\r\n  return fetcher;\r\n}\r\n","import { RatesFetcher } from '../../constants/rates';\r\nimport useComitRate from './useComitRate';\r\n\r\nexport default function useComitFetcher(): RatesFetcher | null {\r\n  const comitRate = useComitRate();\r\n  return comitRate.rateFetcher;\r\n}\r\n","import { createStyles, makeStyles } from '@material-ui/core/styles';\r\nimport FileCopyIcon from '@material-ui/icons/FileCopy';\r\nimport { Avatar, Box, ClickAwayListener, IconButton, Tooltip } from '@material-ui/core';\r\nimport React, { ReactElement, useEffect, useState } from 'react';\r\nimport { TextValidator, ValidatorForm } from 'react-material-ui-form-validator';\r\nimport CurrencyID from '../../constants/currency';\r\nimport { Network, useNetwork } from '../../context/NetworkContext';\r\nimport { getMultiaddr, getPeerId } from './Asb';\r\nimport { BitcoinAmount } from './BitcoinAmount';\r\nimport useComitRate from './useComitRate';\r\nimport useDownloadUrl from './useDownloadUrl';\r\nimport { getOs, OS } from './utils';\r\nimport { receiveAmountForSendAmount } from './XmrBtcRateFetcher';\r\n\r\n// We only care about the send amount\r\n// The receive amount it calculated internally in this component independent of what is displayed in ChooseTradingPair\r\ntype Props = {\r\n  sendAmount: string;\r\n  sendAsset: CurrencyID;\r\n};\r\n\r\nconst ComitSwapFlow = ({ sendAmount, sendAsset }: Props): ReactElement => {\r\n  const { latestQuote: quote, error } = useComitRate();\r\n  const downloadUrl = useDownloadUrl();\r\n\r\n  const [copyTooltipOpen, setCopyTooltipOpen] = React.useState(false);\r\n  const handleCopyTooltipClose = () => {\r\n    setCopyTooltipOpen(false);\r\n  };\r\n  const handleCopyTooltipOpen = () => {\r\n    setCopyTooltipOpen(true);\r\n  };\r\n\r\n  const { network } = useNetwork();\r\n  const classes = useStyles();\r\n\r\n  const [moneroAddress, setMoneroAddress] = useState<string>('');\r\n  const [validMoneroAddress, setValidMoneroAddress] = useState<string | null>(\r\n    null,\r\n  );\r\n\r\n  useEffect(() => {\r\n    setValidMoneroAddress(null);\r\n    setMoneroAddress('');\r\n  }, [network]);\r\n\r\n  let monero_address_regex_str_testnet = '^5([0-9]|[A-B])(.){93}$';\r\n  let monero_address_regex_str_mainnet = '^4([0-9]|[A-B])(.){93}$';\r\n\r\n  let monero_address_regex_str = network === Network.Mainnet\r\n    ? monero_address_regex_str_mainnet\r\n    : monero_address_regex_str_testnet;\r\n  let monero_address_regex = new RegExp(monero_address_regex_str);\r\n  let monero_address_validator = 'matchRegexp:' + monero_address_regex_str;\r\n\r\n  let swapExecCommand = './swap';\r\n  if (getOs() === OS.WINDOWS) {\r\n    swapExecCommand = 'start /b \"swap\" swap.exe';\r\n  }\r\n\r\n  if (sendAsset !== 'BTC') {\r\n    return (\r\n      <div>\r\n        Only buying XMR is supported at the moment (you send BTC, you receive XMR)\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // TODO: Properly distinguish between error and status...\r\n  if (error) {\r\n    return <div>{error.message}</div>;\r\n  }\r\n\r\n  if (!quote) {\r\n    return <div>Loading latest price...</div>;\r\n  }\r\n\r\n  let youSend = BitcoinAmount.fromBtc(sendAmount);\r\n  let youReceive = receiveAmountForSendAmount(youSend, quote.price);\r\n\r\n  return (\r\n    <div>\r\n      <Box\r\n        display='flex'\r\n        flexDirection='row'\r\n        alignItems='center'\r\n        p={1}\r\n        m={1}\r\n        className={classes.text}\r\n      >\r\n        You send\r\n        <Box className={classes.amount}>{youSend.toBtcString() + ' BTC'}</Box>\r\n        and receive approx.\r\n        <Box className={classes.amount}>\r\n          {youReceive.toXmrString() + ' XMR'}\r\n        </Box>\r\n      </Box>\r\n      <Box\r\n        display='flex'\r\n        flexDirection='row'\r\n        alignItems='center'\r\n        p={1}\r\n        m={1}\r\n        className={classes.text}\r\n      >\r\n        Provider's minimum send quantity per swap:{\" \"}\r\n        <Box className={classes.amount}>\r\n          {quote.min_quantity.toBtcString()} BTC\r\n        </Box>\r\n      </Box>\r\n      <Box\r\n        display='flex'\r\n        flexDirection='row'\r\n        alignItems='center'\r\n        p={1}\r\n        m={1}\r\n        className={classes.text}\r\n      >\r\n        Provider's maximum send quantity per swap:{\" \"}\r\n        <Box className={classes.amount}>\r\n          {quote.max_quantity.toBtcString()} BTC\r\n        </Box>\r\n      </Box>\r\n      <Box display='flex' flexDirection='row' alignItems='center' p={1} m={1}>\r\n        <Avatar className={classes.step_number}>1</Avatar>\r\n        <a href={downloadUrl} download className={classes.step_text}>\r\n          Download swap CLI\r\n        </a>\r\n      </Box>\r\n\r\n      <Box component='span' display='block' p={1} m={1}>\r\n        <Box display='flex' flexDirection='row' alignItems='center'>\r\n          <Avatar className={classes.step_number}>2</Avatar>\r\n          <Box className={classes.step_text}>\r\n            Enter Monero stagenet address to receive XMR:\r\n          </Box>\r\n        </Box>\r\n        <Box component='span' display='block' mt={1}>\r\n          <ValidatorForm onSubmit={() => {}}>\r\n            <TextValidator\r\n              id='moneroAddress'\r\n              label='Your Monero stagenet wallet address'\r\n              fullWidth={true}\r\n              value={moneroAddress}\r\n              onChange={event => {\r\n                const val = event.target.value;\r\n\r\n                // TODO: can access internal error state instead somehow?\r\n                if (monero_address_regex.exec(val)) {\r\n                  setValidMoneroAddress(val);\r\n                } else {\r\n                  setValidMoneroAddress(null);\r\n                }\r\n\r\n                setMoneroAddress(val);\r\n              }}\r\n              validators={[monero_address_validator]}\r\n              errorMessages={['Invalid Monero Stagenet Address']}\r\n            />\r\n          </ValidatorForm>\r\n        </Box>\r\n      </Box>\r\n      {validMoneroAddress\r\n        ? (\r\n          <Box>\r\n            <Box\r\n              display='flex'\r\n              flexDirection='row'\r\n              alignItems='center'\r\n              p={1}\r\n              m={1}\r\n            >\r\n              <Avatar className={classes.step_number}>3</Avatar>\r\n              <Box className={classes.step_text}>\r\n                Copy command to execute swap in CLI (*):\r\n              </Box>\r\n            </Box>\r\n            <Box\r\n              display='flex'\r\n              p={1}\r\n              m={1}\r\n              flexDirection='row'\r\n              alignItems='center'\r\n            >\r\n              <Box\r\n                id='command'\r\n                overflow='scroll'\r\n                whiteSpace='nowrap'\r\n                className={classes.text}\r\n              >\r\n                {swapExecCommand} {network === Network.Mainnet ? '' : '--testnet'} buy-xmr --seller-addr=\r\n                {getMultiaddr(network).toString()} --seller-peer-id=\r\n                {getPeerId(network).toString()} --receive-address={moneroAddress}\r\n              </Box>\r\n              <Box flexBasis={0}>\r\n                <ClickAwayListener onClickAway={handleCopyTooltipClose}>\r\n                  <div>\r\n                    <Tooltip\r\n                      PopperProps={{\r\n                        disablePortal: true,\r\n                      }}\r\n                      onClose={handleCopyTooltipClose}\r\n                      open={copyTooltipOpen}\r\n                      disableFocusListener\r\n                      disableHoverListener\r\n                      disableTouchListener\r\n                      title='Command copied to clipboard'\r\n                      placement='right'\r\n                    >\r\n                      <IconButton\r\n                        color='primary'\r\n                        onClick={() => {\r\n                          let command = document.getElementById('command');\r\n                          if (command) {\r\n                            navigator.clipboard.writeText(command.innerText);\r\n                            handleCopyTooltipOpen();\r\n                          }\r\n                        }}\r\n                      >\r\n                        <FileCopyIcon fontSize='large' />\r\n                      </IconButton>\r\n                    </Tooltip>\r\n                  </div>\r\n                </ClickAwayListener>\r\n              </Box>\r\n            </Box>\r\n            <Box display='block' p={1} m={1}>\r\n              (*) Assumes that you run the command in the folder where you downloaded and unpacked the swap CLI binary!\r\n            </Box>\r\n          </Box>\r\n        )\r\n        : (\r\n          <Box display='flex' flexDirection='row' alignItems='center' p={1} m={1}>\r\n            <Avatar className={classes.step_number_inactive}>3</Avatar>\r\n            <Box className={classes.step_text_inactive}>\r\n              Enter valid Monero Address to see Command\r\n            </Box>\r\n          </Box>\r\n        )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ComitSwapFlow;\r\n\r\nconst useStyles = makeStyles(theme =>\r\n  createStyles({\r\n    amount: {\r\n      color: theme.palette.primary.main,\r\n      marginRight: 5,\r\n      marginLeft: 5,\r\n    },\r\n    text: {\r\n      color: 'white',\r\n      fontSize: 16,\r\n    },\r\n    step_text: {\r\n      color: theme.palette.primary.main,\r\n      fontSize: 18,\r\n    },\r\n    step_number: {\r\n      borderColor: theme.palette.primary.main,\r\n      borderWidth: 3,\r\n      borderStyle: 'solid',\r\n      color: theme.palette.getContrastText(theme.palette.primary.dark),\r\n      backgroundColor: theme.palette.primary.dark,\r\n      fontWeight: 1000,\r\n      marginRight: 10,\r\n    },\r\n    step_text_inactive: {\r\n      color: 'gray',\r\n      fontSize: 18,\r\n    },\r\n    step_number_inactive: {\r\n      borderColor: 'darkgray',\r\n      borderWidth: 3,\r\n      borderStyle: 'solid',\r\n      color: 'white',\r\n      backgroundColor: 'gray',\r\n      fontWeight: 1000,\r\n      marginRight: 10,\r\n    },\r\n  })\r\n);\r\n","import axios from 'axios';\r\nimport { useEffect, useState } from 'react';\r\nimport { getOs } from './utils';\r\n\r\nconst GITHUB_RELEASE_URL = 'https://api.github.com/repos/comit-network/xmr-btc-swap/releases/latest';\r\n\r\nexport default function useDownloadUrl() {\r\n  const downloadUrlPlaceholder = 'https://github.com/comit-network/xmr-btc-swap/releases/latest';\r\n  const [downloadUrl, setDownloadUrl] = useState<string>(\r\n    downloadUrlPlaceholder,\r\n  );\r\n\r\n  useEffect(() => {\r\n    axios.get(GITHUB_RELEASE_URL).then(res => {\r\n      let gh = res.data;\r\n      const os = getOs();\r\n      for (let asset of gh.assets) {\r\n        if (asset.name.startsWith('swap') && asset.name.includes(os)) {\r\n          setDownloadUrl(asset.browser_download_url);\r\n        }\r\n      }\r\n    });\r\n  }, [setDownloadUrl]);\r\n\r\n  return downloadUrl;\r\n}\r\n","import { Box, MenuItem, TextField } from '@material-ui/core';\r\nimport React from 'react';\r\nimport { Network, useNetwork } from '../../context/NetworkContext';\r\n\r\nconst NetworkSelection = () => {\r\n  const { network, setNetwork } = useNetwork();\r\n\r\n  return (\r\n    <Box style={{ marginTop: '2rem' }}>\r\n      <TextField\r\n        select\r\n        className={'currency-options'}\r\n        value={network}\r\n        onChange={event => {\r\n          setNetwork(event.target.value! as Network);\r\n        }}\r\n        variant={'outlined'}\r\n        SelectProps={{ MenuProps: { disableScrollLock: true } }}\r\n      >\r\n        {Object.entries(Network).map(([key, value]) => (\r\n          <MenuItem key={key} value={value}>\r\n            {key}\r\n          </MenuItem>\r\n        ))}\r\n      </TextField>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default NetworkSelection;\r\n","export const defaultBackground = '#1F1645'; \r\nexport const defaultBackgroundLight = '#674C4C';\r\nexport const primaryTextColor = '#f2f2f2'; // whiteish\r\nexport const ternaryTextColor = '#636363';\r\n\r\nexport const theme = {\r\n  typography: {\r\n    fontFamily: '\"ApercuProMedium\", \"Roboto\", \"Helvetica\", \"Arial\", sans-serif',\r\n  },\r\n  palette: {\r\n    type: 'dark',\r\n    text: {\r\n      primary: primaryTextColor,\r\n      secondary: '#979797',\r\n    },\r\n    background: {\r\n      default: defaultBackground,\r\n      paper: defaultBackgroundLight,\r\n    },\r\n    primary: {\r\n      main: '#f15a24', // orange\r\n      contrastText: '#0c0c0c',\r\n    },\r\n    secondary: {\r\n      main: '#f2f2f2', // whiteish\r\n    },\r\n  },\r\n};\r\n","import { createStyles, Grid, makeStyles, Typography } from '@material-ui/core';\r\nimport React, { ReactElement } from 'react';\r\nimport { SwapProvider as Provider } from '../../constants/swap';\r\nimport svgIcons from '../../utils/svgIcons';\r\nimport { ternaryTextColor } from '../App/theme';\r\n\r\nexport type Props = {\r\n  provider: Provider;\r\n};\r\n\r\ntype ProviderInfo = {\r\n  providerName: Provider;\r\n  logos: ProviderLogo[];\r\n};\r\n\r\ntype ProviderLogo = {\r\n  source: string;\r\n  alt: string;\r\n};\r\n\r\nconst useStyles = makeStyles(() =>\r\n  createStyles({\r\n    text: {\r\n      fontFamily: 'ApercuProRegular',\r\n      color: ternaryTextColor,\r\n      fontSize: '1rem',\r\n      letterSpacing: '1px',\r\n    },\r\n    imageContainer: {\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n    },\r\n    image: {\r\n      height: '1.25rem',\r\n    },\r\n    root: {\r\n      marginBottom: '2rem',\r\n    },\r\n  })\r\n);\r\n\r\nconst providerInfo: ProviderInfo[] = [\r\n  {\r\n    providerName: Provider.BOLTZ,\r\n    logos: [\r\n      { source: svgIcons.logo, alt: 'Boltz logo' },\r\n      { source: svgIcons.boltz, alt: 'Boltz' },\r\n    ],\r\n  },\r\n  {\r\n    providerName: Provider.COMIT,\r\n    logos: [{ source: svgIcons.comitLogo, alt: 'Comit' }],\r\n  },\r\n  {\r\n    providerName: Provider.TDEX,\r\n    logos: [{ source: svgIcons.tdexLogo, alt: 'TDex' }],\r\n  },\r\n];\r\n\r\nexport default function PoweredBy({ provider }: Props): ReactElement {\r\n  const classes = useStyles();\r\n\r\n  const serviceInfo = providerInfo.find(p => p.providerName === provider);\r\n\r\n  return (\r\n    <Grid\r\n      item\r\n      container\r\n      justify='center'\r\n      alignItems='center'\r\n      wrap='nowrap'\r\n      spacing={1}\r\n      xs={12}\r\n      className={classes.root}\r\n    >\r\n      <Grid item>\r\n        <Typography className={classes.text}>Swap powered by</Typography>\r\n      </Grid>\r\n      {serviceInfo!.logos.map(logo => (\r\n        <Grid item className={classes.imageContainer} key={logo.alt}>\r\n          <img src={logo.source} alt={logo.alt} className={classes.image} />\r\n        </Grid>\r\n      ))}\r\n    </Grid>\r\n  );\r\n}\r\n","import Button from '@material-ui/core/Button';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport React from 'react';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    width: '100%',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n  },\r\n  instructions: {\r\n    marginTop: theme.spacing(3),\r\n    marginBottom: theme.spacing(3),\r\n  },\r\n  button: {\r\n    marginTop: theme.spacing(1),\r\n    marginBottom: theme.spacing(1),\r\n  },\r\n}));\r\n\r\ninterface Props {\r\n  installed: boolean;\r\n  connected: boolean;\r\n  onConnect(): void;\r\n}\r\n\r\nconst Connect: React.FC<Props> = ({ onConnect, installed, connected }) => {\r\n  const classes = useStyles();\r\n\r\n  const handleInstall = () => {\r\n    const newWindow = window.open(\r\n      'https://chrome.google.com/webstore/detail/nhanebedohgejbllffboeipobccgedhl',\r\n      '_blank',\r\n      'noopener,noreferrer',\r\n    );\r\n    if (newWindow) newWindow.opener = null;\r\n  };\r\n\r\n  const handleConnect = async () => {\r\n    if (!installed) {\r\n      return alert('Marina is not installed');\r\n    }\r\n\r\n    await (window as any).marina.enable();\r\n  };\r\n\r\n  const goAhead = async () => {\r\n    if (!installed) {\r\n      return alert('Marina is not installed');\r\n    }\r\n\r\n    if (!connected) {\r\n      return alert('User must enable this website to proceed');\r\n    }\r\n\r\n    onConnect();\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      {installed && connected\r\n        ? (\r\n          <>\r\n            <Typography className={classes.instructions}> Connected</Typography>\r\n            <Button variant='contained' color='primary' onClick={goAhead}>\r\n              Go ahead\r\n            </Button>\r\n          </>\r\n        )\r\n        : (\r\n          <>\r\n            <Typography className={classes.instructions}>\r\n              Connect your wallet\r\n            </Typography>\r\n            {installed\r\n              ? (\r\n                <Button\r\n                  className={classes.button}\r\n                  variant='contained'\r\n                  color='primary'\r\n                  onClick={handleConnect}\r\n                >\r\n                  Connect with Marina Wallet\r\n                </Button>\r\n              )\r\n              : (\r\n                <Button\r\n                  className={classes.button}\r\n                  variant='contained'\r\n                  color='primary'\r\n                  onClick={handleInstall}\r\n                >\r\n                  Install Marina Wallet extension\r\n                </Button>\r\n              )}\r\n            <Button\r\n              className={classes.button}\r\n              variant='contained'\r\n              disabled\r\n              onClick={handleConnect}\r\n            >\r\n              In-browser wallet (coming soon)\r\n            </Button>\r\n          </>\r\n        )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Connect;\r\n","import CircularProgress from '@material-ui/core/CircularProgress';\r\nimport { createStyles, makeStyles } from '@material-ui/core/styles';\r\nimport { MarinaProvider } from 'marina-provider';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useHistory } from 'react-router';\r\nimport CurrencyID from '../../constants/currency';\r\nimport { useAppSelector } from '../../store/hooks';\r\nimport { seletctBestProvider } from '../../store/tdex-slice';\r\nimport Connect from './components/connect';\r\nimport Review from './components/review';\r\nimport TdexSteps from './components/steps';\r\nimport Summary from './components/summary';\r\n\r\ninterface Props {\r\n  sendAsset: CurrencyID;\r\n  receiveAsset: CurrencyID;\r\n  sendAmount: string;\r\n  receiveAmount: string;\r\n}\r\n\r\nconst useStyles = makeStyles(theme =>\r\n  createStyles({\r\n    wrapper: {\r\n      display: 'flex',\r\n      justifyContent: 'center',\r\n      alignItems: 'center',\r\n      flexDirection: 'column',\r\n      marginTop: '1rem',\r\n      marginBottom: '1rem',\r\n    },\r\n    instructions: {\r\n      marginTop: theme.spacing(1),\r\n      marginBottom: theme.spacing(1),\r\n    },\r\n    info: {\r\n      marginTop: theme.spacing(1),\r\n      marginBottom: theme.spacing(1),\r\n      paddingLeft: '25px',\r\n      paddingRight: '25px',\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      justifyContent: 'center',\r\n      flexDirection: 'column',\r\n    },\r\n    infoText: {\r\n      flex: '1 1 100%',\r\n      wordWrap: 'break-word',\r\n      wordBreak: 'break-all',\r\n    },\r\n  })\r\n);\r\n\r\nconst steps = ['Connect', 'Review & Confirm', 'Summary'];\r\n\r\nenum Steps {\r\n  Connect,\r\n  Review,\r\n  Summary,\r\n}\r\n\r\nconst TdexSwapFlow: React.FC<Props> = ({ sendAsset, receiveAsset, sendAmount, receiveAmount }) => {\r\n  const classes = useStyles();\r\n  const [activeStep, setActiveStep] = React.useState(Steps.Connect);\r\n  let history = useHistory();\r\n\r\n  const bestProvider = useAppSelector(seletctBestProvider);\r\n\r\n  if (!bestProvider) throw new Error('TDEX: no provider has been selected');\r\n\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [installed, setInstalled] = useState(false);\r\n  const [connected, setConnected] = useState(false);\r\n  const [chain, setChain] = useState<'liquid' | 'regtest'>('liquid');\r\n  const [txid, setTxid] = useState('');\r\n\r\n  useEffect(() => {\r\n    let isCheckingMarina = false;\r\n    const interval = setInterval(async () => {\r\n      try {\r\n        const marina: MarinaProvider = (window as any).marina;\r\n\r\n        if (marina === undefined) return;\r\n\r\n        setInstalled(true);\r\n\r\n        const net = await marina.getNetwork();\r\n        setChain(net);\r\n\r\n        if (isCheckingMarina) return;\r\n        isCheckingMarina = true;\r\n\r\n        if (activeStep > Steps.Connect) return;\r\n        const isEnabled = await marina.isEnabled();\r\n        setConnected(isEnabled);\r\n\r\n        if (isEnabled && activeStep === Steps.Connect) {\r\n          // skip directly to Review step\r\n          setActiveStep(Steps.Review);\r\n        }\r\n      } catch (error) {\r\n        console.log(error);\r\n        alert(error.message);\r\n      } finally {\r\n        setIsLoading(false);\r\n        isCheckingMarina = false;\r\n      }\r\n    }, 1000);\r\n\r\n    // Clean up\r\n    return () => {\r\n      clearInterval(interval);\r\n    };\r\n  }, [activeStep]);\r\n\r\n  const handleTradeCompleted = (txid: string) => {\r\n    setTxid(txid);\r\n    setActiveStep(Steps.Summary);\r\n  };\r\n\r\n  const handleNext = () => {\r\n    setActiveStep(prevActiveStep => prevActiveStep + 1);\r\n  };\r\n\r\n  const handleGoBack = () => {\r\n    history.goBack();\r\n  };\r\n\r\n  const getStepContent = () => {\r\n    switch (activeStep) {\r\n      case Steps.Connect:\r\n        return (\r\n          <Connect\r\n            installed={installed}\r\n            connected={connected}\r\n            onConnect={handleNext}\r\n          />\r\n        );\r\n      case Steps.Review:\r\n        return (\r\n          <Review\r\n            chain={chain}\r\n            providerWithMarket={bestProvider}\r\n            terms={{\r\n              assetToBeSent: sendAsset,\r\n              amountToBeSent: Number(sendAmount.replace(',', '')),\r\n              assetToReceive: receiveAsset,\r\n              amountToReceive: Number(receiveAmount.replace(',', '')),\r\n            }}\r\n            onTrade={handleTradeCompleted}\r\n            onReject={handleGoBack}\r\n          />\r\n        );\r\n      case Steps.Summary:\r\n        return <Summary chain={chain} txid={txid} onNewTrade={handleGoBack} />;\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className={classes.wrapper}>\r\n        <CircularProgress />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const { name, endpoint } = bestProvider.provider;\r\n  return (\r\n    <>\r\n      <div className={classes.info}>\r\n        <p className={classes.infoText}>\r\n          {' '}\r\n          {`Status: ${connected ? `Connected - Network: ${chain}` : `Not Connected`}`}\r\n        </p>\r\n      </div>\r\n      <div className={classes.wrapper}>\r\n        <TdexSteps steps={steps} activeStep={activeStep} />\r\n        <div>{getStepContent()}</div>\r\n      </div>\r\n      <div className={classes.info}>\r\n        <p className={classes.infoText}>\r\n          Market provided by {` ${name} - ${endpoint}`}\r\n        </p>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default TdexSwapFlow;\r\n","import { address, AddressInterface, BrowserInject, IdentityOpts } from 'ldk';\r\nimport { MarinaProvider } from 'marina-provider';\r\n\r\nexport default class BrowserInjectOpenDex extends BrowserInject {\r\n  private _provider: MarinaProvider;\r\n  private blindKeyByScript: Record<string, string> = {};\r\n\r\n  // @ts-ignore\r\n  constructor(args: IdentityOpts) {\r\n    super(args);\r\n    this._provider = (window as any)[args.value.windowProvider];\r\n  }\r\n\r\n  async getBlindingPrivateKey(script: string): Promise<string> {\r\n    // check if blinding private key is already in the instance\r\n    if (this.blindKeyByScript.hasOwnProperty(script)) {\r\n      return this.blindKeyByScript[script];\r\n    }\r\n\r\n    try {\r\n      // get addresses from marina\r\n      const addresses = await this._provider.getAddresses();\r\n      // find the address of the requested script\r\n      let found: AddressInterface | undefined;\r\n      addresses.forEach((addr: AddressInterface) => {\r\n        const currentScript = address\r\n          .toOutputScript(addr.confidentialAddress)\r\n          .toString('hex');\r\n        if (currentScript === script) {\r\n          found = addr;\r\n        }\r\n      });\r\n\r\n      if (!found) throw new Error('no blinding key for script ' + script);\r\n\r\n      this.blindKeyByScript[script] = found.blindingPrivateKey;\r\n      return found.blindingPrivateKey;\r\n    } catch (e) {\r\n      throw e;\r\n    }\r\n  }\r\n}\r\n","import Button from '@material-ui/core/Button';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { fetchAndUnblindUtxos, greedyCoinSelector, IdentityType } from 'ldk';\r\nimport React, { useState } from 'react';\r\nimport { Trade } from 'tdex-sdk';\r\nimport BrowserInjectOpenDex from '../utils/browserInject';\r\n\r\nimport CurrencyID from '../../../constants/currency';\r\nimport { toSatoshi } from '../utils/format';\r\nimport { CurrencyToAssetByChain, ExplorerByChain, ProviderWithMarket } from '../constants';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    width: '100%',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n  },\r\n  instructions: {\r\n    marginTop: theme.spacing(3),\r\n    marginBottom: theme.spacing(6),\r\n  },\r\n  terms: {\r\n    marginTop: theme.spacing(1),\r\n    marginBottom: theme.spacing(1),\r\n    fontSize: '1.25rem',\r\n    lineHeight: 'normal',\r\n  },\r\n  buttons: {\r\n    marginTop: theme.spacing(6),\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    flexDirection: 'row',\r\n  },\r\n}));\r\n\r\ninterface SwapTerms {\r\n  assetToBeSent: CurrencyID;\r\n  amountToBeSent: number;\r\n  assetToReceive: CurrencyID;\r\n  amountToReceive: number;\r\n}\r\n\r\ninterface Props {\r\n  chain: 'liquid' | 'regtest';\r\n  providerWithMarket: ProviderWithMarket;\r\n  terms: SwapTerms;\r\n  onTrade(txid: string): void;\r\n  onReject(): void;\r\n}\r\n\r\nconst Review: React.FC<Props> = ({\r\n  onTrade,\r\n  onReject,\r\n  terms,\r\n  chain,\r\n  providerWithMarket,\r\n}) => {\r\n  const classes = useStyles();\r\n\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const explorer = ExplorerByChain[chain];\r\n\r\n  const identity = new BrowserInjectOpenDex({\r\n    chain,\r\n    type: IdentityType.Inject,\r\n    value: {\r\n      windowProvider: 'marina',\r\n    },\r\n  });\r\n\r\n  const handleConfirm = async () => {\r\n    try {\r\n      setIsLoading(true);\r\n\r\n      const addrs = await (window as any).marina.getAddresses();\r\n      const utxos = await fetchAndUnblindUtxos(addrs, explorer);\r\n\r\n      const trade = new Trade({\r\n        providerUrl: providerWithMarket.provider.endpoint,\r\n        explorerUrl: explorer,\r\n        coinSelector: greedyCoinSelector(),\r\n        utxos,\r\n      });\r\n\r\n      const { precision, hash } = CurrencyToAssetByChain[chain][terms.assetToBeSent];\r\n      const amountToBeSentInSatoshis = toSatoshi(\r\n        terms.amountToBeSent,\r\n        precision,\r\n      );\r\n\r\n      const isBuy = CurrencyToAssetByChain[chain][terms.assetToBeSent].hash\r\n        === providerWithMarket.market.quoteAsset;\r\n\r\n      let txid;\r\n      if (isBuy) {\r\n        txid = await trade.buy({\r\n          market: providerWithMarket.market,\r\n          amount: amountToBeSentInSatoshis,\r\n          asset: hash,\r\n          identity,\r\n        });\r\n      } else {\r\n        txid = await trade.sell({\r\n          market: providerWithMarket.market,\r\n          amount: amountToBeSentInSatoshis,\r\n          asset: hash,\r\n          identity,\r\n        });\r\n      }\r\n\r\n      setIsLoading(false);\r\n      onTrade(txid);\r\n    } catch (error) {\r\n      setIsLoading(false);\r\n      console.error(error);\r\n      alert(error.message);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Typography className={classes.instructions}>\r\n        Review the terms of the trade before confirming\r\n      </Typography>\r\n      <Typography className={classes.terms}>\r\n         You send {terms.amountToBeSent} of {terms.assetToBeSent}\r\n      </Typography>\r\n      <br />\r\n      <Typography className={classes.terms}>\r\n         You receive {terms.amountToReceive} of {terms.assetToReceive}\r\n      </Typography>\r\n      {!isLoading\r\n        ? (\r\n          <div className={classes.buttons}>\r\n            <Button onClick={onReject}>Reject</Button>\r\n            <Button variant='contained' color='primary' onClick={handleConfirm}>\r\n              Accept\r\n            </Button>\r\n          </div>\r\n        )\r\n        : (\r\n          <CircularProgress />\r\n        )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Review;\r\n","import Step from '@material-ui/core/Step';\r\nimport StepLabel from '@material-ui/core/StepLabel';\r\nimport Stepper from '@material-ui/core/Stepper';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport React from 'react';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    width: '100%',\r\n  },\r\n  backButton: {\r\n    marginRight: theme.spacing(1),\r\n  },\r\n  instructions: {\r\n    marginTop: theme.spacing(1),\r\n    marginBottom: theme.spacing(1),\r\n  },\r\n}));\r\n\r\ninterface Props {\r\n  steps: string[];\r\n  activeStep: number;\r\n}\r\n\r\nconst TdexStepper: React.FC<Props> = ({ steps, activeStep }) => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Stepper activeStep={activeStep} alternativeLabel>\r\n        {steps.map(label => (\r\n          <Step key={label}>\r\n            <StepLabel>{label}</StepLabel>\r\n          </Step>\r\n        ))}\r\n      </Stepper>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TdexStepper;\r\n","import Button from '@material-ui/core/Button';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport React from 'react';\r\n\r\nimport { EsploraByChain } from '../constants';\r\n\r\nimport svgIcons from '../../../utils/svgIcons';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    width: '100%',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n  },\r\n  result: {\r\n    marginTop: theme.spacing(6),\r\n    marginBottom: theme.spacing(3),\r\n    fontSize: '1.5rem',\r\n    lineHeight: 'normal',\r\n  },\r\n  button: {\r\n    marginTop: theme.spacing(3),\r\n    marginBottom: theme.spacing(6),\r\n  },\r\n  image: {\r\n    marginTop: theme.spacing(2),\r\n    marginBottom: theme.spacing(4),\r\n  },\r\n}));\r\n\r\ninterface Props {\r\n  chain: 'liquid' | 'regtest';\r\n  txid: string;\r\n  onNewTrade(): void;\r\n}\r\n\r\nconst Summary: React.FC<Props> = ({ chain, txid, onNewTrade }) => {\r\n  const classes = useStyles();\r\n\r\n  const openInNewTab = url => {\r\n    const newWindow = window.open(url, '_blank', 'noopener,noreferrer');\r\n    if (newWindow) newWindow.opener = null;\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Typography className={classes.result}>Trade completed</Typography>\r\n      <img src={svgIcons.success} alt='Success' className={classes.image} />\r\n      <Button\r\n        variant='contained'\r\n        onClick={() => openInNewTab(`${EsploraByChain[chain]}/tx/${txid}`)}\r\n      >\r\n        Open in explorer\r\n      </Button>\r\n      <Button onClick={onNewTrade}>New trade</Button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Summary;\r\n","import { createStyles, makeStyles } from '@material-ui/core/styles';\r\nimport { Typography } from '@material-ui/core';\r\nimport React, { ReactNode } from 'react';\r\n\r\nconst useStyles = makeStyles(() =>\r\n  createStyles({\r\n    title: {\r\n      marginTop: '2rem',\r\n      fontSize: '2rem',\r\n      fontWeight: 500,\r\n      fontStretch: 'normal',\r\n      fontStyle: 'normal',\r\n      lineHeight: 'normal',\r\n      letterSpacing: '1.33px',\r\n      textAlign: 'center',\r\n    },\r\n  })\r\n);\r\n\r\nexport type TitleProps = {\r\n  children: ReactNode;\r\n};\r\n\r\nconst Title = ({ children }) => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Typography className={classes.title} component='h1' align='center'>\r\n      {children}\r\n    </Typography>\r\n  );\r\n};\r\n\r\nexport default Title;\r\n","import { createStyles, makeStyles } from '@material-ui/core/styles';\r\nimport React, { ReactNode } from 'react';\r\n\r\nconst useStyles = makeStyles(theme =>\r\n  createStyles({\r\n    outerCircle: {\r\n      zIndex: -1,\r\n      display: 'flex',\r\n      position: 'fixed',\r\n      opacity: '0.1',\r\n      background:\r\n        `linear-gradient(right bottom, ${theme.palette.background.default} 0%, ${theme.palette.primary.main} 100%)`,\r\n      'border-radius': '50%',\r\n      'align-items': 'center',\r\n      'justify-content': 'center',\r\n      height: '80vw',\r\n      width: '80vw',\r\n      top: 'max(-200px, calc(-60vw + 100px))',\r\n      right: 'max(-200px, calc(-70vw + 100px))',\r\n      'max-width': 675,\r\n      'max-height': 675,\r\n      'min-width': 180,\r\n      'min-height': 180,\r\n    },\r\n    innerCircle: {\r\n      background: theme.palette.background.default,\r\n      'border-radius': '50%',\r\n      height: 'calc(80vw - 75px)',\r\n      width: 'calc(80vw - 75px)',\r\n      'max-width': 600,\r\n      'max-height': 600,\r\n      'min-width': 150,\r\n      'min-height': 150,\r\n    },\r\n    background: {\r\n      zIndex: -2,\r\n      position: 'fixed',\r\n      height: '100%',\r\n      width: '100%',\r\n      background: '#8223ff',\r\n      opacity: 0.1,\r\n      backgroundImage: 'radial-gradient(circle at 30% 51%, #00A6FF, #0a0e1a 73%)',\r\n    },\r\n  })\r\n);\r\n\r\nexport type BackgroundProps = {\r\n  children: ReactNode;\r\n};\r\n\r\nconst Background = ({ children }) => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <>\r\n      <div className={classes.background}></div>\r\n      <div className={classes.outerCircle}>\r\n        <div className={classes.innerCircle}></div>\r\n      </div>\r\n      {children}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Background;\r\n","import { createStyles, makeStyles } from '@material-ui/core/styles';\r\nimport { Divider as MuiDivider } from '@material-ui/core';\r\nimport React from 'react';\r\n\r\nconst useStyles = makeStyles(() =>\r\n  createStyles({\r\n    root: {\r\n      opacity: 0.3,\r\n    },\r\n  })\r\n);\r\n\r\nexport type DividerProps = {};\r\n\r\nconst Divider = (_props: DividerProps) => {\r\n  const classes = useStyles();\r\n\r\n  return <MuiDivider className={classes.root} variant='middle' />;\r\n};\r\n\r\nexport default Divider;\r\n","import { createStyles, makeStyles } from '@material-ui/core/styles';\r\nimport { Grid } from '@material-ui/core';\r\nimport React from 'react';\r\nimport Divider from '../Divider';\r\n\r\nconst useStyles = makeStyles(theme =>\r\n  createStyles({\r\n    text: {\r\n      display: 'flex',\r\n      justifyContent: 'center',\r\n      margin: '1rem 0',\r\n      color: theme.palette.text.secondary,\r\n    },\r\n  })\r\n);\r\n\r\nconst Footer = () => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Grid\r\n      container\r\n      justify='center'\r\n      direction='row'\r\n      alignItems='center'\r\n      className={classes.root}\r\n    >\r\n      <Grid item xs={12}>\r\n        <Divider />\r\n      </Grid>\r\n      <Grid item className={classes.text} xs={11} sm={9}>\r\n        Liiska CoinSwap does not collect any personal data and ensures swaps are secure.\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport default Footer;\r\n","export default __webpack_public_path__ + \"static/media/swap.dc1c2bbe.png\";","import { createStyles, Link, LinkProps, makeStyles } from '@material-ui/core';\r\nimport React, { ReactElement } from 'react';\r\n\r\ntype NavLinkProps = LinkProps;\r\n\r\nconst useStyles = makeStyles(theme =>\r\n  createStyles({\r\n    navLink: {\r\n      color: theme.palette.text.primary,\r\n      fontSize: '1rem',\r\n      letterSpacing: '0.67px',\r\n    },\r\n  })\r\n);\r\n\r\nconst NavLink = (props: NavLinkProps): ReactElement => {\r\n  const { ...linkProps } = props;\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Link\r\n      className={classes.navLink}\r\n      target='_blank'\r\n      rel='noopener noreferrer'\r\n      {...linkProps}\r\n    />\r\n  );\r\n};\r\n\r\nexport default NavLink;\r\n","import ClickAwayListener from '@material-ui/core/ClickAwayListener';\r\nimport {\r\n  createStyles,\r\n  Grid,\r\n  Grow,\r\n  isWidthUp,\r\n  makeStyles,\r\n  MenuItem,\r\n  MenuList,\r\n  Paper,\r\n  Popper,\r\n  WithWidth,\r\n  withWidth,\r\n} from '@material-ui/core';\r\nimport { ReactElement, useState } from 'react';\r\nimport svgIcons from '../../utils/svgIcons';\r\nimport Button from '../Button';\r\nimport NavLink from '../NavLink';\r\n\r\nexport type MenuProps = WithWidth;\r\n\r\nconst useStyles = makeStyles(() =>\r\n  createStyles({\r\n    menuOpener: {\r\n      minWidth: 36,\r\n      height: 36,\r\n    },\r\n    popper: {\r\n      marginTop: 5,\r\n    },\r\n  })\r\n);\r\n\r\nconst Menu = (props: MenuProps): ReactElement => {\r\n  const { width } = props;\r\n  const [open, setOpen] = useState(false);\r\n  const menuOpener = 'menuOpener';\r\n  const classes = useStyles();\r\n\r\n  const handleToggle = () => setOpen(oldValue => !oldValue);\r\n  const handleClose = () => setOpen(false);\r\n\r\n\r\n  const repoLink = (\r\n    <NavLink href='https://github.com/yd-915/liiskaswap'>\r\n      Source Code\r\n    </NavLink>\r\n  );\r\n\r\n  if (isWidthUp('sm', width)) {\r\n    return (\r\n      <Grid\r\n        container\r\n        spacing={1}\r\n        justify='flex-end'\r\n        direction='row'\r\n        alignItems='center'\r\n      >\r\n       \r\n        <Grid item>{repoLink}</Grid>\r\n      </Grid>\r\n    );\r\n  } else {\r\n    // small screens\r\n    return (\r\n      <div>\r\n        <Button\r\n          className={classes.menuOpener}\r\n          aria-haspopup='true'\r\n          variant='contained'\r\n          onClick={handleToggle}\r\n          id={menuOpener}\r\n        >\r\n          {open && <img src={svgIcons.close} alt='' />}\r\n          {!open && <img src={svgIcons.hamburger} alt='' />}\r\n        </Button>\r\n        <Popper\r\n          open={open}\r\n          transition\r\n          placement='bottom-start'\r\n          className={classes.popper}\r\n          anchorEl={document.getElementById(menuOpener)}\r\n        >\r\n          {({ TransitionProps }) => (\r\n            <Grow {...TransitionProps}>\r\n              <Paper>\r\n                <ClickAwayListener onClickAway={handleClose}>\r\n                  <MenuList autoFocusItem={open}>\r\n                    \r\n                    <MenuItem onClick={handleClose}>{repoLink}</MenuItem>\r\n                  </MenuList>\r\n                </ClickAwayListener>\r\n              </Paper>\r\n            </Grow>\r\n          )}\r\n        </Popper>\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nexport default withWidth()(Menu);\r\n","import { createStyles, makeStyles } from '@material-ui/core/styles';\r\nimport { AppBar, Grid, isWidthUp, Toolbar, WithWidth, withWidth } from '@material-ui/core';\r\nimport React from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { ROUTES } from '../../pages/home';\r\nimport Logo from \"../../assets/images/swap.png\"\r\nimport Divider from '../Divider';\r\nimport Menu from '../Menu';\r\n\r\n\r\nconst useStyles = makeStyles(() =>\r\n  createStyles({\r\n    toolbar: {\r\n      flexWrap: 'wrap',\r\n    },\r\n  })\r\n);\r\n\r\nexport type NavBarProps = WithWidth & {};\r\n\r\nconst NavBar = (props: NavBarProps) => {\r\n  const classes = useStyles();\r\n  const { width } = props;\r\n  const history = useHistory();\r\n  const onLogoClick = () => {\r\n    history.push(ROUTES.HOME);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <AppBar elevation={0} color='transparent' position='static'>\r\n        <Toolbar classes={{ root: classes.toolbar }}>\r\n          <Grid\r\n            justify='space-between'\r\n            container\r\n            direction={isWidthUp('sm', width) ? 'row' : 'row-reverse'}\r\n            alignItems='center'\r\n          >\r\n            <img\r\n             src={Logo}\r\n             height={\"200px\"}\r\n             width={\"400px\"}\r\n            alt=''\r\n            onClick={onLogoClick} />\r\n            <Grid item>\r\n              <Menu />\r\n            </Grid>\r\n          </Grid>\r\n        </Toolbar>\r\n      </AppBar>\r\n      <Divider />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default withWidth()(NavBar);\r\n","import { createStyles, makeStyles } from '@material-ui/core/styles';\r\nimport { Box, Grid } from '@material-ui/core';\r\nimport { default as React, ReactNode } from 'react';\r\nimport Background from '../components/Background';\r\nimport Footer from '../components/Footer';\r\nimport NavBar from '../components/NavBar';\r\n\r\nconst useStyles = makeStyles(() =>\r\n  createStyles({\r\n    box: {\r\n      height: '100vh',\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n    },\r\n    content: {\r\n      display: 'flex',\r\n      flex: 1,\r\n      justifyContent: 'center',\r\n    },\r\n  })\r\n);\r\n\r\nexport type DefaultLayoutProps = {\r\n  children: ReactNode;\r\n};\r\n\r\nconst DefaultLayout = (props: DefaultLayoutProps) => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Background>\r\n      <Box className={classes.box}>\r\n        <NavBar />\r\n        <Grid item className={classes.content}>\r\n          {props.children}\r\n        </Grid>\r\n        <Footer />\r\n      </Box>\r\n    </Background>\r\n  );\r\n};\r\n\r\nexport default DefaultLayout;\r\n","import { createStyles, Grid, List, ListItem, ListItemText, makeStyles, Tooltip, Typography } from '@material-ui/core';\r\nimport React, { ReactElement, useEffect, useMemo, useState } from 'react';\r\nimport { RefundDetails } from '../../../../constants/boltzSwap';\r\nimport CurrencyID from '../../../../constants/currency';\r\nimport { convertRefundFile, getBoltzSwapsFromLocalStorage } from '../../../../utils/boltzRefund';\r\nimport svgIcons from '../../../../utils/svgIcons';\r\nimport Button from '../../../Button';\r\n\r\ntype BoltzChooseSwapProps = {\r\n  asset: CurrencyID;\r\n  setErrorMessage: (message: string) => void;\r\n  setRefundDetails: (details?: RefundDetails) => void;\r\n};\r\n\r\nconst useStyles = makeStyles(() =>\r\n  createStyles({\r\n    list: {\r\n      maxHeight: '10rem',\r\n      width: '100%',\r\n      overflowY: 'auto',\r\n      margin: '1rem 0',\r\n    },\r\n    swapId: {\r\n      paddingRight: '2rem',\r\n    },\r\n    uploadButton: {\r\n      marginTop: '1rem',\r\n    },\r\n    uploadedPlaceholder: {\r\n      minWidth: '2.5rem',\r\n    },\r\n    uploadSuccess: {\r\n      width: '1.5rem',\r\n      marginTop: '1rem',\r\n      marginLeft: '1rem',\r\n    },\r\n    input: {\r\n      display: 'none',\r\n    },\r\n    hintIcon: {\r\n      height: '1.25rem',\r\n      marginLeft: '0.5rem',\r\n    },\r\n    subtitle: {\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n    },\r\n  })\r\n);\r\n\r\nconst BoltzChooseSwap = (props: BoltzChooseSwapProps): ReactElement => {\r\n  const classes = useStyles();\r\n  const { setErrorMessage, setRefundDetails, asset } = props;\r\n  const [uploadedFile, setUploadedFile] = useState<RefundDetails | undefined>(\r\n    undefined,\r\n  );\r\n  const [storedSwaps, setStoredSwaps] = useState<RefundDetails[]>([]);\r\n  const [selectedSwap, setSelectedSwap] = useState('');\r\n  const fileInput: React.RefObject<HTMLInputElement> = useMemo(\r\n    () => React.createRef(),\r\n    [],\r\n  );\r\n\r\n  useEffect(() => {\r\n    setStoredSwaps(getBoltzSwapsFromLocalStorage().filter(swap => swap.currency === asset).reverse());\r\n  }, [asset]);\r\n\r\n  return (\r\n    <>\r\n      <Typography\r\n        variant='body1'\r\n        color='textSecondary'\r\n        component='h6'\r\n        className={classes.subtitle}\r\n      >\r\n        <>\r\n          Select from recent swaps\r\n          <Tooltip\r\n            title='These are the refund files that are stored in the browser. Clearing your browser cache would result in the deletion of these files.'\r\n          >\r\n            <img\r\n              className={classes.hintIcon}\r\n              src={svgIcons.questionIcon}\r\n              alt='hint'\r\n            />\r\n          </Tooltip>\r\n        </>\r\n      </Typography>\r\n      <List className={classes.list}>\r\n        {storedSwaps.map(swap => (\r\n          <ListItem\r\n            key={swap.swapId}\r\n            button\r\n            selected={selectedSwap === swap.swapId}\r\n            onClick={() => {\r\n              setSelectedSwap(swap.swapId);\r\n              setUploadedFile(undefined);\r\n              setErrorMessage('');\r\n              setRefundDetails(swap);\r\n            }}\r\n          >\r\n            <ListItemText>\r\n              <Grid item container justify='space-between' alignItems='center'>\r\n                <Grid item xs={12} sm={5}>\r\n                  <Typography variant='body2'>ID: {swap.swapId}</Typography>\r\n                </Grid>\r\n                <Typography variant='caption'>\r\n                  {new Date(swap.date).toLocaleString()}\r\n                </Typography>\r\n              </Grid>\r\n            </ListItemText>\r\n          </ListItem>\r\n        ))}\r\n      </List>\r\n      <Typography variant='body1' color='textSecondary' component='h6'>\r\n        Or upload a refund file\r\n      </Typography>\r\n      <Grid item container justify='center' alignItems='center'>\r\n        <Grid item className={classes.uploadedPlaceholder}></Grid>\r\n        <Grid item>\r\n          <input\r\n            ref={fileInput}\r\n            accept='.png, .json'\r\n            type='file'\r\n            className={classes.input}\r\n            onChange={event => {\r\n              convertRefundFile(event.target.files![0]).then(details => {\r\n                setUploadedFile(details);\r\n                setErrorMessage(\r\n                  !details ? 'Failed to read swap data from uploaded file' : '',\r\n                );\r\n                setSelectedSwap('');\r\n                setRefundDetails(details);\r\n              });\r\n            }}\r\n          />\r\n          <Button\r\n            variant='outlined'\r\n            color='primary'\r\n            onClick={() => fileInput?.current?.click()}\r\n            className={classes.uploadButton}\r\n          >\r\n            Upload\r\n          </Button>\r\n        </Grid>\r\n        <Grid item className={classes.uploadedPlaceholder}>\r\n          {!!uploadedFile && (\r\n            <img\r\n              className={classes.uploadSuccess}\r\n              src={svgIcons.greenTick}\r\n              alt='Refund file uploaded'\r\n            />\r\n          )}\r\n        </Grid>\r\n      </Grid>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default BoltzChooseSwap;\r\n","import { createStyles, Grid, makeStyles, Typography } from '@material-ui/core';\r\nimport { ReactElement } from 'react';\r\nimport svgIcons from '../../../../utils/svgIcons';\r\n\r\ntype BoltzRefundResultProps = {\r\n  swapId?: string;\r\n  errorMessage?: string;\r\n};\r\n\r\nconst useStyles = makeStyles(() =>\r\n  createStyles({\r\n    iconContainer: {\r\n      margin: '1.5rem',\r\n    },\r\n  })\r\n);\r\n\r\nconst BoltzRefundResult = (props: BoltzRefundResultProps): ReactElement => {\r\n  const { swapId, errorMessage } = props;\r\n  const classes = useStyles();\r\n\r\n  const successMessage = `Swap ${swapId} successfully refunded!`;\r\n\r\n  return (\r\n    <>\r\n      <Grid item className={classes.iconContainer}>\r\n        {errorMessage\r\n          ? (\r\n            <img src={svgIcons.snap} alt='aw, snap!' />\r\n          )\r\n          : (\r\n            <img src={svgIcons.greenTick} alt='success' />\r\n          )}\r\n      </Grid>\r\n      <Typography variant='body1' align='center'>\r\n        {errorMessage ? errorMessage : successMessage}\r\n      </Typography>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default BoltzRefundResult;\r\n","import { createStyles, makeStyles, TextField } from '@material-ui/core';\r\nimport { mergeMap, retry } from 'rxjs/operators';\r\nimport React, { ReactElement, useEffect, useState } from 'react';\r\nimport { from, timer } from 'rxjs';\r\nimport { BOLTZ_GET_SWAP_TRANSACTION_API_URL } from '../../../../api/boltzApiUrls';\r\nimport {\r\n  RefundDetails,\r\n  StatusResponse,\r\n  swapSteps,\r\n  SwapTransaction,\r\n  SwapUpdateEvent,\r\n} from '../../../../constants/boltzSwap';\r\nimport { useBoltzConfiguration } from '../../../../context/NetworkContext';\r\nimport BoltzSubmarineStatus from '../BoltzSubmarineStatus';\r\n\r\ntype BoltzRefundStatusProps = {\r\n  refundDetails: RefundDetails;\r\n  swapStatus: StatusResponse;\r\n  address: string;\r\n  setAddress: (value: string) => void;\r\n  onSwapTransactionChange: (transaction: SwapTransaction) => void;\r\n};\r\n\r\nconst useStyles = makeStyles(() =>\r\n  createStyles({\r\n    addressField: {\r\n      marginTop: '1rem',\r\n    },\r\n    input: {\r\n      borderRadius: 0,\r\n    },\r\n  })\r\n);\r\n\r\nconst BoltzRefundStatus = (props: BoltzRefundStatusProps): ReactElement => {\r\n  const classes = useStyles();\r\n  const {\r\n    refundDetails,\r\n    swapStatus,\r\n    address,\r\n    setAddress,\r\n    onSwapTransactionChange,\r\n  } = props;\r\n  const { apiEndpoint } = useBoltzConfiguration();\r\n  const [swapTransaction, setSwapTransaction] = useState<\r\n    SwapTransaction | undefined\r\n  >(undefined);\r\n  const [queryTransaction, setQueryTransaction] = useState(true);\r\n\r\n  const addressFieldText = `Insert your ${refundDetails.currency} address for refund`;\r\n\r\n  useEffect(() => {\r\n    if (!queryTransaction) {\r\n      return;\r\n    }\r\n    const sub = timer(0, 60000)\r\n      .pipe(\r\n        mergeMap(() =>\r\n          from(\r\n            fetch(BOLTZ_GET_SWAP_TRANSACTION_API_URL(apiEndpoint), {\r\n              method: 'POST',\r\n              headers: {\r\n                'Content-Type': 'application/json;charset=utf-8',\r\n              },\r\n              body: JSON.stringify({ id: refundDetails.swapId }),\r\n            }),\r\n          )\r\n        ),\r\n        mergeMap(response => response.json()),\r\n        retry(10),\r\n      )\r\n      .subscribe({\r\n        next: transaction => {\r\n          setSwapTransaction(transaction);\r\n          onSwapTransactionChange(transaction);\r\n          if (\r\n            !transaction.timeoutEta\r\n            && swapStatus.status !== SwapUpdateEvent.InvoiceSet\r\n          ) {\r\n            setQueryTransaction(false);\r\n          }\r\n        },\r\n        error: err => console.log('Failed to get swap transaction data:', err),\r\n      });\r\n    return () => sub.unsubscribe();\r\n  }, [\r\n    queryTransaction,\r\n    apiEndpoint,\r\n    refundDetails,\r\n    swapStatus.status,\r\n    onSwapTransactionChange,\r\n  ]);\r\n\r\n  return (\r\n    <>\r\n      <BoltzSubmarineStatus swapStatus={swapStatus!} />\r\n      {!!swapTransaction?.transactionHex\r\n        && !swapSteps.some(step => step.status.includes(swapStatus.status)) && (\r\n          <TextField\r\n            className={classes.addressField}\r\n            multiline\r\n            fullWidth\r\n            variant='outlined'\r\n            aria-label={addressFieldText}\r\n            rows={3}\r\n            disabled={!!swapTransaction?.timeoutEta}\r\n            placeholder={addressFieldText}\r\n            value={address}\r\n            onChange={e => {\r\n              setAddress(e.target.value);\r\n            }}\r\n            InputProps={{\r\n              className: classes.input,\r\n            }}\r\n          />\r\n        )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default BoltzRefundStatus;\r\n","/**\r\n *\r\n * @returns message value if argument is an Error\r\n * @returns the input value if argument is a string\r\n * @returns an empty string in other cases\r\n */\r\nexport const getErrorMessage = (err: unknown): string => {\r\n  if (typeof err === 'string') {\r\n    return err;\r\n  }\r\n  if (err instanceof Error) {\r\n    return err.message;\r\n  }\r\n  return '';\r\n};\r\n","import { mergeMap } from 'rxjs/operators';\r\nimport React, { ReactElement, useEffect, useMemo, useState } from 'react';\r\nimport { from } from 'rxjs';\r\nimport { BOLTZ_SWAP_STATUS_API_URL } from '../../../../api/boltzApiUrls';\r\nimport BoltzChooseSwap from '../../../../components/BoltzSwapFlow/components/BoltzChooseSwap';\r\nimport BoltzRefundResult from '../../../../components/BoltzSwapFlow/components/BoltzRefundResult';\r\nimport BoltzRefundStatus from '../../../../components/BoltzSwapFlow/components/BoltzRefundStatus';\r\nimport BoltzSwapStep from '../../../../components/BoltzSwapFlow/components/BoltzSwapStep';\r\nimport { RefundDetails, StatusResponse, SwapTransaction, SwapUpdateEvent } from '../../../../constants/boltzSwap';\r\nimport CurrencyID from '../../../../constants/currency';\r\nimport { useBoltzConfiguration } from '../../../../context/NetworkContext';\r\nimport { timeDiffCalc } from '../../../../services/refund/timestamp';\r\nimport {\r\n  getBoltzSwapsFromLocalStorage,\r\n  removeRefundDetailsFromLocalStorage,\r\n  startRefund,\r\n} from '../../../../utils/boltzRefund';\r\nimport { isFinal, startListening } from '../../../../utils/boltzSwapStatus';\r\nimport { getErrorMessage } from '../../../../utils/error';\r\n\r\ntype RefundStep = {\r\n  content: ReactElement;\r\n  buttonText: string;\r\n  onButtonClick: () => void;\r\n  buttonDisabled?: boolean;\r\n};\r\n\r\ntype BoltzRefundBitcoinLikeProps = {\r\n  asset: CurrencyID;\r\n  swapId?: string;\r\n};\r\n\r\nconst BoltzRefundBitcoinLike = (\r\n  props: BoltzRefundBitcoinLikeProps,\r\n): ReactElement => {\r\n  const { asset, swapId } = props;\r\n  const boltzConfig = useBoltzConfiguration();\r\n  const { apiEndpoint } = boltzConfig;\r\n  const [errorMessage, setErrorMessage] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [refundDetails, setRefundDetails] = useState<RefundDetails | undefined>(\r\n    undefined,\r\n  );\r\n  const [swapStatus, setSwapStatus] = useState<StatusResponse | undefined>(\r\n    undefined,\r\n  );\r\n  const [swapTransaction, setSwapTransaction] = useState<\r\n    SwapTransaction | undefined\r\n  >(undefined);\r\n  const [activeStep, setActiveStep] = useState(0);\r\n  const [address, setAddress] = useState('');\r\n\r\n  const reset = () => {\r\n    setActiveStep(0);\r\n    setErrorMessage('');\r\n    setRefundDetails(undefined);\r\n    setSwapStatus(undefined);\r\n    setSwapTransaction(undefined);\r\n    setAddress('');\r\n  };\r\n\r\n  const getEta = () => {\r\n    const d1 = new Date();\r\n    const d2 = new Date(swapTransaction!.timeoutEta! * 1000);\r\n    const { label, value } = timeDiffCalc(d2, d1);\r\n    return {\r\n      label,\r\n      eta: value > 0 ? value : 0,\r\n    };\r\n  };\r\n\r\n  const swapComplete = swapStatus?.status === SwapUpdateEvent.TransactionClaimed;\r\n\r\n  const refundButtonText = () => {\r\n    if (swapTransaction?.error) {\r\n      return swapTransaction.error;\r\n    }\r\n    if (swapComplete) {\r\n      return 'Ok';\r\n    }\r\n    if (swapTransaction?.timeoutEta) {\r\n      const { label } = getEta();\r\n      return `Refund possible in ~ ${label}`;\r\n    }\r\n    return 'Start Refund';\r\n  };\r\n\r\n  const steps: RefundStep[] = [\r\n    {\r\n      content: (\r\n        <BoltzChooseSwap\r\n          asset={asset}\r\n          setErrorMessage={setErrorMessage}\r\n          setRefundDetails={setRefundDetails}\r\n        />\r\n      ),\r\n      buttonText: 'Check Status',\r\n      onButtonClick: () => checkStatus(refundDetails!.swapId),\r\n      buttonDisabled: !refundDetails,\r\n    },\r\n    {\r\n      content: (\r\n        <BoltzRefundStatus\r\n          swapStatus={swapStatus!}\r\n          refundDetails={refundDetails!}\r\n          address={address}\r\n          setAddress={setAddress}\r\n          onSwapTransactionChange={setSwapTransaction}\r\n        />\r\n      ),\r\n      buttonText: refundButtonText(),\r\n      buttonDisabled: !swapComplete\r\n        && (!swapTransaction\r\n          || !!swapTransaction.error\r\n          || !!swapTransaction.timeoutEta\r\n          || !address),\r\n      onButtonClick: () => {\r\n        if (swapComplete) {\r\n          reset();\r\n          return;\r\n        }\r\n        setLoading(true);\r\n        startRefund(\r\n          refundDetails!,\r\n          address,\r\n          swapTransaction!.transactionHex,\r\n          boltzConfig,\r\n        ).subscribe({\r\n          next: () => {},\r\n          error: err => {\r\n            setErrorMessage(getErrorMessage(err) || 'Refund failed');\r\n            setLoading(false);\r\n            setActiveStep(prev => prev + 1);\r\n          },\r\n          complete: () => {\r\n            removeRefundDetailsFromLocalStorage(refundDetails!.swapId);\r\n            setLoading(false);\r\n            setActiveStep(prev => prev + 1);\r\n          },\r\n        });\r\n      },\r\n    },\r\n    {\r\n      content: (\r\n        <BoltzRefundResult\r\n          swapId={refundDetails?.swapId}\r\n          errorMessage={errorMessage}\r\n        />\r\n      ),\r\n      buttonText: 'Refund Again',\r\n      onButtonClick: reset,\r\n    },\r\n  ];\r\n\r\n  const checkStatus = useMemo(\r\n    () =>\r\n      (swapId: string): void => {\r\n        setLoading(true);\r\n        from(\r\n          fetch(BOLTZ_SWAP_STATUS_API_URL(apiEndpoint), {\r\n            method: 'POST',\r\n            headers: {\r\n              'Content-Type': 'application/json;charset=utf-8',\r\n            },\r\n            body: JSON.stringify({ id: swapId }),\r\n          }),\r\n        )\r\n          .pipe(mergeMap(response => response.json()))\r\n          .subscribe({\r\n            next: status => {\r\n              setSwapStatus(status);\r\n              setLoading(false);\r\n              setActiveStep(prev => prev + 1);\r\n              if (isFinal(status)) {\r\n                return;\r\n              }\r\n              startListening(swapId, apiEndpoint, (data, stream) => {\r\n                setSwapStatus(data);\r\n                if (isFinal(data)) {\r\n                  stream.close();\r\n                  if (SwapUpdateEvent.TransactionClaimed === data.status) {\r\n                    removeRefundDetailsFromLocalStorage(swapId);\r\n                  }\r\n                }\r\n              });\r\n            },\r\n            error: err => {\r\n              setErrorMessage(getErrorMessage(err) || 'Failed to get status');\r\n              setLoading(false);\r\n            },\r\n          });\r\n      },\r\n    [apiEndpoint],\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (swapId) {\r\n      const refundDetails = getBoltzSwapsFromLocalStorage().find(\r\n        swap => swap.swapId === swapId,\r\n      );\r\n      if (!refundDetails) {\r\n        return;\r\n      }\r\n      setRefundDetails(refundDetails);\r\n      checkStatus(swapId);\r\n    }\r\n  }, [checkStatus, swapId]);\r\n\r\n  return (\r\n    <BoltzSwapStep\r\n      title='Check status or refund'\r\n      content={steps[activeStep].content}\r\n      mainButtonVisible\r\n      mainButtonDisabled={steps[activeStep].buttonDisabled}\r\n      mainButtonLoading={loading}\r\n      mainButtonText={steps[activeStep].buttonText}\r\n      errorMessage={activeStep === steps.length - 1 ? '' : errorMessage}\r\n      onMainButtonClick={steps[activeStep].onButtonClick}\r\n    />\r\n  );\r\n};\r\n\r\nexport default BoltzRefundBitcoinLike;\r\n","// Block times of different chains in seconds\r\nexport default {\r\n  Ethereum: 15,\r\n};\r\n","import { ContractABIs } from 'boltz-core';\r\nimport { Contract, utils } from 'ethers';\r\n\r\n// Six hours are 1440 Ethereum blocks\r\nconst sixHoursBlocks = 1440;\r\n\r\nlet abortQuerying = false;\r\n\r\nexport const CurrencyTypes = {\r\n  Ether: 'Ether',\r\n  ERC20: 'ERC20',\r\n  Lightning: 'Lightning',\r\n  BitcoinLike: 'BitcoinLike',\r\n};\r\n\r\nconst handleFilterResults = async (\r\n  appendToSwapIds,\r\n  type,\r\n  contract,\r\n  signerAddress,\r\n  filterResults,\r\n) => {\r\n  for (const swap of filterResults) {\r\n    // The filter should already exclude all events that are not lockups, but to make sure\r\n    // we double check this here (caused issues on regtest for some reason)\r\n    if (swap.event !== 'Lockup') {\r\n      continue;\r\n    }\r\n\r\n    // TODO: why do event filters not work?\r\n    if (swap.args.refundAddress !== signerAddress) {\r\n      continue;\r\n    }\r\n\r\n    const valueHashTypes = type === CurrencyTypes.Ether\r\n      ? ['bytes32', 'uint', 'address', 'address', 'uint']\r\n      : ['bytes32', 'uint', 'address', 'address', 'address', 'uint'];\r\n\r\n    const valueHash = utils.solidityKeccak256(valueHashTypes, swap.args);\r\n    const isStillLocked = await contract.swaps(valueHash);\r\n\r\n    if (isStillLocked) {\r\n      const blockOfSwap = await contract.provider.getBlock(swap.blockHash);\r\n      const swapDate = new Date(blockOfSwap.timestamp * 1000);\r\n\r\n      appendToSwapIds({\r\n        type,\r\n        contract,\r\n        date: swapDate,\r\n        id: `${swap.transactionHash.substring(0, 6)}...`,\r\n        data: swap.args,\r\n      });\r\n    }\r\n  }\r\n};\r\n\r\nconst queryFilter = async (appendToSwapIds, type, contract, signerAddress, filter) => {\r\n  let scanToBlock = await contract.provider.getBlockNumber();\r\n\r\n  while (scanToBlock > 1) {\r\n    if (abortQuerying) {\r\n      return;\r\n    }\r\n\r\n    if (scanToBlock - sixHoursBlocks < 1) {\r\n      handleFilterResults(\r\n        appendToSwapIds,\r\n        type,\r\n        contract,\r\n        signerAddress,\r\n        await contract.queryFilter(filter, 0, scanToBlock),\r\n      );\r\n      return;\r\n    }\r\n\r\n    handleFilterResults(\r\n      appendToSwapIds,\r\n      type,\r\n      contract,\r\n      signerAddress,\r\n      await contract.queryFilter(\r\n        filter,\r\n        scanToBlock - sixHoursBlocks,\r\n        scanToBlock,\r\n      ),\r\n    );\r\n\r\n    scanToBlock -= sixHoursBlocks + 1;\r\n  }\r\n};\r\n\r\n// TODO: support for ether\r\n// TODO: stop when refund for a swap is initiated\r\nexport const queryEthereumSwaps = (signer, contracts, appendToSwapIds) => {\r\n  abortQuerying = false;\r\n\r\n  const { swapContracts } = contracts.ethereum;\r\n\r\n  new Promise(async () => {\r\n    const signerAddress = await signer.getAddress();\r\n\r\n    const etherSwap = new Contract(\r\n      swapContracts.EtherSwap,\r\n      ContractABIs.EtherSwap,\r\n      signer,\r\n    );\r\n    const erc20Swap = new Contract(\r\n      swapContracts.ERC20Swap,\r\n      ContractABIs.ERC20Swap,\r\n      signer,\r\n    );\r\n\r\n    const etherFilter = await etherSwap.queryFilter(\r\n      etherSwap.filters.Lockup(null, null, null, signerAddress, null),\r\n    );\r\n    const erc20Filter = await erc20Swap.queryFilter(\r\n      erc20Swap.filters.Lockup(null, null, null, null, signerAddress, null),\r\n    );\r\n\r\n    queryFilter(appendToSwapIds, CurrencyTypes.Ether, etherSwap, signerAddress, etherFilter);\r\n    queryFilter(appendToSwapIds, CurrencyTypes.ERC20, erc20Swap, signerAddress, erc20Filter);\r\n  });\r\n\r\n  return () => (abortQuerying = true);\r\n};\r\n","import { createStyles, Grid, List, ListItem, ListItemText, makeStyles, Typography } from '@material-ui/core';\r\nimport { BigNumber, Contract, Signer } from 'ethers';\r\nimport React, { ReactElement, useEffect, useState } from 'react';\r\nimport blockTimes from '../../../../constants/blockTimes';\r\nimport { selectEthereumData } from '../../../../store/boltz-slice';\r\nimport { useAppSelector } from '../../../../store/hooks';\r\nimport { sendEthereumTransaction } from '../../../../utils/ethereumTransactionWrapper';\r\nimport { queryEthereumSwaps } from '../../../../views/refund/ethereumFetcher';\r\nimport BoltzEthereumAccount from '../BoltzEthereumAccount';\r\nimport BoltzSwapStep from '../BoltzSwapStep';\r\n\r\nconst useStyles = makeStyles(theme =>\r\n  createStyles({\r\n    root: {\r\n      display: 'flex',\r\n      'flex-direction': 'column',\r\n      'justify-content': 'space-between',\r\n      flex: 1,\r\n      minHeight: 440,\r\n    },\r\n    list: {\r\n      maxHeight: '10rem',\r\n      width: '100%',\r\n      overflowY: 'auto',\r\n      margin: '1rem 0',\r\n    },\r\n  })\r\n);\r\n\r\ntype EthereumRefundDetails = {\r\n  preimageHash: string;\r\n  claimAddress: string;\r\n  refundAddress: string;\r\n  amount: BigNumber;\r\n  timelock: BigNumber;\r\n\r\n  // Only set for ERC20 swaps\r\n  tokenAddress?: string;\r\n};\r\n\r\ntype RefundableEthSwap = {\r\n  id: string;\r\n  type: 'ERC20' | 'Ether'; // TODO: convert to enum\r\n  contract: Contract;\r\n  date: Date;\r\n  data: EthereumRefundDetails;\r\n};\r\n\r\nconst BoltzRefundEth = (): ReactElement => {\r\n  const classes = useStyles();\r\n\r\n  const [signer, setSigner] = useState<Signer | undefined>(undefined);\r\n  const [error, setError] = useState('');\r\n  const [wrongChain, setWrongChain] = useState(false);\r\n  const ethereumData = useAppSelector(selectEthereumData);\r\n  const [refundableEthSwaps, setRefundableEthSwaps] = useState<\r\n    RefundableEthSwap[]\r\n  >([]);\r\n\r\n  const [selectedSwap, setSelectedSwap] = useState<\r\n    RefundableEthSwap | undefined\r\n  >(undefined);\r\n  const [timeoutDelta, setTimeoutDelta] = useState<number | undefined>(\r\n    undefined,\r\n  );\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (!signer || error) return;\r\n    setRefundableEthSwaps([]);\r\n    const contracts = {\r\n      ethereum: {\r\n        swapContracts: ethereumData.swapContracts,\r\n      },\r\n    };\r\n    const abortQueryingEthereumSwaps = queryEthereumSwaps(\r\n      signer,\r\n      contracts,\r\n      (refundableSwap: RefundableEthSwap) => {\r\n        setRefundableEthSwaps(existingSwaps => existingSwaps.concat(refundableSwap));\r\n      },\r\n    );\r\n\r\n    return () => {\r\n      if (abortQueryingEthereumSwaps) {\r\n        abortQueryingEthereumSwaps();\r\n      }\r\n    };\r\n  }, [signer, error, ethereumData]);\r\n\r\n  useEffect(() => {\r\n    if (!signer || !selectedSwap) return;\r\n    setLoading(true);\r\n    (async () => {\r\n      try {\r\n        const blockNumber = await signer.provider!.getBlockNumber();\r\n        const timelock = selectedSwap.data.timelock.toNumber();\r\n        if (timelock > blockNumber) {\r\n          const timeoutDeltaHours = ((timelock - blockNumber) * blockTimes.Ethereum) / 3600;\r\n          setTimeoutDelta(parseFloat(timeoutDeltaHours.toFixed(2)));\r\n        } else {\r\n          setTimeoutDelta(-1);\r\n        }\r\n      } catch (e) {\r\n        setError(JSON.stringify(e));\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    })();\r\n  }, [selectedSwap, setTimeoutDelta, signer]);\r\n\r\n  const refundEthereumSwap = async () => {\r\n    if (!selectedSwap || !signer) return;\r\n    setLoading(true);\r\n    try {\r\n      setError('');\r\n      if (selectedSwap.type === 'Ether') {\r\n        const tx = await sendEthereumTransaction(\r\n          signer,\r\n          await selectedSwap.contract.populateTransaction.refund(\r\n            selectedSwap.data.preimageHash,\r\n            selectedSwap.data.amount,\r\n            selectedSwap.data.claimAddress,\r\n            selectedSwap.data.timelock,\r\n          ),\r\n        );\r\n        await tx.wait();\r\n      } else {\r\n        const tx = await sendEthereumTransaction(\r\n          signer,\r\n          await selectedSwap.contract.populateTransaction.refund(\r\n            selectedSwap.data.preimageHash,\r\n            selectedSwap.data.amount,\r\n            selectedSwap.data.tokenAddress,\r\n            selectedSwap.data.claimAddress,\r\n            selectedSwap.data.timelock,\r\n          ),\r\n        );\r\n        await tx.wait();\r\n      }\r\n      setRefundableEthSwaps(existingSwaps => existingSwaps.filter(swap => swap.id !== selectedSwap.id));\r\n      setSelectedSwap(undefined);\r\n      setTimeoutDelta(undefined);\r\n    } catch (e) {\r\n      setError(JSON.stringify(e));\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const mainButtonText = timeoutDelta\r\n    ? timeoutDelta <= -1\r\n      ? 'Refund'\r\n      : `Refundable in ~${timeoutDelta} hours`\r\n    : 'Select swap to refund';\r\n\r\n  const mainButtonDisabled = !wrongChain && timeoutDelta && timeoutDelta <= -1 ? false : true;\r\n\r\n  const content = (\r\n    <>\r\n      <Grid container direction='column' wrap='nowrap' alignItems='center'>\r\n        <BoltzEthereumAccount\r\n          setError={setError}\r\n          setSigner={setSigner}\r\n          setWrongChain={setWrongChain}\r\n        />\r\n        <List className={classes.list}>\r\n          {Object.values(refundableEthSwaps).map(swap => (\r\n            <ListItem\r\n              key={swap.id}\r\n              button\r\n              selected={selectedSwap?.id === swap.id}\r\n              onClick={() => {\r\n                setSelectedSwap(swap);\r\n              }}\r\n            >\r\n              <ListItemText>\r\n                <Grid\r\n                  item\r\n                  container\r\n                  justify='space-between'\r\n                  alignItems='center'\r\n                >\r\n                  <Grid item xs={12} sm={5}>\r\n                    <Typography variant='body2'>ID: {swap.id}</Typography>\r\n                  </Grid>\r\n                  <Typography variant='caption'>\r\n                    {new Date(swap.date).toLocaleString()}\r\n                  </Typography>\r\n                </Grid>\r\n              </ListItemText>\r\n            </ListItem>\r\n          ))}\r\n        </List>\r\n      </Grid>\r\n      <div></div>\r\n    </>\r\n  );\r\n  return (\r\n    <BoltzSwapStep\r\n      title='Check status or refund'\r\n      content={content}\r\n      mainButtonVisible\r\n      mainButtonDisabled={mainButtonDisabled}\r\n      mainButtonLoading={loading}\r\n      mainButtonText={mainButtonText}\r\n      errorMessage={error}\r\n      onMainButtonClick={refundEthereumSwap}\r\n    />\r\n  );\r\n};\r\n\r\nexport default BoltzRefundEth;\r\n","import { createStyles, FormControl, Grid, makeStyles, MenuItem, Select } from '@material-ui/core';\r\nimport React, { ReactElement, useState } from 'react';\r\nimport BoltzRefundBitcoinLike from '../components/BoltzSwapFlow/components/BoltzRefundBitcoinLike';\r\nimport BoltzRefundEth from '../components/BoltzSwapFlow/components/BoltzRefundEth';\r\nimport CardComponent from '../components/Card';\r\nimport CurrencyID from '../constants/currency';\r\n\r\nconst useStyles = makeStyles(() =>\r\n  createStyles({\r\n    root: {\r\n      display: 'flex',\r\n      'flex-direction': 'column',\r\n      'justify-content': 'space-between',\r\n      flex: 1,\r\n      minHeight: 440,\r\n    },\r\n    select: {\r\n      marginTop: '2rem',\r\n    },\r\n  })\r\n);\r\n\r\ntype CurrencyOption = {\r\n  id: CurrencyID;\r\n  label?: string;\r\n};\r\n\r\nconst assetOptions: CurrencyOption[] = [\r\n  { id: CurrencyID.BTC },\r\n  { id: CurrencyID.ETH, label: 'ETH/ERC20' },\r\n  {\r\n    id: CurrencyID.LTC,\r\n  },\r\n];\r\n\r\nconst BoltzRefund = (props: { swapId?: string }): ReactElement => {\r\n  const classes = useStyles();\r\n  const [asset, setAsset] = useState(assetOptions[0]);\r\n\r\n  const assetIsBitcoinLike = asset.id === CurrencyID.BTC || asset.id === CurrencyID.LTC;\r\n\r\n  return (\r\n    <Grid container direction='column' wrap='nowrap' alignItems='center'>\r\n      <Grid item container direction='column' wrap='nowrap'>\r\n        <CardComponent>\r\n          <div className={classes.root}>\r\n            <Grid item container justify='center' className={classes.select}>\r\n              <FormControl variant='outlined'>\r\n                <Select\r\n                  value={asset.id}\r\n                  onChange={e =>\r\n                    setAsset(\r\n                      assetOptions.find(\r\n                        option => option.id === e.target.value,\r\n                      )!,\r\n                    )}\r\n                >\r\n                  {assetOptions.map(assetOption => {\r\n                    return (\r\n                      <MenuItem value={assetOption.id} key={assetOption.id}>\r\n                        {assetOption.label || assetOption.id}\r\n                      </MenuItem>\r\n                    );\r\n                  })}\r\n                </Select>\r\n              </FormControl>\r\n            </Grid>\r\n            {assetIsBitcoinLike\r\n              ? (\r\n                <BoltzRefundBitcoinLike swapId={props.swapId} asset={asset.id} />\r\n              )\r\n              : (\r\n                <BoltzRefundEth />\r\n              )}\r\n          </div>\r\n        </CardComponent>\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport default BoltzRefund;\r\n","import { Grid } from '@material-ui/core';\r\nimport React, { ReactElement } from 'react';\r\nimport { ExtractRouteParams } from 'react-router';\r\nimport { Redirect, Route, Switch } from 'react-router-dom';\r\nimport BoltzSwapFlow from '../components/BoltzSwapFlow';\r\nimport CardComponent from '../components/Card';\r\nimport ChooseTradingPair from '../components/ChooseTradingPair';\r\nimport ComitSwapFlow from '../components/ComitSwapFlow';\r\nimport NetworkSelection from '../components/NetworkSelection';\r\nimport PoweredBy from '../components/PoweredBy';\r\nimport TdexSwapFlow from '../components/TdexSwapFlow';\r\nimport Title from '../components/Title';\r\nimport CurrencyID from '../constants/currency';\r\nimport { SwapProvider } from '../constants/swap';\r\nimport Layout from '../layout/main';\r\nimport BoltzRefund from './BoltzRefund';\r\n\r\nexport default function HomePage(): ReactElement {\r\n  return (\r\n    <Layout>\r\n      <Grid container direction='column' wrap='nowrap' alignItems='center'>\r\n        <Title>Liiska CoinSwap</Title>\r\n        <NetworkSelection />\r\n\r\n        <Grid item container direction='column' wrap='nowrap'>\r\n          <Switch>\r\n            <Route\r\n              path={ROUTES.NEW_SWAP}\r\n              sensitive={true}\r\n              strict={false}\r\n              exact={true}\r\n              render={(\r\n                {\r\n                  history,\r\n                  match: {\r\n                    params: {\r\n                      swapProvider: matchedSwapProvider,\r\n                      receiveAsset: matchedReceiveAsset,\r\n                      sendAsset: matchedSendAsset,\r\n                    },\r\n                  },\r\n                  location,\r\n                },\r\n              ) => {\r\n                let search = new URLSearchParams(location.search);\r\n                let sendAmount = search.get('sendAmount');\r\n                let receiveAmount = search.get('receiveAmount');\r\n\r\n                if (\r\n                  !matchedSwapProvider || !matchedSendAsset || !matchedReceiveAsset || !sendAmount || !receiveAmount\r\n                ) {\r\n                  history.replace(ROUTES.HOME);\r\n                  return null;\r\n                }\r\n\r\n                let swapProvider = matchedSwapProvider as SwapProvider;\r\n                let sendAsset = matchedSendAsset as CurrencyID;\r\n                let receiveAsset = matchedReceiveAsset as CurrencyID;\r\n\r\n                if (!swapProvider || !sendAsset || !receiveAsset) {\r\n                  history.replace(ROUTES.HOME);\r\n                  return null;\r\n                }\r\n\r\n                return (\r\n                  <>\r\n                    <CardComponent>\r\n                      <SwapFlow\r\n                        provider={swapProvider}\r\n                        sendAsset={sendAsset}\r\n                        sendAmount={sendAmount}\r\n                        receiveAsset={receiveAsset}\r\n                        receiveAmount={receiveAmount}\r\n                      />\r\n                    </CardComponent>\r\n                    {/* TODO: It may be better to \"switch\" here once on the provider and have dedicated PoweredByComit etc components that don't make any decisions internally */}\r\n                    <PoweredBy provider={swapProvider} />\r\n                  </>\r\n                );\r\n              }}\r\n            />\r\n            <Route\r\n              path={ROUTES.BOLTZ_REFUND_DETAIL}\r\n              sensitive={true}\r\n              strict={false}\r\n              exact={true}\r\n              render={(\r\n                {\r\n                  match: {\r\n                    params: {\r\n                      swapId,\r\n                    },\r\n                  },\r\n                },\r\n              ) => {\r\n                return (\r\n                  <BoltzRefund swapId={swapId} />\r\n                );\r\n              }}\r\n            />\r\n            <Route exact path={ROUTES.BOLTZ_REFUND}>\r\n              <BoltzRefund />\r\n            </Route>\r\n            <Route exact path={ROUTES.HOME}>\r\n              <ChooseTradingPair />\r\n            </Route>\r\n            <Route path='*'>\r\n              <Redirect to={ROUTES.HOME} />\r\n            </Route>\r\n          </Switch>\r\n        </Grid>\r\n      </Grid>\r\n    </Layout>\r\n  );\r\n}\r\n\r\nexport const ROUTES = {\r\n  HOME: '/',\r\n  NEW_SWAP: '/swap/:swapProvider/:sendAsset/:receiveAsset',\r\n  BOLTZ_REFUND_DETAIL: '/boltz/refund/:swapId',\r\n  BOLTZ_REFUND: '/boltz/refund',\r\n};\r\n\r\n// copied from https://dev.to/0916dhkim/type-safe-usage-of-react-router-5c44\r\nexport const buildUrl = <P extends string>(\r\n  path: P,\r\n  params: ExtractRouteParams<P>,\r\n  query: URLSearchParams, // TODO: Figure out how to make this typesafe\r\n): string => {\r\n  let ret: string = path;\r\n\r\n  for (const key of Object.keys(params)) {\r\n    ret = ret.replace(`:${key}`, params[key]);\r\n  }\r\n\r\n  return `${ret}?${query.toString()}`;\r\n};\r\n\r\nexport interface SwapFlowProps {\r\n  provider: SwapProvider;\r\n  sendAsset: CurrencyID;\r\n  receiveAsset: CurrencyID;\r\n  sendAmount: string;\r\n  receiveAmount: string;\r\n}\r\n\r\nfunction SwapFlow(props: SwapFlowProps) {\r\n  switch (props.provider) {\r\n    case SwapProvider.BOLTZ:\r\n      return <BoltzSwapFlow {...props} />;\r\n    case SwapProvider.TDEX:\r\n      return <TdexSwapFlow {...props} />;\r\n    case SwapProvider.COMIT:\r\n      return <ComitSwapFlow {...props} />;\r\n    default:\r\n      return null;\r\n  }\r\n}\r\n","import { configureStore } from '@reduxjs/toolkit';\r\nimport boltzReducer from './boltz-slice';\r\nimport tdexReducer from './tdex-slice';\r\n\r\nexport const store = configureStore({\r\n  reducer: {\r\n    boltz: boltzReducer,\r\n    tdex: tdexReducer,\r\n  },\r\n});\r\n\r\n// Infer the `RootState` and `AppDispatch` types from the store itself\r\nexport type RootState = ReturnType<typeof store.getState>;\r\nexport type AppDispatch = typeof store.dispatch;\r\n","import CssBaseline from '@material-ui/core/CssBaseline';\r\nimport { createMuiTheme, Theme } from '@material-ui/core';\r\nimport { ThemeProvider } from '@material-ui/styles';\r\nimport { createBrowserHistory } from 'history';\r\nimport React from 'react';\r\nimport { Provider } from 'react-redux';\r\nimport { Router } from 'react-router-dom';\r\nimport { NetworkProvider } from '../../context/NetworkContext';\r\nimport { UtilsProvider } from '../../context/UtilsContext';\r\nimport HomePage from '../../pages/home';\r\nimport { store } from '../../store';\r\nimport { theme } from './theme';\r\n\r\nconst history = createBrowserHistory();\r\n\r\nfunction App() {\r\n  return (\r\n    <ThemeProvider theme={createMuiTheme(theme as unknown as Theme)}>\r\n      <CssBaseline />\r\n      <NetworkProvider>\r\n        <UtilsProvider>\r\n          <Provider store={store}>\r\n            <Router history={history}>\r\n              <HomePage />\r\n            </Router>\r\n          </Provider>\r\n        </UtilsProvider>\r\n      </NetworkProvider>\r\n    </ThemeProvider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost'\r\n    // [::1] is the IPv6 localhost address.\r\n    || window.location.hostname === '[::1]'\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    || window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/,\r\n    ),\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service '\r\n              + 'worker. To learn more, visit https://bit.ly/CRA-PWA',\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all '\r\n                  + 'tabs for this page are closed. See https://bit.ly/CRA-PWA.',\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404\r\n        || (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.',\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import ReactDOM from 'react-dom';\r\nimport App from './components/App';\r\nimport './index.scss';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\nserviceWorker.unregister();\r\n","import { ECPair } from 'bitcoinjs-lib';\r\n\r\nexport const getHexString = input => {\r\n  return input.toString('hex');\r\n};\r\n\r\nexport const generateKeys = network => {\r\n  const keys = ECPair.makeRandom({ network });\r\n\r\n  return {\r\n    publicKey: getHexString(keys.publicKey),\r\n    privateKey: getHexString(keys.privateKey),\r\n  };\r\n};\r\n","// Transport interface is the new abstraction that allows to decouple\r\n// blockchain and the techcnology used to move, allowing to add easily\r\n// new tokens/currencies of other chains or new tech.\r\n// A Layer could also be shared in common, ie. Lightning is both on BTC and LTC\r\n// this way it's easy to reason about and maintain the separations of concerns.\r\n// This abstraction is useful for components to infer specific dynamic that\r\n// could be specific to a coin used with a specific combo.\r\n// An optional type field has been added to allow distinctions that ony chain/layer\r\n// cannot express by itself, that are specific to that combo. ie. Ether vs ERC20\r\n// or RGB in the context of Bitcoin ecosystem ie. RGB vs OMNI\r\n// In case no distincion is needed, fine to leave it undefined, for example in Liquid\r\n// Liquid Bitcoin has the same exact way of being managed of other assets\r\nexport default interface Transport {\r\n  chain: TransportChain;\r\n  layer: TransportLayer;\r\n  extraType?: TransportExtraType;\r\n}\r\n\r\n// we list here all the possible chains we can support. We can easily adds many more\r\n// altcoins blockchains decoupling from the layer or the token/currency.\r\n// ie. Tether lives on many chains already\r\nexport enum TransportChain {\r\n  BITCOIN = 0,\r\n  ETHEREUM = 1,\r\n  LIQUID = 2,\r\n  LITECOIN = 3,\r\n  MONERO = 4,\r\n}\r\n\r\n// the same token/currency can live on many layers of the same chain\r\n// many different layers that are specific of a single blockchain can\r\n// be added easily.\r\nexport enum TransportLayer {\r\n  ONCHAIN = 0,\r\n  LIGHTNING = 1,\r\n}\r\n\r\nexport enum TransportExtraType {\r\n  Ether = 0,\r\n  ERC20 = 1,\r\n  Omni = 2,\r\n  RGB = 3,\r\n}\r\n","import getCurrencyLabel from '../utils/getCurrencyLabel';\r\nimport Transport, { TransportChain, TransportExtraType, TransportLayer } from './transport';\r\n\r\n// this was the old Currency enum basically, it was mixing many domains together:\r\n// the blockchain used, the layer and also the name of the token/currency\r\n// Now is just the human readbale name of the currency and information about transport\r\n// the idea is to have just the <ticker> when obvious (ie. native token ot the chain)\r\n// in other cases <transport>_<ticker>\r\n// it's not meant to be \"machine redadable\" netither for user consumption just an internal ID\r\nexport enum CurrencyID {\r\n  BTC = 'BTC',\r\n  LIGHTNING_BTC = 'Lightning BTC',\r\n  LIQUID_BTC = 'Liquid BTC',\r\n  LTC = 'LTC',\r\n  LIGHTNING_LTC = 'Lightning LTC',\r\n  ETH = 'ETH',\r\n  ETH_USDT = 'Ethereum USDt', // this become \"Ethereum USDt\" to be consistent\r\n  MONERO = 'XMR',\r\n  LIQUID_USDT = 'Liquid USDt',\r\n  LIQUID_CAD = 'Liquid CAD',\r\n}\r\n\r\n// this allows to export currency as Currency in other places in the codebase\r\nexport default CurrencyID;\r\n\r\n// CurrencyInterface is the TS interface that defines how an actual currency\r\n// data structure should be created: it adds the new Transport interface only\r\n// the other fields are backward compatible with CurrencyOption type\r\n// NOTICE: name is not an unique identifier, being Bitcoin or Tether present\r\n// on multiple chains and layers combination. Best way would be to renamig it to just \"currency\" or \"name\"\r\n// to uniquely identify that token/currency id + transport should be taken into consideration instead\r\n// what swapValues.type was trying to do it has been replaced by the Transport abstraction\r\nexport interface CurrencyInterface {\r\n  id: CurrencyID;\r\n  name: CurrencyName;\r\n  symbol: string;\r\n  transport: Transport;\r\n}\r\n\r\n// CurrencyOption defines the interface of the currency available for trading\r\n// It extends the CurrencyInterface and adds the swapValues for for backward compatibility\r\n// NOTICE: components could start looking to the more scalable Transport instead\r\nexport interface CurrencyOption extends CurrencyInterface {\r\n  label: JSX.Element;\r\n  swapValues: {\r\n    label: string;\r\n    type: CurrencyType;\r\n  };\r\n}\r\n\r\n// this new Currency enum  only defines the token/currency\r\n// it does not depened on the underlying chain/layer.\r\n// this allows to grow the assets and to abstract the underlying technicalities\r\n// ie. BTC is still BTC even if use send via Lightning or Liquid\r\nexport enum CurrencyName {\r\n  BTC = 'Bitcoin',\r\n  LTC = 'Litecoin',\r\n  USDT = 'Tether USD',\r\n  ETH = 'Ether',\r\n  MONERO = 'Monero',\r\n  CAD = 'CAD',\r\n}\r\n\r\n// old: kept for backward compatibility only to maintain swapValues\r\nexport enum CurrencyType {\r\n  Ether = 'Ether',\r\n  ERC20 = 'ERC20',\r\n  Lightning = 'Lightning',\r\n  BitcoinLike = 'BitcoinLike',\r\n  Monero = 'Monero',\r\n  Liquid = 'Liquid',\r\n}\r\n\r\nexport const CurrencyByID: Record<CurrencyID, CurrencyOption> = {\r\n  [CurrencyID.BTC]: {\r\n    id: CurrencyID.BTC,\r\n    name: CurrencyName.BTC,\r\n    symbol: 'BTC',\r\n    label: getCurrencyLabel('Bitcoin', 'Bitcoin'),\r\n    transport: {\r\n      chain: TransportChain.BITCOIN,\r\n      layer: TransportLayer.ONCHAIN,\r\n    },\r\n    swapValues: {\r\n      label: 'Bitcoin',\r\n      type: CurrencyType.BitcoinLike,\r\n    },\r\n  },\r\n  [CurrencyID.LIGHTNING_BTC]: {\r\n    id: CurrencyID.LIGHTNING_BTC,\r\n    name: CurrencyName.BTC,\r\n    symbol: 'BTC',\r\n    label: getCurrencyLabel('LN-BTC', 'LightningBitcoin'),\r\n    transport: {\r\n      chain: TransportChain.BITCOIN,\r\n      layer: TransportLayer.LIGHTNING,\r\n    },\r\n    swapValues: {\r\n      label: 'Bitcoin Lightning',\r\n      type: CurrencyType.Lightning,\r\n    },\r\n  },\r\n  [CurrencyID.LIQUID_BTC]: {\r\n    id: CurrencyID.LIQUID_BTC,\r\n    name: CurrencyName.BTC,\r\n    symbol: 'L-BTC',\r\n    label: getCurrencyLabel('L-BTC', 'LiquidBitcoin'),\r\n    transport: {\r\n      chain: TransportChain.LIQUID,\r\n      layer: TransportLayer.ONCHAIN,\r\n    },\r\n    swapValues: {\r\n      label: 'Bitcoin Liquid',\r\n      type: CurrencyType.Liquid,\r\n    },\r\n  },\r\n  [CurrencyID.LIQUID_USDT]: {\r\n    id: CurrencyID.LIQUID_USDT,\r\n    name: CurrencyName.USDT,\r\n    symbol: 'USDt',\r\n    transport: {\r\n      chain: TransportChain.LIQUID,\r\n      layer: TransportLayer.ONCHAIN,\r\n    },\r\n    label: getCurrencyLabel('USDt', 'LiquidTether'),\r\n    swapValues: {\r\n      label: 'Tether Liquid',\r\n      type: CurrencyType.Liquid,\r\n    },\r\n  },\r\n  [CurrencyID.LIQUID_CAD]: {\r\n    id: CurrencyID.LIQUID_CAD,\r\n    name: CurrencyName.CAD,\r\n    symbol: 'LCAD',\r\n    transport: {\r\n      chain: TransportChain.LIQUID,\r\n      layer: TransportLayer.ONCHAIN,\r\n    },\r\n    label: getCurrencyLabel('LCAD', 'LiquidCAD'),\r\n    swapValues: {\r\n      label: 'Liquid CAD',\r\n      type: CurrencyType.Liquid,\r\n    },\r\n  },\r\n  [CurrencyID.ETH]: {\r\n    id: CurrencyID.ETH,\r\n    name: CurrencyName.ETH,\r\n    symbol: 'ETH',\r\n    label: getCurrencyLabel('Ether', 'Ether'),\r\n    transport: {\r\n      chain: TransportChain.ETHEREUM,\r\n      layer: TransportLayer.ONCHAIN,\r\n      extraType: TransportExtraType.Ether,\r\n    },\r\n    swapValues: {\r\n      label: 'Ether',\r\n      type: CurrencyType.Ether,\r\n    },\r\n  },\r\n  [CurrencyID.ETH_USDT]: {\r\n    id: CurrencyID.ETH_USDT,\r\n    name: CurrencyName.USDT,\r\n    symbol: 'USDT',\r\n    label: getCurrencyLabel('USDT', 'Tether'),\r\n    transport: {\r\n      chain: TransportChain.ETHEREUM,\r\n      layer: TransportLayer.ONCHAIN,\r\n      extraType: TransportExtraType.ERC20,\r\n    },\r\n    swapValues: {\r\n      label: 'Tether',\r\n      type: CurrencyType.ERC20,\r\n    },\r\n  },\r\n  [CurrencyID.LTC]: {\r\n    id: CurrencyID.LTC,\r\n    name: CurrencyName.LTC,\r\n    symbol: 'LTC',\r\n    label: getCurrencyLabel('Litecoin', 'Litecoin'),\r\n    transport: {\r\n      chain: TransportChain.LITECOIN,\r\n      layer: TransportLayer.ONCHAIN,\r\n    },\r\n    swapValues: {\r\n      label: 'Litecoin',\r\n      type: CurrencyType.BitcoinLike,\r\n    },\r\n  },\r\n  [CurrencyID.LIGHTNING_LTC]: {\r\n    id: CurrencyID.LIGHTNING_LTC,\r\n    name: CurrencyName.LTC,\r\n    symbol: 'LTC',\r\n    label: getCurrencyLabel('LN-LTC', 'LightningLitecoin'),\r\n    transport: {\r\n      chain: TransportChain.LITECOIN,\r\n      layer: TransportLayer.LIGHTNING,\r\n    },\r\n    swapValues: {\r\n      label: 'Litecoin Lightning',\r\n      type: CurrencyType.Lightning,\r\n    },\r\n  },\r\n  [CurrencyID.MONERO]: {\r\n    id: CurrencyID.MONERO,\r\n    name: CurrencyName.MONERO,\r\n    symbol: 'XMR',\r\n    label: getCurrencyLabel('Monero', 'Monero'),\r\n    transport: {\r\n      chain: TransportChain.MONERO,\r\n      layer: TransportLayer.ONCHAIN,\r\n    },\r\n    swapValues: {\r\n      label: 'Monero',\r\n      type: CurrencyType.Monero,\r\n    },\r\n  },\r\n};\r\nexport const CurrencyOptions: CurrencyOption[] = Object.values(CurrencyByID);\r\n\r\nexport type FundTransferType = {\r\n  id: string;\r\n  value: string;\r\n};\r\n\r\ntype FundTransferTypes = {\r\n  [key: string]: FundTransferType[];\r\n};\r\n\r\nexport const fundTransferTypes: FundTransferTypes = {\r\n  BTC: [\r\n    {\r\n      id: 'Sats',\r\n      value: '1',\r\n    },\r\n    {\r\n      id: 'BTC',\r\n      value: '2',\r\n    },\r\n  ],\r\n  LTC: [\r\n    {\r\n      id: 'Litoshi',\r\n      value: '1',\r\n    },\r\n    {\r\n      id: 'LTC',\r\n      value: '2',\r\n    },\r\n  ],\r\n  ETH: [\r\n    {\r\n      id: 'Ether',\r\n      value: '2',\r\n    },\r\n  ],\r\n  USDT: [\r\n    {\r\n      id: 'USDT',\r\n      value: '2',\r\n    },\r\n  ],\r\n};\r\n","export default __webpack_public_path__ + \"static/media/Bitcoin.0b681011.svg\";","export default __webpack_public_path__ + \"static/media/Ether.a9c0ef40.svg\";","export default __webpack_public_path__ + \"static/media/LightningBitcoin.1597bca4.svg\";","export default __webpack_public_path__ + \"static/media/LightningLitecoin.c5fb4023.svg\";","export default __webpack_public_path__ + \"static/media/LiquidCAD.051f6612.png\";","export default __webpack_public_path__ + \"static/media/LiquidTether.bdfd5ba4.svg\";","export default __webpack_public_path__ + \"static/media/Litecoin.bfddd387.svg\";","export default __webpack_public_path__ + \"static/media/Monero.650b7bd1.svg\";","import Bitcoin from './Bitcoin.svg';\r\nimport Ether from './Ether.svg';\r\nimport LightningBitcoin from './LightningBitcoin.svg';\r\nimport LightningLitecoin from './LightningLitecoin.svg';\r\nimport LiquidBitcoin from './LiquidBitcoin.png';\r\nimport LiquidCAD from './LiquidCAD.png';\r\nimport LiquidTether from './LiquidTether.svg';\r\nimport Litecoin from './Litecoin.svg';\r\nimport Monero from './Monero.svg';\r\nimport Tether from './TetherLogo.svg';\r\n\r\nexport default {\r\n  Ether,\r\n  Tether,\r\n  Bitcoin,\r\n  Litecoin,\r\n  LiquidBitcoin,\r\n  LiquidTether,\r\n  LiquidCAD,\r\n  LightningBitcoin,\r\n  LightningLitecoin,\r\n  Monero,\r\n};\r\n","export default __webpack_public_path__ + \"static/media/TetherLogo.10d27257.svg\";","export default \"data:image/png;base64,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\"","import React from 'react';\r\nimport currencyIcons from '../assets/images/currencies';\r\n\r\nconst getCurrencyLabel = (text, icon) => {\r\n  return (\r\n    <>\r\n      <span className='label-icon'>\r\n        <img\r\n          style={{ width: '2rem', marginRight: '0.5rem' }}\r\n          src={currencyIcons[icon]}\r\n          alt={text}\r\n        />\r\n      </span>\r\n      <span>{text}</span>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default getCurrencyLabel;\r\n","import { generateKeys } from './keys';\r\n\r\nconst randomBytes = size => {\r\n  const bytes = Buffer.allocUnsafe(size);\r\n  global.crypto.getRandomValues(bytes);\r\n\r\n  return bytes;\r\n};\r\n\r\nexport { generateKeys, randomBytes };\r\n","import { filter, mergeMap } from 'rxjs/operators';\r\nimport { address, ECPair, Network, Transaction } from 'bitcoinjs-lib';\r\nimport { constructRefundTransaction, detectSwap } from 'boltz-core';\r\nimport qrcodeParser from 'qrcode-parser';\r\nimport { from, Observable, of, throwError } from 'rxjs';\r\nimport { BOLTZ_BROADCAST_TRANSACTION_API_URL, BOLTZ_GET_FEE_ESTIMATION_API_URL } from '../api/boltzApiUrls';\r\nimport { FeeResponse, RefundDetails, RefundTransaction } from '../constants/boltzSwap';\r\nimport CurrencyID from '../constants/currency';\r\nimport { BoltzConfiguration } from '../context/NetworkContext';\r\n\r\nexport const addRefundDetailsToLocalStorage = (\r\n  details: RefundDetails,\r\n): void => {\r\n  const boltzSwaps = getBoltzSwapsFromLocalStorage();\r\n  boltzSwaps.push(details);\r\n  setBoltzSwapsToLocalStorage(boltzSwaps);\r\n};\r\n\r\nexport const removeRefundDetailsFromLocalStorage = (swapId: string): void => {\r\n  const boltzSwaps = getBoltzSwapsFromLocalStorage();\r\n  const swapIndex = boltzSwaps.findIndex(swap => swap.swapId === swapId);\r\n  if (swapIndex !== -1) {\r\n    boltzSwaps.splice(swapIndex, 1);\r\n    setBoltzSwapsToLocalStorage(boltzSwaps);\r\n  }\r\n};\r\n\r\nexport const getBoltzSwapsFromLocalStorage = (): RefundDetails[] => {\r\n  return JSON.parse(localStorage.getItem('boltzSwaps') || '[]');\r\n};\r\n\r\nconst setBoltzSwapsToLocalStorage = (swaps: RefundDetails[]): void => {\r\n  localStorage.setItem('boltzSwaps', JSON.stringify(swaps));\r\n};\r\n\r\nconst verifyRefundFile = (fileJSON: Object, keys: string[]) => {\r\n  return keys.every(key => Object.prototype.hasOwnProperty.call(fileJSON, key));\r\n};\r\n\r\nexport const convertRefundFile = async (\r\n  file: File,\r\n): Promise<RefundDetails | undefined> => {\r\n  let fileJson;\r\n\r\n  switch (file.type) {\r\n    case 'application/json':\r\n      const reader = new window.FileReader();\r\n      reader.readAsText(file);\r\n\r\n      await new Promise<void>(resolve => {\r\n        reader.onload = () => {\r\n          fileJson = JSON.parse(reader.result as string);\r\n          resolve();\r\n        };\r\n      });\r\n      break;\r\n\r\n    case 'image/png':\r\n      qrcodeParser(file)\r\n        .then(parsedQr => {\r\n          fileJson = JSON.parse(parsedQr.data);\r\n        })\r\n        .catch(() => (fileJson = {}));\r\n      try {\r\n        const parsedQr = await qrcodeParser(file);\r\n        fileJson = JSON.parse(parsedQr.data);\r\n      } catch {\r\n        fileJson = {};\r\n      } finally {\r\n        break;\r\n      }\r\n\r\n    default:\r\n      window.alert(`Unknown refund file format: ${file.type}`);\r\n      return;\r\n  }\r\n\r\n  const verifyFile = verifyRefundFile(fileJson, [\r\n    'swapId',\r\n    'currency',\r\n    'redeemScript',\r\n    'privateKey',\r\n    'timeoutBlockHeight',\r\n  ]);\r\n\r\n  return verifyFile ? fileJson : undefined;\r\n};\r\n\r\nexport const startRefund = (\r\n  refundFile: RefundDetails,\r\n  destinationAddress: string,\r\n  transactionHash: string,\r\n  boltzConfig: BoltzConfiguration,\r\n): Observable<void> => {\r\n  const currency = refundFile.currency;\r\n  return getFeeEstimation(boltzConfig.apiEndpoint).pipe(\r\n    mergeMap(fees =>\r\n      createRefundTransaction(\r\n        refundFile,\r\n        transactionHash,\r\n        destinationAddress,\r\n        currency,\r\n        fees,\r\n        boltzConfig,\r\n      )\r\n    ),\r\n    mergeMap((tx: RefundTransaction) =>\r\n      broadcastRefund(\r\n        currency,\r\n        tx.refundTransaction.toHex(),\r\n        boltzConfig.apiEndpoint,\r\n      )\r\n    ),\r\n  );\r\n};\r\n\r\nexport const getFeeEstimation = (\r\n  apiEndpoint: string,\r\n): Observable<FeeResponse> => {\r\n  return from(fetch(BOLTZ_GET_FEE_ESTIMATION_API_URL(apiEndpoint))).pipe(\r\n    mergeMap((resp: Response) =>\r\n      from(resp.json()).pipe(\r\n        mergeMap(body => (resp.ok ? of(body) : throwError(body))),\r\n      )\r\n    ),\r\n  );\r\n};\r\n\r\nexport const getHexBuffer = (input: string): Buffer => {\r\n  return Buffer.from(input, 'hex');\r\n};\r\n\r\nconst getNetwork = (\r\n  currency: CurrencyID,\r\n  boltzConfig: BoltzConfiguration,\r\n): Network => {\r\n  return currency === CurrencyID.BTC\r\n    ? boltzConfig.bitcoinConstants\r\n    : boltzConfig.litecoinConstants;\r\n};\r\n\r\nconst createRefundTransaction = (\r\n  refundFile: RefundDetails,\r\n  transactionHash: string,\r\n  destinationAddress: string,\r\n  currency: CurrencyID,\r\n  feeEstimation: FeeResponse,\r\n  boltzConfig: BoltzConfiguration,\r\n): Observable<RefundTransaction> => {\r\n  const redeemScript = getHexBuffer(refundFile.redeemScript);\r\n  const lockupTransaction = Transaction.fromHex(transactionHash);\r\n\r\n  return of({\r\n    refundTransaction: constructRefundTransaction(\r\n      [\r\n        {\r\n          redeemScript,\r\n          txHash: lockupTransaction.getHash(),\r\n          keys: ECPair.fromPrivateKey(getHexBuffer(refundFile.privateKey)),\r\n          ...detectSwap(redeemScript, lockupTransaction)!,\r\n        },\r\n      ],\r\n      address.toOutputScript(\r\n        destinationAddress,\r\n        getNetwork(currency, boltzConfig),\r\n      ),\r\n      refundFile.timeoutBlockHeight,\r\n      feeEstimation[currency],\r\n    ),\r\n    lockupTransactionId: lockupTransaction.getId(),\r\n  });\r\n};\r\n\r\nexport const broadcastRefund = (\r\n  currency: CurrencyID,\r\n  transactionHex: string,\r\n  apiEndpoint: string,\r\n): Observable<void> => {\r\n  return from(\r\n    fetch(BOLTZ_BROADCAST_TRANSACTION_API_URL(apiEndpoint), {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json;charset=utf-8',\r\n      },\r\n      body: JSON.stringify({\r\n        currency,\r\n        transactionHex,\r\n      }),\r\n    }),\r\n  ).pipe(\r\n    mergeMap(resp => resp.json()),\r\n    filter(data => !!data.error),\r\n    mergeMap(data => {\r\n      throw new Error(`Failed to broadcast transaction: ${data.error}`);\r\n    }),\r\n  );\r\n};\r\n","export const BOLTZ_GET_PAIRS_API_URL = (baseUrl: string) => `${baseUrl}/getpairs`;\r\nexport const BOLTZ_GET_CONTRACTS_API_URL = (baseUrl: string) => `${baseUrl}/getcontracts`;\r\nexport const BOLTZ_CREATE_SWAP_API_URL = (baseUrl: string) => `${baseUrl}/createSwap`;\r\nexport const BOLTZ_STREAM_SWAP_STATUS_API_URL = (baseUrl: string) => `${baseUrl}/streamswapstatus`;\r\nexport const BOLTZ_SWAP_STATUS_API_URL = (baseUrl: string) => `${baseUrl}/swapstatus`;\r\nexport const BOLTZ_GET_SWAP_TRANSACTION_API_URL = (baseUrl: string) => `${baseUrl}/getswaptransaction`;\r\nexport const BOLTZ_GET_FEE_ESTIMATION_API_URL = (baseUrl: string) => `${baseUrl}/getfeeestimation`;\r\nexport const BOLTZ_BROADCAST_TRANSACTION_API_URL = (baseUrl: string) => `${baseUrl}/broadcasttransaction`;\r\n"],"sourceRoot":""}